---
title: pythonåŸºç¡€çŸ¥è¯†
date: '2022/9/10 20:46:25'
top_img: 'https://pic.hycbook.com/i/hexo/post_imgs/è•¾å§†0.webp'
cover: 'https://pic.hycbook.com/i/hexo/post_cover/è•¾å§†0.webp'
categories:
  - python
tags:
  - python
  - å­—ç¬¦é›†
  - pycharm
  - random
  - æ—¶é—´åº“timeå’Œdatetime
  - å‘½ä»¤è¡Œä¼ å‚
  - é¡¹ç›®ä¾èµ–
abbrlink: 8258
---

---




# pythonåŸºç¡€çŸ¥è¯†

## pythonè§£é‡Šå™¨

> CPython

è¿™ä¸ªè§£é‡Šå™¨æ˜¯ç”¨Cè¯­è¨€å¼€å‘çš„ï¼Œæ‰€ä»¥å« CPythonï¼Œåœ¨å‘½åè¡Œä¸‹è¿è¡Œpythonï¼Œå°±æ˜¯å¯åŠ¨CPythonè§£é‡Šå™¨
CPythonæ˜¯ä½¿ç”¨æœ€å¹¿çš„Pythonè§£é‡Šå™¨

> IPython

IPythonæ˜¯åŸºäºCPythonä¹‹ä¸Šçš„ä¸€ä¸ªäº¤äº’å¼è§£é‡Šå™¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒIPythonåªæ˜¯åœ¨äº¤äº’æ–¹å¼ä¸Šæœ‰æ‰€å¢å¼º

> PyPy

PyPyæ˜¯å¦ä¸€ä¸ªPythonè§£é‡Šå™¨ï¼Œå®ƒçš„ç›®æ ‡æ˜¯æ‰§è¡Œé€Ÿåº¦
PyPyé‡‡ç”¨JITæŠ€æœ¯ï¼Œå¯¹Pythonä»£è¿›è¡ŒåŠ¨æ€ç¼–è¯‘ï¼Œæ‰€ä»¥å¯ä»¥æ˜¾è‘—æé«˜Pythonä»£ç çš„æ‰§è¡Œé€Ÿåº¦

> Jython

Jythonæ˜¯è¿è¡Œåœ¨Javaå¹³å°ä¸Šçš„Pythonè§£é‡Šå™¨ï¼Œå¯ä»¥ç›´æ¥æŠŠPythonä»£ç ç¼–è¯‘æˆJavaå­—èŠ‚ç æ‰§è¡Œ

> IronPython

IronPythonå’ŒJythonç±»ä¼¼ï¼Œåªä¸è¿‡IronPythonæ˜¯è¿è¡Œåœ¨å¾®è½¯.Netå¹³å°ä¸Šçš„Pythonè§£é‡Šå™¨
å¯ä»¥ç›´æ¥æŠŠPythonä»£ç ç¼–è¯‘æˆ.Netçš„å­—èŠ‚ç ã€‚

## å­—ç¬¦é›†å’Œå­—ç¬¦ç¼–ç 

> [ååˆ†é’Ÿææ¸…å­—ç¬¦é›†å’Œå­—ç¬¦ç¼–ç ](https://www.cnblogs.com/cenalulu/p/4251639.html)
>
> [ç¨‹åºå‘˜å¿…å¤‡ï¼šå½»åº•å¼„æ‡‚å¸¸è§çš„7ç§ä¸­æ–‡å­—ç¬¦ç¼–ç ](https://zhuanlan.zhihu.com/p/46216008)

è®¡ç®—æœºå±å¹•ä¸Šçœ‹åˆ°å®ä½“åŒ–çš„æ–‡å­—ï¼Œåœ¨è®¡ç®—æœºå­˜å‚¨ä»‹è´¨ä¸­å­˜æ”¾çš„å®é™…æ˜¯äºŒè¿›åˆ¶çš„æ¯”ç‰¹æµ
ä¸¤è€…ä¹‹é—´çš„è½¬æ¢è§„åˆ™å°±éœ€è¦ä¸€ä¸ªç»Ÿä¸€çš„æ ‡å‡†

![img](https://pic.hycbook.com/i/hexo/bk_resources/python/14.pythonåŸºç¡€çŸ¥è¯†/v2-0d0285e7b9433eeedf7e705d6e082d13_720w.webp)
### å­—ç¬¦é›†

å­—ç¬¦é›†ï¼šä¸ºæ¯ä¸€ä¸ªã€Œå­—ç¬¦ã€åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„ IDï¼ˆå­¦åä¸ºç ä½ / ç ç‚¹ / Code Pointï¼‰ 

> ä¸ºä»€ä¹ˆé‚£ä¹ˆå¤šå­—ç¬¦é›†

é—®é¢˜å®é™…éå¸¸å®¹æ˜“å›ç­”ã€‚é—®é—®è‡ªå·±ä¸ºä»€ä¹ˆæˆ‘ä»¬çš„æ’å¤´æ‹¿åˆ°è‹±å›½å°±ä¸èƒ½ç”¨äº†å‘¢ï¼Ÿä¸ºä»€ä¹ˆæ˜¾ç¤ºå™¨åŒæ—¶æœ‰DVIï¼ŒVGAï¼ŒHDMIï¼ŒDPè¿™ä¹ˆå¤šæ¥å£å‘¢ï¼Ÿå¾ˆå¤šè§„èŒƒå’Œæ ‡å‡†åœ¨æœ€åˆåˆ¶å®šæ—¶å¹¶ä¸ä¼šæ„è¯†åˆ°è¿™å°†ä¼šæ˜¯ä»¥åå…¨çƒæ™®é€‚çš„å‡†åˆ™ï¼Œæˆ–è€…å¤„äºç»„ç»‡æœ¬èº«åˆ©ç›Šå°±æƒ³ä»æœ¬è´¨ä¸ŠåŒºåˆ«äºç°æœ‰æ ‡å‡†ã€‚äºæ˜¯ï¼Œå°±äº§ç”Ÿäº†é‚£ä¹ˆå¤šå…·æœ‰ç›¸åŒæ•ˆæœä½†åˆä¸ç›¸äº’å…¼å®¹çš„æ ‡å‡†äº†ã€‚
è¯´äº†é‚£ä¹ˆå¤šæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå®é™…ä¾‹å­ï¼Œä¸‹é¢å°±æ˜¯`å±Œ`è¿™ä¸ªå­—åœ¨å„ç§ç¼–ç ä¸‹çš„åå…­è¿›åˆ¶å’ŒäºŒè¿›åˆ¶ç¼–ç ç»“æœï¼Œæ€ä¹ˆæ ·æœ‰æ²¡æœ‰ä¸€ç§å¾ˆå±Œçš„æ„Ÿè§‰ï¼Ÿ

| å­—ç¬¦é›† | 16è¿›åˆ¶ç¼–ç  | å¯¹åº”çš„äºŒè¿›åˆ¶æ•°æ®         |
| ------ | ---------- | ------------------------ |
| UTF-8  | 0xE5B18C   | 111001011011000110001100 |
| UTF-16 | 0x5C4C     | 101110001001100          |
| GBK    | 0x8CC5     | 1000110011000101         |

å¸¸è§å­—ç¬¦é›†

* **ASCII å­—ç¬¦é›†**ï¼š

  ASCIIç¼–ç æ¯ä¸ªå­—æ¯æˆ–ç¬¦å·å 1byte(8bits)ï¼Œå¹¶ä¸”8bitsçš„æœ€é«˜ä½æ˜¯0ï¼Œå› æ­¤**ASCIIèƒ½ç¼–ç çš„å­—æ¯å’Œç¬¦å·åªæœ‰128ä¸ª**ã€‚æœ‰ä¸€äº›ç¼–ç æŠŠ8bitsæœ€é«˜ä½ä¸º1çš„å128ä¸ªå€¼ä¹Ÿç¼–ç ä¸Šï¼Œä½¿å¾—1byteå¯ä»¥è¡¨ç¤º256ä¸ªå€¼ï¼Œä½†æ˜¯è¿™å±äºæ‰©å±•çš„ASCIIï¼Œå¹¶éæ ‡å‡†ASCIIã€‚é€šå¸¸æ‰€è¯´çš„æ ‡å‡†ASCIIåªæœ‰å‰128ä¸ªå€¼ï¼

  ASCIIç¼–ç å‡ ä¹è¢«ä¸–ç•Œä¸Šæ‰€æœ‰ç¼–ç æ‰€å…¼å®¹ï¼ˆUTF16å’ŒUTF32æ˜¯ä¸ªä¾‹å¤–ï¼‰ï¼Œå› æ­¤å¦‚æœä¸€ä¸ªæ–‡æœ¬æ–‡æ¡£é‡Œé¢çš„å†…å®¹å…¨éƒ½ç”±ASCIIé‡Œé¢çš„å­—æ¯æˆ–ç¬¦å·æ„æˆï¼Œé‚£ä¹ˆä¸ç®¡ä½ å¦‚ä½•å±•ç¤ºè¯¥æ–‡æ¡£çš„å†…å®¹ï¼Œéƒ½ä¸å¯èƒ½å‡ºç°ä¹±ç çš„æƒ…å†µã€‚ 

* **GB2312 å­—ç¬¦é›†**ï¼š

  æœ€æ—©ä¸€ç‰ˆçš„ä¸­æ–‡ç¼–ç ï¼Œ**æ¯ä¸ªå­—å æ®2bytes**ã€‚ç”±äºè¦å’ŒASCIIå…¼å®¹ï¼Œé‚£è¿™2bytesæœ€é«˜ä½ä¸å¯ä»¥ä¸º0äº†ï¼ˆå¦åˆ™å’ŒASCIIä¼šæœ‰å†²çªï¼‰ã€‚åœ¨GB2312ä¸­æ”¶å½•äº†6763ä¸ªæ±‰å­—ä»¥åŠ682ä¸ªç‰¹æ®Šç¬¦å·ï¼Œå·²ç»å›Šæ‹¬äº†ç”Ÿæ´»ä¸­æœ€å¸¸ç”¨çš„æ‰€æœ‰æ±‰å­—ã€‚ 

* **GBK å­—ç¬¦é›†**ï¼š

  ç”±äºGB2312åªæœ‰6763ä¸ªæ±‰å­—ï¼Œæˆ‘æ±‰è¯­åšå¤§ç²¾æ·±ï¼Œåªæœ‰6763ä¸ªå­—æ€ä¹ˆå¤Ÿï¼Ÿäºæ˜¯GBKä¸­åœ¨ä¿è¯ä¸å’ŒGB2312ã€ASCIIå†²çªï¼ˆå³å…¼å®¹GB2312å’ŒASCIIï¼‰çš„å‰æä¸‹ï¼Œä¹Ÿç”¨æ¯ä¸ªå­—å æ®2bytesçš„æ–¹å¼åˆç¼–ç äº†è®¸å¤šæ±‰å­—ã€‚ç»è¿‡GBKç¼–ç åï¼Œå¯ä»¥è¡¨ç¤ºçš„æ±‰å­—è¾¾åˆ°äº†20902ä¸ªï¼Œå¦æœ‰984ä¸ªæ±‰è¯­æ ‡ç‚¹ç¬¦å·ã€éƒ¨é¦–ç­‰ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯è¿™20902ä¸ªæ±‰å­—è¿˜åŒ…å«äº†ç¹ä½“å­—ï¼Œä½†æ˜¯è¯¥ç¹ä½“å­—ä¸å°æ¹¾Big5ç¼–ç ä¸å…¼å®¹ï¼Œå› ä¸ºåŒä¸€ä¸ªç¹ä½“å­—å¾ˆå¯èƒ½åœ¨GBKå’ŒBig5ä¸­æ•°å­—ç¼–ç æ˜¯ä¸ä¸€æ ·çš„ã€‚ 

* **Unicode å­—ç¬¦é›†**ï¼š

  **Unicode**ï¼ˆä¸­æ–‡ï¼š**ä¸‡å›½ç **ã€**å›½é™…ç **ã€**ç»Ÿä¸€ç **ã€**å•ä¸€ç **ï¼‰æ˜¯è®¡ç®—æœºç§‘å­¦é¢†åŸŸé‡Œçš„ä¸€é¡¹ä¸šç•Œæ ‡å‡†

  ASCIIç¼–ç æ˜¯1ä¸ªå­—èŠ‚ï¼Œè€ŒUnicodeç¼–ç é€šå¸¸æ˜¯2ä¸ªå­—èŠ‚ 

  å®ƒå¯¹ä¸–ç•Œä¸Šå¤§éƒ¨åˆ†çš„æ–‡å­—ç³»ç»Ÿè¿›è¡Œäº†æ•´ç†ã€ç¼–ç ï¼Œä½¿å¾—ç”µè„‘å¯ä»¥ç”¨æ›´ä¸ºç®€å•çš„æ–¹å¼æ¥å‘ˆç°å’Œå¤„ç†æ–‡å­—

### å­—ç¬¦ç¼–ç 

ç¼–ç è§„åˆ™ï¼šå°†ã€Œç ä½ã€è½¬æ¢ä¸ºå­—èŠ‚åºåˆ—çš„è§„åˆ™ï¼ˆç¼–ç /è§£ç  å¯ä»¥ç†è§£ä¸º åŠ å¯†/è§£å¯† çš„è¿‡ç¨‹ï¼‰

å¸¸è§ç¼–ç æ–¹å¼ï¼š

* **ASCII ç¼–ç **ï¼š

  å°†ASCIIå­—ç¬¦é›†è½¬æ¢ä¸ºè®¡ç®—æœºå¯ä»¥æ¥å—çš„æ•°å­—ç³»ç»Ÿçš„æ•°çš„è§„åˆ™ã€‚ä½¿ç”¨7ä½ï¼ˆbitsï¼‰è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œå…±128å­—ç¬¦ï¼›ä½†æ˜¯7ä½ç¼–ç çš„å­—ç¬¦é›†åªèƒ½æ”¯æŒ128ä¸ªå­—ç¬¦ï¼Œä¸ºäº†è¡¨ç¤ºæ›´å¤šçš„æ¬§æ´²å¸¸ç”¨å­—ç¬¦å¯¹ASCIIè¿›è¡Œäº†æ‰©å±•ï¼ŒASCIIæ‰©å±•å­—ç¬¦é›†ä½¿ç”¨8ä½ï¼ˆbitsï¼‰è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œå…±256å­—ç¬¦ã€‚ 

* **UTF-8 ç¼–ç **ï¼š

  **UTF-8**ï¼ˆ**8-bit Unicode Transformation Format**ï¼‰æ˜¯ä¸€ç§é’ˆå¯¹Unicodeçš„å¯å˜é•¿åº¦å­—ç¬¦ç¼–ç ï¼Œä¹Ÿæ˜¯ä¸€ç§å‰ç¼€ç ã€‚å…¶ç¼–ç ä¸­çš„ç¬¬ä¸€ä¸ªå­—èŠ‚ä»ä¸ASCIIå…¼å®¹ï¼Œè¿™ä½¿å¾—åŸæ¥å¤„ç†ASCIIå­—ç¬¦çš„è½¯ä»¶æ— é¡»æˆ–åªé¡»åšå°‘éƒ¨åˆ†ä¿®æ”¹ï¼Œå³å¯ç»§ç»­ä½¿ç”¨ã€‚ 

## ç”Ÿæˆå™¨ã€è¿­ä»£å™¨å’Œå¯è¿­ä»£å¯¹è±¡

> è¿­ä»£å™¨å’Œå¯è¿­ä»£å¯¹è±¡

1. å¯è¿­ä»£å¯¹è±¡åŒ…å«è¿­ä»£å™¨
2. å¦‚æœä¸€ä¸ªå¯¹è±¡æ‹¥æœ‰__iter__æ–¹æ³•ï¼Œå…¶æ˜¯å¯è¿­ä»£å¯¹è±¡ï¼›å¦‚æœä¸€ä¸ªå¯¹è±¡æ‹¥æœ‰nextæ–¹æ³•ï¼Œå…¶æ˜¯è¿­ä»£å™¨
3. å®šä¹‰å¯è¿­ä»£å¯¹è±¡ï¼Œå¿…é¡»å®ç°__iter__æ–¹æ³•ï¼›å®šä¹‰è¿­ä»£å™¨ï¼Œå¿…é¡»å®ç°__iter__å’Œnextæ–¹æ³•

> ç”Ÿæˆå™¨æ˜¯ä¸€ç§ç‰¹æ®Šçš„è¿­ä»£å™¨

1. åœ¨ä½¿ç”¨ç”Ÿæˆå™¨æ—¶ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼›åœ¨ä½¿ç”¨è¿­ä»£å™¨æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨å†…ç½®å‡½æ•°iter()å’Œnext()
2. åœ¨ç”Ÿæˆå™¨ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨å…³é”®å­—â€˜yieldâ€™æ¥æ¯æ¬¡ç”Ÿæˆ/è¿”å›ä¸€ä¸ªå¯¹è±¡
3. ç”Ÿæˆå™¨ä¸­æœ‰å¤šå°‘â€˜yieldâ€™è¯­å¥ï¼Œä½ å¯ä»¥è‡ªå®šä¹‰
4. æ¯æ¬¡â€˜yieldâ€™æš‚åœå¾ªç¯æ—¶ï¼Œç”Ÿæˆå™¨ä¼šä¿å­˜æœ¬åœ°å˜é‡çš„çŠ¶æ€
5. è¿­ä»£å™¨å¹¶ä¸ä¼šä½¿ç”¨å±€éƒ¨å˜é‡ï¼Œå®ƒåªéœ€è¦ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡è¿›è¡Œè¿­ä»£
6. ä½¿ç”¨ç±»å¯ä»¥å®ç°ä½ è‡ªå·±çš„è¿­ä»£å™¨ï¼Œä½†æ— æ³•å®ç°ç”Ÿæˆå™¨
7. ç”Ÿæˆå™¨è¿è¡Œé€Ÿåº¦å¿«ï¼Œè¯­æ³•ç®€æ´ï¼Œæ›´ç®€å•
8. è¿­ä»£å™¨æ›´èƒ½èŠ‚çº¦å†…å­˜

> å¯è¿­ä»£å¯¹è±¡ï¼Œè¿­ä»£å™¨å’Œç”Ÿæˆå™¨ä¹‹é—´çš„å…³ç³»å¦‚ä¸‹

![img](https://pic.hycbook.com/i/hexo/bk_resources/python/14.pythonåŸºç¡€çŸ¥è¯†/20170516000644044.webp)
## Pipenvï¼šé¡¹ç›®ç¯å¢ƒä¸ä¾èµ–ç®¡ç†å·¥å…·

> [Pipenvï¼šæ–°ä¸€ä»£Pythoné¡¹ç›®ç¯å¢ƒä¸ä¾èµ–ç®¡ç†å·¥å…·](https://zhuanlan.zhihu.com/p/37581807)
>
> [pipenvä½¿ç”¨æŒ‡å—](https://crazygit.wiseturtles.com/2018/01/08/pipenv-tour)

ä½¿ç”¨ pipdeptree å·¥å…·æ¥ç®¡ç†ä¾èµ–æ ‘

```shell
$ pip install pipdeptree
...
$ pipdeptree
certifi==2020.6.20
Flask==1.1.2
  - click [required: >=5.1, installed: 7.1.2]
  - itsdangerous [required: >=0.24, installed: 1.1.0]
  - Jinja2 [required: >=2.10.1, installed: 2.11.3]
    - MarkupSafe [required: >=0.23, installed: 1.1.1]
  - Werkzeug [required: >=0.15, installed: 1.0.1]
pipdeptree==2.0.0
  - pip [required: >=6.0.0, installed: 19.3.1]
setuptools==44.0.0.post20200106
wheel==0.36.2
```

pip-autoremoveå¯ä»¥åˆ é™¤ä¾èµ–åŒ…

```sh
$ pip install flask
$ pip install pip-autoremove
$ pip-autoremove flask -y
$ pipdeptree
certifi==2020.6.20
pip-autoremove==0.9.1
pipdeptree==2.0.0
  - pip [required: >=6.0.0, installed: 19.3.1]
setuptools==44.0.0.post20200106
wheel==0.36.2
```

## æŸ¥çœ‹åº“ä¸­å¸¸ç”¨æ¨¡å—

```python
import math
dir(math)
['__doc__', '__loader__', '__name__', '__package__', '__spec__', 
 'acos', 'acosh', 'asin', 'asinh', 'atan', 'atan2', ...]
```

## linuxåå°æ‰§è¡Œpyè„šæœ¬

> ç¨‹åºåå°è¿è¡Œ

```cmd
nohup python test.py > tt.log>&1 &
```

> nohup.outä¸­æ˜¾ç¤ºä¸å‡ºæ¥pythonç¨‹åºä¸­printçš„ä¸œè¥¿ï¼Œè¿™æ˜¯å› ä¸ºpythonçš„è¾“å‡ºæœ‰`ç¼“å†²`ï¼Œå¯¼è‡´nohup.outå¹¶ä¸èƒ½å¤Ÿé©¬ä¸Šçœ‹åˆ°è¾“å‡º
> python æœ‰ä¸ª-uå‚æ•°ï¼Œä½¿å¾—pythonä¸å¯ç”¨ç¼“å†²

```cmd
nohup python -u test.py>tt.log>&1 &
```

> è¿˜æœ‰ä¸€ç§æ–¹å¼(æœªå°è¯•è¿‡)

```cmd
import sys
sys.stdout = Unbuffered(sys.stdout)
```

## ä»£ç è°ƒè¯•æŠ€å·§

> [Python ä»£ç è°ƒè¯•æŠ€å·§](https://www.ibm.com/developerworks/cn/linux/l-cn-pythondebugger/index.html)

* Python 3.7ï¼Œåˆ™æ— éœ€å¯¼å…¥ä»»ä½•å†…å®¹ï¼Œåªéœ€åœ¨ä»£ç ä¸­è¦æ”¾å…¥è°ƒè¯•å™¨çš„ä½ç½®è°ƒç”¨breakpoint()

  ```python
  Some complicated code with bugs
  breakpoint()
  ```

* Python 3.6åŠæ›´æ—©ç‰ˆæœ¬ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡æ˜¾å¼å¯¼å…¥pdbæ¥æ‰§è¡Œç›¸åŒçš„æ“ä½œï¼Œåƒbreakpoint()ä¸€æ ·ï¼Œpdb.set_trace()ä¼šå°†ä½ å¸¦å…¥pdbè°ƒè¯•å™¨

  ```python
  import pdb; 
  pdb.set_trace()
  ```

# åº“å’Œå¸¸ç”¨æ–¹æ³•

## å˜é‡å­˜å‚¨å·¥å…·æ–¹æ³•

> ä»€ä¹ˆæ˜¯é…¸æ´—å’Œå»é™¤ï¼Ÿ

Pickleæ¨¡å—æ¥å—ä»»ä½•Pythonå¯¹è±¡å¹¶å°†å…¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ï¼Œå¹¶ä½¿ç”¨dumpå‡½æ•°å°†å…¶è½¬å‚¨åˆ°æ–‡ä»¶ä¸­ï¼Œæ­¤è¿‡ç¨‹ç§°ä¸º**pickling**
ä»å­˜å‚¨çš„å­—ç¬¦ä¸²è¡¨ç¤ºä¸­æ£€ç´¢åŸå§‹Pythonå¯¹è±¡çš„è¿‡ç¨‹ç§°ä¸º**unpickling**

```python
import dill
import pickle as pk
def dump_obj(obj, file_name):
    with open(file_name, 'wb') as f:
        dill.dump(obj, f)

def load_obj(file_name):
    with open(file_name, "rb") as f:
        try:
            return dill.load(f)
        except Exception:
            return pk.load(f)
```

## åºåˆ—æ’åº

Pythonä¸­æ‹¥æœ‰å†…ç½®å‡½æ•°å®ç°æ’åºï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨å®ƒä»¬å®ç°æ’åºåŠŸèƒ½

* **list.sort()**: ç›´æ¥ä¿®æ”¹åˆ—è¡¨
* **sorted()**: ä»ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡æ„å»ºä¸€ä¸ªæ–°çš„æ’åºåˆ—è¡¨

ä¸ç®¡æ˜¯ `list.sort` æ–¹æ³•è¿˜æ˜¯ `sorted` å‡½æ•°ï¼Œéƒ½æœ‰ä¸¤ä¸ªå¯é€‰çš„å…³é”®å­—å‚æ•°

> list.sort(cmp=None, key=None, reverse=False)

* **cmp** -- å¯é€‰å‚æ•°, å¦‚æœæŒ‡å®šäº†è¯¥å‚æ•°ä¼šä½¿ç”¨è¯¥å‚æ•°çš„æ–¹æ³•è¿›è¡Œæ’åº

* **key** -- ä¸»è¦æ˜¯ç”¨æ¥è¿›è¡Œæ¯”è¾ƒçš„å…ƒç´ ï¼Œåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå‡½æ•°çš„å‚æ•°å°±æ˜¯å–è‡ªäºå¯è¿­ä»£å¯¹è±¡ä¸­ï¼ŒæŒ‡å®šå¯è¿­ä»£å¯¹è±¡ä¸­çš„ä¸€ä¸ªå…ƒç´ æ¥è¿›è¡Œæ’åº

* **reverse** -- æ’åºè§„åˆ™ï¼Œreverse = True é™åºï¼Œ reverse = False å‡åº(é»˜è®¤)

> sorted(iterable, cmp=None, key=None, reverse=False)

* **erable** -- å¯è¿­ä»£å¯¹è±¡
* **cmp** -- æ¯”è¾ƒçš„å‡½æ•°ï¼Œè¿™ä¸ªå…·æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œå‚æ•°çš„å€¼éƒ½æ˜¯ä»å¯è¿­ä»£å¯¹è±¡ä¸­å–å‡º
  æ­¤å‡½æ•°å¿…é¡»éµå®ˆçš„è§„åˆ™ä¸ºï¼Œå¤§äºåˆ™è¿”å›1ï¼Œå°äºåˆ™è¿”å›-1ï¼Œç­‰äºåˆ™è¿”å›0ã€‚
* **key** -- ä¸»è¦æ˜¯ç”¨æ¥è¿›è¡Œæ¯”è¾ƒçš„å…ƒç´ ï¼Œåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå‡½æ•°çš„å‚æ•°å°±æ˜¯å–è‡ªäºå¯è¿­ä»£å¯¹è±¡ä¸­ï¼ŒæŒ‡å®šå¯è¿­ä»£å¯¹è±¡ä¸­çš„ä¸€ä¸ªå…ƒç´ æ¥è¿›è¡Œæ’åº
* **reverse** -- æ’åºè§„åˆ™ï¼Œreverse = True é™åº ï¼Œreverse = False å‡åº(é»˜è®¤)

> sort ()ä¸sorted()åŒºåˆ«

sort() æ˜¯åº”ç”¨åœ¨ list ä¸Šçš„æ–¹æ³•ï¼Œsorted() å¯ä»¥å¯¹æ‰€æœ‰å¯è¿­ä»£çš„å¯¹è±¡è¿›è¡Œæ’åºæ“ä½œ
list çš„ sort() æ–¹æ³•è¿”å›çš„æ˜¯å¯¹å·²ç»å­˜åœ¨çš„åˆ—è¡¨è¿›è¡Œæ“ä½œï¼Œæ— è¿”å›å€¼
è€Œå†…å»ºå‡½æ•° sorted() æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„ listï¼Œè€Œä¸æ˜¯åœ¨åŸæ¥çš„åŸºç¡€ä¸Šè¿›è¡Œçš„æ“ä½œ

* å•å…³é”®å­—æ’åº

  ```python
  # é»˜è®¤æƒ…å†µä¸‹ï¼Œsorted()å·²æŒ‰å‡åºå¯¹è¾“å…¥è¿›è¡Œæ’åºï¼Œè€Œreverseå…³é”®å­—å‚æ•°åˆ™æŒ‰é™åºæ’åºã€‚
  >>> sorted(['cat', 'dog', 'cheetah', 'rhino', 'bear'], reverse=True)
  ['rhino', 'dog', 'cheetah', 'cat', 'bear]
  
  >>> animals = [
  ...     {'type': 'penguin', 'name': 'Stephanie', 'age': 8},
  ...     {'type': 'elephant', 'name': 'Devon', 'age': 3},
  ...     {'type': 'puma', 'name': 'Moe', 'age': 5},
  ... ]
  >>> sorted(animals, key=lambda animal: animal['age'])
  [
      {'type': 'elephant', 'name': 'Devon', 'age': 3},
      {'type': 'puma', 'name': 'Moe', 'age': 5},
      {'type': 'penguin', 'name': 'Stephanie, 'age': 8},
  ]
  # é€šè¿‡ä¼ å…¥ä¸€ä¸ªè¿”å›æ¯ä¸ªå…ƒç´ å¹´é¾„çš„lambdaå‡½æ•°ï¼Œå¯ä»¥è½»æ¾åœ°æŒ‰æ¯ä¸ªå­—å…¸çš„å•ä¸ªå€¼å¯¹å­—å…¸åˆ—è¡¨è¿›è¡Œæ’åºã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå­—å…¸ç°åœ¨æŒ‰å¹´é¾„æŒ‰å‡åºæ’åºã€‚
  ```

* å¤šå…³é”®å­—æ’åº

  ```python
  # itemgetter() å‡½æ•°ä¹Ÿæ”¯æŒå¤šä¸ª keys
  rows_by_lfname = sorted(rows, key=itemgetter('lname','fname'))
  # itemgetter() æœ‰æ—¶å€™ä¹Ÿå¯ä»¥ç”¨ lambda è¡¨è¾¾å¼ä»£æ›¿
  rows_by_lfname = sorted(rows, key=lambda r: (r['lname'],r['fname']))
  ```

* ä½¿ç”¨ itemgetter() æ–¹å¼ä¼šè¿è¡Œçš„ç¨å¾®å¿«ç‚¹ï¼Œå¦‚æœä½ å¯¹æ€§èƒ½è¦æ±‚æ¯”è¾ƒé«˜çš„è¯å°±ä½¿ç”¨ itemgetter() æ–¹å¼

## importè·¯å¾„é—®é¢˜

```python
import sys
sys.path.append("..")
```

## åˆ¤æ–­æ˜¯å¦æœ‰ä¸­æ–‡

```python
def is_chinese(uchar):
    if u'\u4e00' <= uchar <= u'\u9fff':
        return True
    return False
```

## åˆ†å‰²å­—ç¬¦ä¸²å¹¶è½¬æ¢ç±»å‹

```python
import numpy as np
line = '12,26,31,17,90,28,88,40,77'
npyArray = np.fromstring(line, dtype=int, sep=',')
print(npyArray)

array([12, 26, 31, 17, 90, 28, 88, 40, 77])
```

## æ£€æŸ¥å¯¹è±¡æ˜¯å¦å¯è°ƒç”¨

```python
def fuunction(param):
    print(param)
print(callable(fuunction))

True
```

## æ—¶é—´ç›¸å…³åº“

åè°ƒä¸–ç•Œæ—¶(Coordinated Universal Time, UTC)æ˜¯ä¸€ç§æ ‡å‡†çš„æ—¶é—´è¡¨è¿°æ–¹å¼ï¼Œå®ƒä¸æ—¶åŒºæ— å…³

æœ‰äº›è®¡ç®—æœºï¼Œç”¨æŸæ—¶åˆ»ä¸UNIXæ—¶é—´åŸç‚¹ä¹‹é—´ç›¸å·®çš„ç§’æ•°ï¼Œæ¥è¡¨ç¤ºé‚£ä¸ªæ—¶åˆ»æ‰€å¯¹åº”çš„æ—¶é—´
å¯¹äºè¿™äº›è®¡ç®—æœºæ¥è¯´ï¼ŒUTCæ˜¯ä¸€ç§éå¸¸å¥½çš„è®¡æ—¶æ–¹å¼

> Pythonæä¾›äº†ä¸¤ç§æ—¶é—´è½¬æ¢æ–¹å¼

* æ—§çš„æ–¹å¼ï¼Œæ˜¯ä½¿ç”¨å†…ç½®çš„timeæ¨¡å—ï¼Œè¿™æ˜¯ä¸€ç§ææ˜“å‡ºé”™çš„æ–¹å¼

* æ–°çš„æ–¹å¼ï¼Œåˆ™æ˜¯é‡‡ç”¨å†…ç½®çš„datetimeæ¨¡å—ï¼Œè¯¥æ¨¡å—çš„æ•ˆæœéå¸¸å¥½

> **å°ç»“**ï¼š

* timeæ¨¡å—éœ€è¦ä¾èµ–æ“ä½œç³»ç»Ÿè€Œè¿ä½œã€‚è¯¥æ¨¡å—çš„å®é™…è¡Œä¸ºï¼Œå–å†³äºåº•å±‚çš„Cå‡½æ•°å¦‚ä½•ä¸å®¿ä¸»æ“ä½œç³»ç»Ÿç›¸äº¤äº’

* è¿™ç§å·¥ä½œæ–¹å¼ï¼Œä½¿å¾—timeæ¨¡å—çš„åŠŸèƒ½ä¸å¤Ÿç¨³å®šã€‚å®ƒæ— æ³•åè°ƒåœ°å¤„ç†å„ç§æœ¬åœ°æ—¶åŒºï¼Œå› æ­¤ï¼Œæˆ‘ä»¬åº”è¯¥å°½é‡å°‘ç”¨è¿™ä¸ªæ¨¡å—

å¦‚æœä¸€å®šè¦ä½¿ç”¨timeæ¨¡å—ï¼Œé‚£å°±åªåº”è¯¥ç”¨å®ƒåœ¨UTCä¸å®¿ä¸»è®¡ç®—æœºçš„å½“åœ°æ—¶åŒºä¹‹é—´è¿›è¡Œè½¬æ¢

å¯¹äºå…¶ä»–ç±»å‹çš„è½¬æ¢æ¥è¯´ï¼Œè¿˜æ˜¯ä½¿ç”¨datetimeæ¨¡å—æ¯”è¾ƒå¥½ã€‚

### timeåº“çš„ä½¿ç”¨

> [ `time`â€” Time access and conversions](https://docs.python.org/3.5/library/time.html#module-time)

> timeåº“æ˜¯Pythonä¸­å¤„ç†æ—¶é—´çš„æ ‡å‡†åº“

* è®¡ç®—æœºæ—¶é—´çš„è¡¨è¾¾

* æä¾›è·å–ç³»ç»Ÿæ—¶é—´å¹¶æ ¼å¼åŒ–è¾“å‡ºåŠŸèƒ½

* æä¾›ç³»ç»Ÿçº§ç²¾ç¡®è®¡æ—¶åŠŸèƒ½ï¼Œç”¨äºç¨‹åºæ€§èƒ½åˆ†æ

> ä¸»è¦æ“ä½œ

* æ—¶é—´è·å–ï¼štime() ctime() gmtime()

* æ—¶é—´æ ¼å¼åŒ–ï¼šstrftime() strptime()

* ç¨‹åºè®¡æ—¶ï¼šsleep(), perf_counter()

> æ—¶é—´è·å–

```python
# è·å–å½“å‰æ—¶é—´æˆ³ï¼Œå³è®¡ç®—æœºå†…éƒ¨æ—¶é—´å€¼ï¼Œæµ®ç‚¹æ•°
# 
>>>time.time()
1568506809.169575

# è·å–å½“å‰æ—¶é—´å¹¶ä»¥æ˜“è¯»æ–¹å¼è¡¨ç¤ºï¼Œè¿”å›å­—ç¬¦ä¸²
# ç­‰ä»·äº time.asctime(time.localtime(time.time())), å°† gmtime()æˆ–localtime() è¿”å›çš„ è¡¨ç¤ºæ—¶é—´çš„ å…ƒç»„æˆ–struct_time è½¬æ¢æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ ¼å¼ï¼š'Sun Jun 20 23:21:051993'ã€‚
>>>time.ctime()
'Sun Sep 15 08:20:16 2019'

# è·å–å½“å‰æ—¶é—´ï¼Œè¡¨ç¤ºä¸ºè®¡ç®—æœºå¯å¤„ç†çš„æ—¶é—´æ ¼å¼
# ç­‰ä»·äº time.localtime()
# ä¸¤è€…è¿”å›çš„æ—¶é—´æ˜¯ä¸¤ä¸ªæ—¶åŒºå¯¹ç›¸åŒæ—¶åˆ»çš„æ—¶é—´è¡¨ç¤ºã€‚
# å…¶ä¸­ï¼Œgmtime()è¡¨ç¤ºçš„æ˜¯0æ—¶åŒºçš„æ ‡å‡†æ—¶é—´ï¼Œè€Œlocaltime()è¡¨ç¤ºçš„æ˜¯æœ¬åœ°æ—¶åŒºçš„æ—¶é—´ã€‚
>>>time.gmtime()
time.struct_time(tm_year=2019, tm_mon=9, tm_mday=15, tm_hour=0, tm_min=21, tm_sec=40, tm_wday=6, tm_yday=258, tm_isdst=0)

# time.mktime(t)æ˜¯localtime()çš„åå‡½æ•°
>>>time.mktime(time.localtime())
1568508316.0
```

**struct_timeå…ƒç»„çš„å±æ€§å¦‚ä¸‹ï¼š**

| åºå· | å±æ€§     | å€¼                                   |
| ---- | -------- | ------------------------------------ |
| 0    | tm_year  | 2008                                 |
| 1    | tm_mon   | 1 åˆ° 12                              |
| 2    | tm_mday  | 1 åˆ° 31                              |
| 3    | tm_hour  | 0 åˆ° 23                              |
| 4    | tm_min   | 0 åˆ° 59                              |
| 5    | tm_sec   | 0 åˆ° 61 (60æˆ–61 æ˜¯é—°ç§’)              |
| 6    | tm_wday  | 0åˆ°6 (0æ˜¯å‘¨ä¸€)                       |
| 7    | tm_yday  | 1 åˆ° 366(å„’ç•¥å†)                     |
| 8    | tm_isdst | -1, 0, 1, -1æ˜¯å†³å®šæ˜¯å¦ä¸ºå¤ä»¤æ—¶çš„æ——å¸œ |

> æ—¶é—´æ ¼å¼åŒ–

```python
# strftime(tpl, ts)
# tplæ˜¯æ ¼å¼åŒ–æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œç”¨æ¥å®šä¹‰è¾“å‡ºæ•ˆæœ
# tsæ˜¯è®¡ç®—æœºå†…éƒ¨æ—¶é—´ç±»å‹å˜é‡
>>>t = time.gmtime()
>>>time.strftime("%Y-%m-%d %H:%M:%S",t)
'2019-09-15 00:24:23'

# strptime(str, tpl)
# stræ˜¯å­—ç¬¦ä¸²å½¢å¼çš„æ—¶é—´å€¼
# tplæ˜¯æ ¼å¼åŒ–æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œç”¨æ¥å®šä¹‰è¾“å…¥æ•ˆæœ
>>>timeStr = '2018-01-26 12:55:20'
>>>time.strptime(timeStr, "%Y-%m-%d %H:%M:%S")
time.struct_time(tm_year=2019, tm_mon=9, tm_mday=15, tm_hour=0, tm_min=25, tm_sec=50, tm_wday=6, tm_yday=258, tm_isdst=-1)
```

| æ ¼å¼åŒ–å­—ç¬¦ä¸² | æ—¥æœŸ/æ—¶é—´è¯´æ˜ | å€¼èŒƒå›´å’Œå®ä¾‹                   |
| ------------ | ------------- | ------------------------------ |
| %Y           | å¹´ä»½          | 0000~9999ï¼Œä¾‹å¦‚ï¼š1900          |
| %m           | æœˆä»½          | 01~12ï¼Œä¾‹å¦‚ï¼š10                |
| %B           | æœˆä»½åç§°      | January~Decemberï¼Œä¾‹å¦‚ï¼šApril  |
| %b           | æœˆä»½åç§°ç¼©å†™  | Jan~Decï¼Œä¾‹å¦‚ï¼šApr             |
| %d           | æ—¥æœŸ          | 01~31ï¼Œä¾‹å¦‚ï¼š25                |
| %A           | æ˜ŸæœŸ          | Monday~Sundayï¼Œä¾‹å¦‚ï¼šWednesday |
| %a           | æ˜ŸæœŸç¼©å†™      | Mon~Sunï¼Œä¾‹å¦‚ï¼šWed             |
| %H           | å°æ—¶ï¼ˆ24håˆ¶ï¼‰ | 00~23ï¼Œä¾‹å¦‚ï¼š12                |
| %h           | å°æ—¶ï¼ˆ12håˆ¶ï¼‰ | 01~12ï¼Œä¾‹å¦‚ï¼š7                 |
| %p           | ä¸Š/ä¸‹åˆ       | AM, PMï¼Œä¾‹å¦‚ï¼šPM               |
| %M           | åˆ†é’Ÿ          | 00~59ï¼Œä¾‹å¦‚ï¼š26                |
| %S           | ç§’            | 00~59ï¼Œä¾‹å¦‚ï¼š26                |

å°†æ—¶é—´ä»¥åˆç†çš„æ–¹å¼å±•ç¤ºå‡ºæ¥

- æ ¼å¼åŒ–ï¼šç±»ä¼¼å­—ç¬¦ä¸²æ ¼å¼åŒ–ï¼Œéœ€è¦æœ‰å±•ç¤ºæ¨¡æ¿
- å±•ç¤ºæ¨¡æ¿ç”±ç‰¹å®šçš„æ ¼å¼åŒ–æ§åˆ¶ç¬¦ç»„æˆ
- strftime()æ–¹æ³•

> ç¨‹åºè®¡æ—¶: æµ‹é‡èµ·æ­¢åŠ¨ä½œæ‰€ç»å†æ—¶é—´çš„è¿‡ç¨‹

* æµ‹é‡æ—¶é—´ï¼šperf_counter()

* äº§ç”Ÿæ—¶é—´ï¼šsleep()

```python
# è¿”å›ä¸€ä¸ªCPUçº§åˆ«çš„ç²¾ç¡®æ—¶é—´è®¡æ•°å€¼ï¼Œå•ä½ä¸ºç§’
# ç”±äºè¿™ä¸ªè®¡æ•°å€¼èµ·ç‚¹ä¸ç¡®å®šï¼Œè¿ç»­è°ƒç”¨å·®å€¼æ‰æœ‰æ„ä¹‰
>>>start = time.perf_counter()
318.66599499718114
>>>end = time.perf_counter()
341.3905185375658
>>>end - start
22.724523540384666

# sæ‹Ÿä¼‘çœ çš„æ—¶é—´ï¼Œå•ä½æ˜¯ç§’ï¼Œå¯ä»¥æ˜¯æµ®ç‚¹æ•°
time.sleep(5)
```

### datetime æ¨¡å—

python å¤„ç†æ—¥æœŸå’Œæ—¶é—´çš„æ ‡å‡†åº“ï¼Œå¸¸ç”¨ datetime ç±»ï¼ŒåŠ date ç±» å’Œ time ç±»ï¼Œå¯åšè®¡ç®—ä¹‹ç±»çš„æ“ä½œ

timeæ¨¡å—æ¯”è¾ƒåº•å±‚ï¼Œèƒ½å®Œæˆçš„åŠŸèƒ½ç›¸å¯¹æœ‰é™ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦æ›´é«˜çº§çš„datetimeæ¨¡å—æ¥å‚ä¸äº†

å¯ä»¥ç®€å•ç†è§£ä¸ºï¼Œdatetimeæ¨¡å—æ˜¯å¯¹timeæ¨¡å—è¿›è¡Œäº†æ›´é«˜ä¸€å±‚çš„å°è£…

> åŸºæœ¬å®šä¹‰å’Œå±æ€§æ–¹æ³•

```python
import datetime
import sys
from typing import Tuple
from dateutil import relativedelta
from dateutil.parser import parse


def fn_basic() -> Tuple:
    """ åŸºæœ¬å®šä¹‰å’Œå±æ€§æ–¹æ³• """
    # è·å–å½“å‰æ—¥æœŸæ—¶é—´
    d_now = datetime.datetime.now()  # ç­‰ä»·äºdatetime.datetime.today()
    d_utc_now = datetime.datetime.utcnow()  # è·å–utcå¯¹è±¡, åŒ—äº¬æ—¶é—´+8h=d_utc_now
    # è‡³å°‘è¦ç»™å®šå¹´æœˆæ—¥
    d_free = datetime.datetime(year=2022, month=11, day=11)
    print("d_now ", d_now)
    print(f"d_nowçš„è¯¦ç»†ä¿¡æ¯: year:{d_now.year} month:{d_now.month} day:{d_now.day}")
    print(f"d_nowçš„è¯¦ç»†ä¿¡æ¯: hour:{d_now.hour} minute:{d_now.minute} second:{d_now.second} microsecond:{d_now.microsecond}")
    print("d_free", d_free)
    # å¸¸ç”¨å±æ€§
    d = d_free.date()  # è·å–æ—¥æœŸå¯¹è±¡
    t = d_free.time()  # è·å–æ—¶é—´å¯¹è±¡
    dt = datetime.datetime.combine(date=d, time=t)  # æ ¹æ®dateå’Œtime, åˆ›å»ºä¸€ä¸ªdatetimeå¯¹è±¡
    ts = d_free.timestamp()  # è·å–å¯¹è±¡çš„æ—¶é—´æˆ³
    print("ts    ", ts)
    print(sys._getframe().f_code.co_name, "=" * 60, '\n')
    return d_now, d_free

# è¾“å‡º
d_now  2022-11-15 16:59:45.447093
d_nowçš„è¯¦ç»†ä¿¡æ¯: year:2022 month:11 day:15
d_nowçš„è¯¦ç»†ä¿¡æ¯: hour:16 minute:59 second:45 microsecond:447093
d_free 2022-11-11 00:00:00
ts     1668096000.0
fn_basic ============================================================ 
```

> æ—¥æœŸæ—¶é—´å·®å¼‚

```python
def fn_dif(d_now, d_free):
    """ æ—¥æœŸæ—¶é—´å·®å¼‚ """
    # type(dif) == timedelta
    dif = d_now - d_free
    print("d_free+dif==d_now is", d_free + dif == d_now)

    # ä¸‹ä¸ªæœˆ å‰ä¸€å¤© å¾€å9å°æ—¶ å†å¾€å‰10åˆ†é’Ÿ
    d_dif = d_free + relativedelta.relativedelta(months=1, days=-1, hours=9, minutes=-10)
    print("d_dif ", d_dif)
    # æŒ‡å®šæ—¶é—´ï¼Œåªèƒ½æ˜¯æ•´æ•°
    d_dif_abs = d_free + relativedelta.relativedelta(month=1, day=5, hour=9, minute=10)
    print("d_dif_abs ", d_dif_abs)
    print(sys._getframe().f_code.co_name, "=" * 60, '\n')
   
# è¾“å‡º
d_free+dif==d_now is True
d_dif  2022-12-10 08:50:00
d_dif_abs  2022-01-05 09:10:00
fn_dif ============================================================ 
```

> æ—¥æœŸæ—¶é—´çš„æ ¼å¼åŒ–

```python
def fn_format_transform():
    """ æ—¥æœŸæ—¶é—´çš„æ ¼å¼åŒ– """
    date_format_str = "%Y-%m-%d %H:%M:%S"
    date_format_str_2 = "{:%Y-%m-%d %H:%M:%S}"
    # è·å–å½“å‰æ—¥æœŸæ—¶é—´
    d_now = datetime.datetime.now()

    # å¯¹è±¡è½¬å­—ç¬¦ä¸²
    date_string = d_now.strftime(date_format_str)
    print("date_string:", date_string)
    date_string_2 = date_format_str_2.format(d_now)
    print("date_string_2:", date_string_2)

    # å­—ç¬¦ä¸²è½¬å¯¹è±¡
    d_from_str = datetime.datetime.strptime(date_string, date_format_str)
    print("d_from_str:", d_from_str)
    # dateutil.parse å¯ä»¥è§£æå‡ ä¹æ‰€æœ‰äººç±»èƒ½å¤Ÿç†è§£çš„æ—¥æœŸè¡¨ç¤ºå½¢å¼
    d_parse = parse(date_string)
    print("parse:", d_parse)
    print("parse('Jan 31, 2021 10:45 PM'): ", parse('Jan 31, 2022 10:45 PM'))
    print("parse(str(d_now)): ", parse(str(d_now)))

    print(sys._getframe().f_code.co_name, "=" * 60, '\n')
   
# è¾“å‡º
date_string: 2022-11-15 16:59:45
date_string_2: 2022-11-15 16:59:45
d_from_str: 2022-11-15 16:59:45
parse: 2022-11-15 16:59:45
parse('Jan 31, 2021 10:45 PM'):  2022-01-31 22:45:00
parse(str(d_now)):  2022-11-15 16:59:45.447093
fn_format ============================================================ 
```

>äº§ç”ŸæŒ‡å®šèŒƒå›´å†…çš„æ—¥æœŸæ—¶é—´

```python
def gen_date_times():
    """ äº§ç”ŸæŒ‡å®šèŒƒå›´å†…çš„æ—¥æœŸæ—¶é—´ """
    def date_time(starttime, endtime, format: str = '%Y-%m-%d'):
        starttime = datetime.datetime.strptime(starttime.strftime(format), format)
        while starttime < endtime:
            select_time = starttime.strftime(format)
            print(select_time)
            starttime += datetime.timedelta(days=1)

    # è·å–å½“å¤©æ—¶é—´
    end_time = datetime.datetime.now()
    start_time = end_time + relativedelta.relativedelta(days=-10)
    date_time(starttime=start_time, endtime=end_time)

# è¾“å‡º
2022-11-05
2022-11-06
2022-11-07
2022-11-08
2022-11-09
2022-11-10
2022-11-11
2022-11-12
2022-11-13
2022-11-14
2022-11-15
```



### calendaråº“çš„ä½¿ç”¨

> æä¾›ä¸æ—¥å†ç›¸å…³åŠŸèƒ½ï¼Œå¦‚ï¼šä¸ºç»™å®šçš„æœˆä»½æˆ–å¹´ä»½ï¼Œæ‰“å°æ–‡æœ¬æ—¥å†

```python
import calendar
c = calendar.month(2019, 9)
print(c)

   September 2019
Mo Tu We Th Fr Sa Su
                   1
 2  3  4  5  6  7  8
 9 10 11 12 13 14 15
16 17 18 19 20 21 22
23 24 25 26 27 28 29
30

```

## randomåº“çš„ä½¿ç”¨

> randomåº“æ˜¯ä½¿ç”¨éšæœºæ•°çš„Pythonæ ‡å‡†åº“

* ä¼ªéšæœºæ•°: é‡‡ç”¨æ¢…æ£®æ—‹è½¬ç®—æ³•ç”Ÿæˆçš„(ä¼ª)éšæœºåºåˆ—ä¸­å…ƒç´ 

![img](https://pic.hycbook.com/i/hexo/bk_resources/python/14.pythonåŸºç¡€çŸ¥è¯†/1568510165657.webp)
* randomåº“ä¸»è¦ç”¨äºç”Ÿæˆéšæœºæ•°

* ä½¿ç”¨randomåº“: import random

> ä¸»è¦æ–¹æ³•

* åŸºæœ¬éšæœºæ•°å‡½æ•°ï¼š seed(), random()

* æ‰©å±•éšæœºæ•°å‡½æ•°ï¼š randint(), getrandbits(), uniform(), randrange(), choice(), shuffle()

> åŸºæœ¬éšæœºæ•°å‡½æ•°

```python
# åˆå§‹åŒ–ç»™å®šçš„éšæœºæ•°ç§å­ï¼Œé»˜è®¤ä¸ºå½“å‰ç³»ç»Ÿæ—¶é—´
>>>random.seed(10) #äº§ç”Ÿç§å­10å¯¹åº”çš„åºåˆ—
# ç”Ÿæˆä¸€ä¸ª[0.0, 1.0)ä¹‹é—´çš„éšæœºå°æ•°
>>>random.random()
0.5714025946899135

# è¿”å›æ•è·å½“å‰ç”Ÿæˆå™¨å†…éƒ¨çŠ¶æ€çš„å¯¹è±¡.è¯¥å¯¹è±¡å¯ä»¥ç”¨äºå‡½æ•°setstate()å–ä¿å­˜å½“å‰çš„çŠ¶æ€.
>>> state = random.getstate()
>>> random.setstate(state)

# ä»¥ç›¸åŒé¡ºåºæ‰“ä¹±å¤šä¸ªæ•°ç»„
# ç­‰ä»·äº  np.random.get_state()    np.random.shuffle(a)   np.random.set_state(state)
a = np.arange(10)
b=['A','B','C','D','E','F','G','H','I','J']
state=random.getstate()
random.shuffle(a)
print(a)
random.setstate(state)
random.shuffle(b)
print(b)

[9 4 5 0 1 2 6 8 7 3]
['J', 'E', 'F', 'A', 'B', 'C', 'G', 'I', 'H', 'D']

```

> æ‰©å±•éšæœºæ•°å‡½æ•°

```python
# ç”Ÿæˆä¸€ä¸ª[a, b]ä¹‹é—´çš„æ•´æ•°
>>>random.randint(10, 100)
64

# ç”Ÿæˆä¸€ä¸ª[m, n)ä¹‹é—´ä»¥kä¸ºæ­¥é•¿çš„éšæœºæ•´æ•°
>>>random.randrange(10, 100, 10)
80
     
# ç”Ÿæˆä¸€ä¸ªkæ¯”ç‰¹é•¿çš„éšæœºæ•´æ•°
>>>random.getrandbits(16)
37885

# ç”Ÿæˆä¸€ä¸ª[a, b]ä¹‹é—´çš„éšæœºå°æ•°
>>>random.uniform(10, 100)
13.096321648808136

# ä»åºåˆ—seqä¸­éšæœºé€‰æ‹©ä¸€ä¸ªå…ƒç´ 
>>>random.choice([1,2,3,4,5,6,7,8,9])
8

# å°†åºåˆ—seqä¸­å…ƒç´ éšæœºæ’åˆ—ï¼Œè¿”å›æ‰“ä¹±åçš„åºåˆ—
>>> s=[1,2,3,4,5,6,7,8,9];
>>> random.shuffle(s);
>>> print(s)
[3, 5, 8, 9, 6, 1, 2, 7, 4]
```

|         å‡½æ•°         |                   æè¿°                    |
| :------------------: | :---------------------------------------: |
|    randint(a, b)     |         ç”Ÿæˆä¸€ä¸ª[a, b]ä¹‹é—´çš„æ•´æ•°          |
| randrange(m, n[, k]) |   ç”Ÿæˆä¸€ä¸ª[m, n)ä¹‹é—´ä»¥kä¸ºæ­¥é•¿çš„éšæœºæ•´æ•°   |
|    getrandbits(k)    |         ç”Ÿæˆä¸€ä¸ªkæ¯”ç‰¹é•¿çš„éšæœºæ•´æ•°         |
|    uniform(a, b)     |       ç”Ÿæˆä¸€ä¸ª[a, b]ä¹‹é—´çš„éšæœºå°æ•°        |
|     choice(seq)      |        ä»åºåˆ—seqä¸­éšæœºé€‰æ‹©ä¸€ä¸ªå…ƒç´         |
|     shuffle(seq)     | å°†åºåˆ—seqä¸­å…ƒç´ éšæœºæ’åˆ—ï¼Œè¿”å›æ‰“ä¹±åçš„åºåˆ— |

## å‘½ä»¤è¡Œè„šæœ¬ä¼ å‚

> [å‘½ä»¤è¡Œè¿è¡ŒPythonè„šæœ¬æ—¶ä¼ å…¥å‚æ•°çš„ä¸‰ç§æ–¹å¼](https://blog.csdn.net/u012426298/article/details/80263507)

å¦‚æœåœ¨è¿è¡Œpythonè„šæœ¬æ—¶éœ€è¦ä¼ å…¥ä¸€äº›å‚æ•°ï¼Œä¾‹å¦‚`gpus`ä¸`batch_size`ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä¸‰ç§æ–¹å¼ã€‚

```cmd
python script.py 0,1,2 10
python script.py --gpus=0,1,2 --batch-size=10
python script.py --gpus=0,1,2 --batch_size=10
```

è¿™ä¸‰ç§æ ¼å¼å¯¹åº”ä¸åŒçš„å‚æ•°è§£ææ–¹å¼ï¼Œåˆ†åˆ«ä¸º`sys.argv`, `argparse`, `tf.app.run`

å‰ä¸¤è€…æ˜¯pythonè‡ªå¸¦çš„åŠŸèƒ½ï¼Œåè€…æ˜¯`tensorflow`æä¾›çš„ä¾¿æ·æ–¹å¼ã€‚

### sys.argv

`sys`æ¨¡å—æ˜¯å¾ˆå¸¸ç”¨çš„æ¨¡å—ï¼Œ å®ƒå°è£…äº†ä¸pythonè§£é‡Šå™¨ç›¸å…³çš„æ•°æ®ï¼Œä¾‹å¦‚`sys.modules`é‡Œé¢æœ‰å·²ç»åŠ è½½äº†çš„æ‰€æœ‰æ¨¡å—ä¿¡æ¯ï¼Œ`sys.path`é‡Œé¢æ˜¯`PYTHONPATH`çš„å†…å®¹ï¼Œè€Œ`sys.argv`åˆ™å°è£…äº†ä¼ å…¥çš„å‚æ•°æ•°æ®

> ä½¿ç”¨`sys.argv`æ¥æ”¶ä¸Šé¢ç¬¬ä¸€ä¸ªå‘½ä»¤ä¸­åŒ…å«çš„å‚æ•°æ–¹å¼å¦‚ä¸‹ï¼š

```python
import sys
gpus = sys.argv[1]
#gpus = [int(gpus.split(','))]
batch_size = sys.argv[2]
print gpus
print batch_size
```

### argparse

> [ä½¿ç”¨argparseä»å‘½ä»¤è¡Œæ¥æ”¶boolç±»å‹çš„å‚æ•°](https://www.jianshu.com/p/7335651ca176)

è„šæœ¬è¿è¡Œå‘½ä»¤`python script.py -gpus=0,1,2 --batch-size=10`ä¸­çš„`--batch-size`ä¼šè¢«è‡ªåŠ¨è§£ææˆ`batch_size`

`parser.add_argument` æ–¹æ³•çš„`type`å‚æ•°ç†è®ºä¸Šå¯ä»¥æ˜¯ä»»ä½•åˆæ³•çš„ç±»å‹ï¼Œä½†æœ‰äº›å‚æ•°ä¼ å…¥æ ¼å¼æ¯”è¾ƒéº»çƒ¦

* ä¾‹å¦‚listï¼Œæ‰€ä»¥ä¸€èˆ¬ä½¿ç”¨`bool`, `int`, `str`, `float`è¿™äº›åŸºæœ¬ç±»å‹å°±è¡Œäº†ï¼Œæ›´å¤æ‚çš„éœ€æ±‚å¯ä»¥é€šè¿‡`str`ä¼ å…¥ï¼Œç„¶åæ‰‹åŠ¨è§£æ

* `bool`ç±»å‹çš„è§£ææ¯”è¾ƒç‰¹æ®Šï¼Œä¼ å…¥ä»»ä½•å€¼éƒ½ä¼šè¢«è§£ææˆ`True`ï¼Œä¼ å…¥ç©ºå€¼æ—¶æ‰ä¸º`False

```python
import argparse
def str2bool(v):
if v.lower() in ('yes', 'true', 't', 'y', '1'):
  return True
elif v.lower() in ('no', 'false', 'f', 'n', '0'):
  return False
else:
  raise argparse.ArgumentTypeError('Unsupported value encountered.')

if __name__ == '__main__':
parser = argparse.ArgumentParser(description='manual to this script')
parser.add_argument('--zook_host', type=str, default='127.0.0.1:2181')
parser.add_argument('--num_of_task', type=int, default=10)
parser.add_argument('--is_del_aft', type=str2bool, default=False)
args = parser.parse_args()
many_tasks_schedule_performance(zook_host=args.zook_host,
                    num_of_task=args.num_of_task,
                    is_del_aft=args.is_del_aft)
```

### tf.app.run

> tensorflowä¹Ÿæä¾›äº†ä¸€ç§æ–¹ä¾¿çš„è§£ææ–¹å¼
>

```python
import tensorflow as tf
tf.app.flags.DEFINE_string('gpus', None, 'gpus to use')
tf.app.flags.DEFINE_integer('batch_size', 5, 'batch size')

FLAGS = tf.app.flags.FLAGS

def main(_):
 print FLAGS.gpus
 print FLAGS.batch_size

if __name__=="__main__":
 tf.app.run()

>>> python script.py --gpus=0,1,2 --batch_size=10
```

> æœ‰å‡ ç‚¹éœ€è¦æ³¨æ„

1. `tensorflow`åªæä¾›ä»¥ä¸‹å››ç§æ–¹æ³•ï¼š 
   `tf.app.flags.DEFINE_string`, `tf.app.flags.DEFINE_integer`, 

   `tf.app.flags.DEFINE_boolean`,  `tf.app.flags.DEFINE_float`

   åˆ†åˆ«å¯¹åº”`str`, `int`,`bool`,`float`ç±»å‹çš„å‚æ•°

   è¿™é‡Œå¯¹`bool`çš„è§£ææ¯”è¾ƒä¸¥æ ¼ï¼Œä¼ å…¥1ä¼šè¢«è§£ææˆ`True`ï¼Œå…¶ä½™ä»»ä½•å€¼éƒ½ä¼šè¢«è§£ææˆ`False`

2. è„šæœ¬ä¸­éœ€è¦å®šä¹‰ä¸€ä¸ªæ¥æ”¶ä¸€ä¸ªå‚æ•°çš„`main`æ–¹æ³•ï¼š`def main(_):`ï¼Œè¿™ä¸ªä¼ å…¥çš„å‚æ•°æ˜¯è„šæœ¬åï¼Œä¸€èˆ¬ç”¨ä¸åˆ°ï¼Œ æ‰€ä»¥ç”¨ä¸‹åˆ’çº¿æ¥æ”¶ã€‚

3. ä»¥`batch_size`å‚æ•°ä¸ºä¾‹ï¼Œä¼ å…¥è¿™ä¸ªå‚æ•°æ—¶ä½¿ç”¨çš„åç§°ä¸º`--batch_size`ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸­åˆ’çº¿ä¸ä¼šåƒåœ¨`argparse` ä¸­ä¸€æ ·è¢«è§£ææˆä¸‹åˆ’çº¿ã€‚

4. `tf.app.run()`ä¼šå¯»æ‰¾å¹¶æ‰§è¡Œå…¥å£è„šæœ¬çš„`main`æ–¹æ³•ã€‚ä¹Ÿåªæœ‰åœ¨æ‰§è¡Œäº†`tf.app.run()`ä¹‹åæ‰èƒ½ä»`FLAGS`ä¸­å–å‡ºå‚æ•°ã€‚ 
   ä»å®ƒçš„ç­¾åæ¥çœ‹ï¼Œå®ƒä¹Ÿæ˜¯å¯ä»¥è‡ªå·±æŒ‡å®šéœ€è¦æ‰§è¡Œçš„æ–¹æ³•çš„ï¼Œä¸ä¸€å®šéå¾—å«`main`ï¼š

   ```python
   run(main=None, argv=None)
   ```

5. `tf.app.flags`åªæ˜¯å¯¹`argpars`çš„ç®€å•å°è£…ã€‚

6. ä»£ç è§https://github.com/tensorflow/tensorflow/blob/r1.2/tensorflow/python/platform/flags.py

## éšæœºæ‰“ä¹±å¤šä¸ªæ•°ç»„

```python
import numpy as np
def shuffledata(*arrs):
# èª¿ç”¨æ¡ˆä¾‹ x,y = shuffledata(X,Y)
arrs = list(arrs)
for i, arr in enumerate(arrs):
   assert len(arrs[0]) == len(arrs[i])
   arrs[i] = np.array(arr)
p = np.random.permutation(len(arrs[0]))
return tuple(arr[p] for arr in arrs)
```

## pandasè¯»å†™csv

```python
#!/usr/bin/env Python
# -- coding: utf-8 --

"""
@version: v0.1
@author: narutohyc
@file: hyc_test.py
@Description: 
@time: 2020/5/28 20:08
"""

import pandas as pd


def csv_test():
    csv_name = 'my_csv.csv'
	# åˆå§‹åŒ–ä¸€ä¸ªå¸¦è¡¨å¤´çš„ç©ºè¡¨
    f1 = pd.DataFrame(None, columns=['name', 'price', 'marks'])
    f1.to_csv(csv_name, mode='w', encoding='utf-8', index=False)
	
    # è¿½åŠ æ•°æ®åˆ°å·²å­˜åœ¨çš„è¡¨
    data = {"name": ['google', 'baidu', 'yahoo'], "marks": [100, 200, 300], "price": [1, 2, 3]}
    f1 = pd.DataFrame(data, columns=['name', 'price', 'marks'])
    f1.to_csv(csv_name, mode='a', encoding='utf-8', header=False, index=False)
	
    # è¯»å–csv,index_col=Falseè¡¨ç¤ºä¸å­˜åœ¨ç´¢å¼•åˆ—
    f2 = pd.read_csv(csv_name, encoding='utf-8', index_col=False)
    print()

if __name__ == '__main__':
    csv_test()
```

## classmethod å’Œ staticmethod å…·ä½“ç”¨é€”

> [Python ä¸­çš„ classmethod å’Œ staticmethod æœ‰ä»€ä¹ˆå…·ä½“ç”¨é€”ï¼Ÿ](https://www.zhihu.com/question/20021164?sort=created)

## ä¼˜é›…åˆ¤æ–­æ•°å­—æ‰€å±ç­‰çº§

> æœ‰ä» A åˆ° F çš„ 5 ä¸ªç­‰çº§ï¼Œç°è¦åˆ¤æ–­æŸä¸ªæ•°å€¼ï¼ˆä» 0 åˆ° 1 ä¹‹é—´ï¼‰æ‰€å±çš„ç­‰çº§
> ä¸¾ä¾‹ï¼Œå¦‚æ•°å€¼ >= 0.9ï¼Œåˆ™å±äº Aï¼›è‹¥æ•°å€¼ >= 0.8ï¼Œåˆ™å±äº Bï¼›ä»¥æ­¤ç±»æ¨

```python
from typing import Iterable
from bisect import bisect 

def cal_level(score: float, breakpoints: Iterable, name_codes: List):
 """
 äºŒåˆ†æŸ¥æ‰¾ è®¡ç®—åˆ†æ•°ç­‰çº§
 ç¤ºä¾‹ï¼š
     obj = cal_level(score=78, breakpoints=(60, 70, 80, 90), name_codes='FDCBA')
 :param score: å¾—åˆ†
 :param breakpoints: åˆ†å€¼åŒºé—´
 :param name_codes: å„åŒºé—´å¯¹åº”ç»“æœ
 :return: è¯¥åˆ†å€¼çš„å¯¹åº”ç»“æœ
 """
 return name_codes[bisect(breakpoints, score)]
```

## å–æ•´æ“ä½œ

```python
def learning():
    import math
    # å‘ä¸Šå–æ•´
    math.ceil(2.3)  # 3
    math.ceil(2.6)  # 3

    # å‘ä¸‹å–æ•´
    math.floor(2.3)  # 2
    math.floor(2.6)  # 2

    # å››èˆäº”å…¥
    round(6.6)  # 7
    round(6.4)  # 6
    round(6.55)  # 7

    # åªè¦ä¸æ˜¯.5çš„å½¢å¼ï¼Œä¹Ÿå°±æ˜¯å°æ•°ä½ä¸ä¸º5ï¼ŒroundåŸºæœ¬ç”¨æ³•å°±æ˜¯å››èˆäº”å…¥ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œroundç”¨äºåœ†æ•´ï¼Œä¿ç•™æœ€è¿‘å¶æ•°ï¼š
    round(6.5)  # 6  æ˜¯å¶æ•°
    round(7.5)  # 8 æ˜¯å¶æ•°

    import torch
    import torch.nn as nn
    m = nn.Linear(20, 30)
    input = torch.randn(128, 20)
    output = m(input)
    logger.info(output.shape)  # torch.Size([128, 30])

    m = nn.Conv2d(16, 33, 3, stride=2)
    input = torch.randn(20, 16, 50, 100)
    output = m(input)
    logger.info(output.shape)  # torch.Size([20, 33, 24, 95])     (190 + 2 * 0 - (3 - 1) - 1) / 2 + 1

    embedding = nn.Embedding(10, 3)
    input = torch.LongTensor([[1, 2, 4, 5], [4, 3, 2, 9]])
    logger.info(input.shape)  # torch.Size([2, 4])
    output = embedding(input)
    logger.info(output.shape)  # torch.Size([2, 4, 3])
```

## ä½è¿ç®—

> èƒŒæ™¯çŸ¥è¯†

ğŸ…äºŒè¿›åˆ¶

åœ¨Pythonä¸­å¯ä»¥é€šè¿‡ä»¥"0b"æˆ–è€…"-0b"å¼€å¤´çš„å­—ç¬¦ä¸²æ¥è¡¨ç¤ºäºŒè¿›åˆ¶

```python
# è½¬äºŒè¿›åˆ¶
print(bin(5))
>>> 0b101
```

ğŸ¥¬åŸç ã€åç ã€è¡¥ç 

* **åŸç **: å°†ä¸€ä¸ªæ•´æ•°è½¬æ¢æˆ`äºŒè¿›åˆ¶`å½¢å¼ï¼Œå°±æ˜¯å…¶åŸç ã€‚ä¾‹å¦‚6çš„åŸç å°±æ˜¯`0110`ï¼›-18 çš„åŸç å°±æ˜¯`1000 0000 0001 0010`

  é€šä¿—çš„ç†è§£ï¼ŒåŸç å°±æ˜¯ä¸€ä¸ªæ•´æ•°æœ¬æ¥çš„äºŒè¿›åˆ¶å½¢å¼

* **åç **: å¯¹äºæ­£æ•°ï¼Œå®ƒçš„åç å°±æ˜¯å…¶åŸç (åŸç å’Œåç ç›¸åŒ)ï¼›è´Ÿæ•°çš„åç æ˜¯å°†åŸç ä¸­`é™¤ç¬¦å·ä½ä»¥å¤–`çš„æ‰€æœ‰ä½(æ•°å€¼ä½)å–å

* **è¡¥ç **: å¯¹äºæ­£æ•°ï¼Œå®ƒçš„è¡¥ç å°±æ˜¯å…¶åŸç (åŸç ã€åç ã€è¡¥ç éƒ½ç›¸åŒ)ï¼›è´Ÿæ•°çš„è¡¥ç æ˜¯å…¶åç åŠ 1

> ä½è¿ç®—

* **ä¸**: & æŒ‰ä½ä¸

* **æˆ–**: | æŒ‰ä½æˆ–

* **å**ï¼š~ æŒ‰ä½å–å

* **å¼‚æˆ–**: ^ æŒ‰ä½å¼‚æˆ–

* **æŒ‰ä½å·¦ç§»**: << æŒ‰ä½å·¦ç§»ï¼Œå„äºŒè¿›ä½å…¨éƒ¨å·¦ç§»nä½ï¼Œé«˜ä½ä¸¢å¼ƒï¼Œä½ä½è¡¥0

  å·¦ç§»1ä½ç›¸å½“äº ä¹˜ä»¥2

* **æŒ‰ä½å³ç§»**: >> æŒ‰ä½å³ç§»ï¼Œæ‰€æœ‰äºŒè¿›åˆ¶ä½å‘å³ç§»åŠ¨nä½ï¼Œç§»å‡ºçš„ä½åˆ æ‰ï¼Œè¿›çš„ä½è¡¥ç¬¦å·ä½ï¼Œå³ç§»ä¸ä¼šæ”¹å˜ä¸€ä¸ªæ•°çš„ç¬¦å·

  å³ç§»1ä½ç›¸å½“äº é™¤ä»¥2

> åº”ç”¨åœºæ™¯

1. åˆ¤æ–­å¥‡æ•°è¿˜æ˜¯å¶æ•°

   ä½¿ç”¨&è¿ç®—ï¼Œä¸1è¿›è¡Œ&ï¼Œå¦‚æœä¸º1ï¼Œé‚£ä¹ˆè¯¥æ•°ä¸ºå¥‡æ•°ï¼›å¦‚æœä¸º0ï¼Œé‚£ä¹ˆè¯¥æ•°æ˜¯å¶æ•°

2. äº¤æ¢ä¸¤ä¸ªæ•°å€¼

   ç¬¬ä¸€è¡Œï¼Œa = a ^ bï¼Œå¾ˆå®¹æ˜“ç†è§£

   ç¬¬äºŒè¡Œï¼Œ b = b ^ a = b ^ a ^ bï¼Œç”±äº b ^ b = 0ï¼Œæ‰€ä»¥ b = a ^ 0ï¼Œå³ b = a

   ç¬¬ä¸‰è¡Œï¼Œ a = a ^ b ,ç”±äºaåœ¨ç¬¬ä¸€æ­¥é‡æ–°èµ‹å€¼ï¼Œæ‰€ä»¥ï¼Œa =  a ^ b ^ a = bï¼Œå®Œæˆäº†æ•°å€¼äº¤æ¢

   ```python
   a ^= b
   b ^= a
   a ^= b
   ```

3. å¯»æ‰¾æ•°æ®åˆ—è¡¨ä¸­çš„ç‹¬ä¸€æ— äºŒ

   æœ‰ä¸€ä¸ªæ•°æ®åˆ—è¡¨ï¼ˆ2N+1ä¸ªæ•´æ•°ï¼‰ï¼Œåªæœ‰ä¸€ä¸ªæ•°å‡ºç°äº†1æ¬¡ï¼Œå…¶ä½™Nä¸ªæ•°éƒ½å‡ºç°äº†2æ¬¡ã€‚å¦‚ä½•æ‰¾åˆ°è¿™ä¸ªç‹¬ä¸€æ— äºŒçš„æ•°æ®

   ```python
   from functools import reduce
   lst = [1,5,6,4,2,6,4,2,1]
   reduce(lambda a,b : a^b, lst)
   
   >>> è¾“å‡º5
   ```

4. è®¡ç®—ä¸€ä¸ªæ•°å€¼çš„äºŒè¿›åˆ¶æ•°ä¸­æœ‰å¤šå°‘ä¸ª1

   ```python
   def count_ones(x):
       count = 0
       while x:
           count = count + 1
           x = x & (x-1) # ç­‰ä»·äº x = x & (x-1)
       return count
   ```

5. åœ¨ä¸€å †æ•°å­—ä¸­æ‰¾å‡ºåªå‡ºç°ä¸€æ¬¡çš„ä¸¤ä¸ªæ•°å­—

   ```python
   # æŸ¥æ‰¾æ„æˆresçš„ä¸¤ä¸ªæ•°
   def split_res(res, lst):
       tmp = 1
       num_0, num_1 = 0, 0
       while not tmp & res:
           tmp <<= 1
       for i in lst:
           if i & tmp:
               num_0 ^= i
           else:
               num_1 ^= i
       return num_0, num_1
   
   from functools import reduce
   lst = [1,5,6,4,2,6,4,2,1,7]
   res = reduce(lambda a,b : a^b, lst)
   num_0, num_1 = split_res(res, lst)
   
   ```

   

> [è…¾è®¯ä¸‰é¢ï¼š40äº¿ä¸ªQQå·ç å¦‚ä½•å»é‡ï¼Ÿ](https://cloud.tencent.com/developer/article/1982239)

## å…¶ä»–åº“

> [å“ªäº› Python åº“è®©ä½ ç›¸è§æ¨æ™šï¼Ÿ](https://www.zhihu.com/question/24590883)

# python cookbookè®°å½•

## æ•°æ®ç»“æ„å’Œç®—æ³•

### æŸ¥æ‰¾æœ€å¤§æˆ–æœ€å°çš„ N ä¸ªå…ƒç´ 

> æ€æ ·ä»ä¸€ä¸ªé›†åˆä¸­è·å¾—æœ€å¤§æˆ–è€…æœ€å°çš„ N ä¸ªå…ƒç´ åˆ—è¡¨ï¼Ÿ
>
> heapq æ¨¡å—æœ‰ä¸¤ä¸ªå‡½æ•°ï¼šnlargest() å’Œ nsmallest() å¯ä»¥å®Œç¾è§£å†³è¿™ä¸ªé—®é¢˜ã€‚
>
> ```python
> import heapq
> nums = [1, 8, 2, 23, 7, -4, 18, 23, 42, 37, 2]
> print(heapq.nlargest(3, nums)) # Prints [42, 37, 23]
> print(heapq.nsmallest(3, nums)) # Prints [-4, 1, 2]
> ```
>
> ä¸¤ä¸ªå‡½æ•°éƒ½èƒ½æ¥å—ä¸€ä¸ªå…³é”®å­—å‚æ•°ï¼Œç”¨äºæ›´å¤æ‚çš„æ•°æ®ç»“æ„ä¸­ï¼š
>
> ```python
> portfolio = [
> {'name': 'IBM', 'shares': 100, 'price': 91.1},
> {'name': 'AAPL', 'shares': 50, 'price': 543.22},
> {'name': 'FB', 'shares': 200, 'price': 21.09},
> {'name': 'HPQ', 'shares': 35, 'price': 31.75},
> {'name': 'YHOO', 'shares': 45, 'price': 16.35},
> {'name': 'ACME', 'shares': 75, 'price': 115.65}
> ]
> cheap = heapq.nsmallest(3, portfolio, key=lambda s: s['price'])
> expensive = heapq.nlargest(3, portfolio, key=lambda s: s['price'])
> ```
>
> è¯‘è€…æ³¨ï¼šä¸Šé¢ä»£ç åœ¨å¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œå¯¹æ¯”çš„æ—¶å€™ï¼Œä¼šä»¥ price çš„å€¼è¿›è¡Œæ¯”è¾ƒ

> å¦‚æœä½ æƒ³åœ¨ä¸€ä¸ªé›†åˆä¸­æŸ¥æ‰¾æœ€å°æˆ–æœ€å¤§çš„ N ä¸ªå…ƒç´ ï¼Œå¹¶ä¸” N å°äºé›†åˆå…ƒç´ æ•°é‡ï¼Œé‚£ä¹ˆè¿™äº›å‡½æ•°æä¾›äº†å¾ˆå¥½çš„æ€§èƒ½ã€‚å› ä¸ºåœ¨åº•å±‚å®ç°é‡Œé¢ï¼Œé¦–å…ˆä¼šå…ˆå°†é›†åˆæ•°æ®è¿›è¡Œå †æ’åºåæ”¾å…¥ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼š
>
> ```python
> nums = [1, 8, 2, 23, 7, -4, 18, 23, 42, 37, 2]
> import heapq
> heap = list(nums)
> heapq.heapify(heap)
> heap
> [-4, 2, 1, 23, 7, 2, 18, 23, 42, 37, 8]
> ```
>
> å †æ•°æ®ç»“æ„æœ€é‡è¦çš„ç‰¹å¾æ˜¯ heap[0] æ°¸è¿œæ˜¯æœ€å°çš„å…ƒç´ ã€‚å¹¶ä¸”å‰©ä½™çš„å…ƒç´ å¯ä»¥å¾ˆå®¹æ˜“çš„é€šè¿‡è°ƒç”¨heapq.heappop() æ–¹æ³•å¾—åˆ°ï¼Œè¯¥æ–¹æ³•ä¼šå…ˆå°†ç¬¬ä¸€ä¸ªå…ƒç´ å¼¹å‡ºæ¥ï¼Œç„¶åç”¨ä¸‹ä¸€ä¸ªæœ€å°çš„å…ƒç´ æ¥å–ä»£è¢«å¼¹å‡ºå…ƒç´ ï¼ˆè¿™ç§æ“ä½œæ—¶é—´å¤æ‚åº¦ä»…ä»…æ˜¯$Olog(N)$ï¼Œ$N$æ˜¯å †å¤§å°ï¼‰ã€‚
>
> **å°ç»“**ï¼š
>
> å½“è¦æŸ¥æ‰¾çš„å…ƒç´ ä¸ªæ•°ç›¸å¯¹æ¯”è¾ƒå°çš„æ—¶å€™ï¼Œå‡½æ•° nlargest() å’Œ nsmallest() æ˜¯å¾ˆåˆé€‚çš„ã€‚
>
> å¦‚æœä½ ä»…ä»…æƒ³æŸ¥æ‰¾å”¯ä¸€çš„æœ€å°æˆ–æœ€å¤§ï¼ˆN=1ï¼‰çš„å…ƒç´ çš„è¯ï¼Œé‚£ä¹ˆä½¿ç”¨ min() å’Œmax() å‡½æ•°ä¼šæ›´å¿«äº›ã€‚
>
> ç±»ä¼¼çš„ï¼Œå¦‚æœ N çš„å¤§å°å’Œé›†åˆå¤§å°æ¥è¿‘çš„æ—¶å€™ï¼Œé€šå¸¸å…ˆæ’åºè¿™ä¸ªé›†åˆç„¶åå†ä½¿ç”¨åˆ‡ç‰‡æ“ä½œä¼šæ›´å¿«ç‚¹ï¼ˆsorted(items)[:N] æˆ–è€…æ˜¯ sorted(items)[-N:]ï¼‰ã€‚
>
> éœ€è¦åœ¨æ­£ç¡®åœºåˆä½¿ç”¨å‡½æ•° nlargest() å’Œ nsmallest() æ‰èƒ½å‘æŒ¥å®ƒä»¬çš„ä¼˜åŠ¿ï¼ˆå¦‚æœN å¿«æ¥è¿‘é›†åˆå¤§å°äº†ï¼Œé‚£ä¹ˆä½¿ç”¨æ’åºæ“ä½œä¼šæ›´å¥½äº›ï¼‰ã€‚

### å®ç°ä¸€ä¸ªä¼˜å…ˆçº§é˜Ÿåˆ—

> æ€æ ·å®ç°ä¸€ä¸ªæŒ‰ä¼˜å…ˆçº§æ’åºçš„é˜Ÿåˆ—ï¼Ÿå¹¶ä¸”åœ¨è¿™ä¸ªé˜Ÿåˆ—ä¸Šé¢æ¯æ¬¡ pop æ“ä½œæ€»æ˜¯è¿”å›ä¼˜å…ˆçº§æœ€é«˜çš„é‚£ä¸ªå…ƒç´ 
>
> åˆ©ç”¨ heapq æ¨¡å—å®ç°äº†ä¸€ä¸ªç®€å•çš„ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼š
>
> ```python
> import heapq
> 
> class PriorityQueue:
>     def __init__(self):
>         self._queue = []
>         self._index = 0
> 
>         def push(self, item, priority):
>             heapq.heappush(self._queue, (-priority, self._index, item))
>             self._index += 1
> 
>         def pop(self):
>             return heapq.heappop(self._queue)[-1]
> ```
>
> ```python
> >>> class Item:
> ... def __init__(self, name):
> ... self.name = name
> ... def __repr__(self):
> ... return 'Item({!r})'.format(self.name)
> ...
> >>> q = PriorityQueue()
> >>> q.push(Item('foo'), 1)
> >>> q.push(Item('bar'), 5)
> >>> q.push(Item('spam'), 4)
> >>> q.push(Item('grok'), 1)
> >>> q.pop()
> Item('bar')
> >>> q.pop()
> Item('spam')
> >>> q.pop()
> Item('foo')
> >>> q.pop()
> Item('grok')
> >>>
> ```
>
> ä»”ç»†è§‚å¯Ÿå¯ä»¥å‘ç°ï¼Œç¬¬ä¸€ä¸ª pop() æ“ä½œè¿”å›ä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ ã€‚å¦å¤–æ³¨æ„åˆ°å¦‚æœä¸¤ä¸ªæœ‰ç€ç›¸åŒä¼˜å…ˆçº§çš„å…ƒç´ ï¼ˆfoo å’Œ grok ï¼‰ï¼Œpop æ“ä½œæŒ‰ç…§å®ƒä»¬è¢«æ’å…¥åˆ°é˜Ÿåˆ—çš„é¡ºåºè¿”å›çš„ã€‚
>
> åœ¨ä¸Šé¢ä»£ç ä¸­ï¼Œé˜Ÿåˆ—åŒ…å«äº†ä¸€ä¸ª (-priority, index, item) çš„å…ƒç»„ã€‚ä¼˜å…ˆçº§ä¸ºè´Ÿæ•°çš„ç›®çš„æ˜¯ä½¿å¾—å…ƒç´ æŒ‰ç…§ä¼˜å…ˆçº§ä»é«˜åˆ°ä½æ’åºã€‚è¿™ä¸ªè·Ÿæ™®é€šçš„æŒ‰ä¼˜å…ˆçº§ä»ä½åˆ°é«˜æ’åºçš„å †æ’åºæ°å·§ç›¸åã€‚
> index å˜é‡çš„ä½œç”¨æ˜¯ä¿è¯åŒç­‰ä¼˜å…ˆçº§å…ƒç´ çš„æ­£ç¡®æ’åºã€‚é€šè¿‡ä¿å­˜ä¸€ä¸ªä¸æ–­å¢åŠ çš„index ä¸‹æ ‡å˜é‡ï¼Œå¯ä»¥ç¡®ä¿å…ƒç´ æŒ‰ç…§å®ƒä»¬æ’å…¥çš„é¡ºåºæ’åºã€‚è€Œä¸”ï¼Œindex å˜é‡ä¹Ÿåœ¨ç›¸åŒä¼˜å…ˆçº§å…ƒç´ æ¯”è¾ƒçš„æ—¶å€™èµ·åˆ°é‡è¦ä½œç”¨
>
> é€šè¿‡å¼•å…¥å¦å¤–çš„ index å˜é‡ç»„æˆä¸‰å…ƒç»„ (priority, index, item) ï¼Œå°±èƒ½å¾ˆå¥½çš„é¿å…ä¸Šé¢çš„é”™è¯¯ï¼Œå› ä¸ºä¸å¯èƒ½æœ‰ä¸¤ä¸ªå…ƒç´ æœ‰ç›¸åŒçš„ index å€¼ã€‚Python åœ¨åšå…ƒç»„æ¯”è¾ƒæ—¶å€™ï¼Œå¦‚æœå‰é¢çš„æ¯”è¾ƒå·²ç»å¯ä»¥ç¡®å®šç»“æœäº†ï¼Œåé¢çš„æ¯”è¾ƒæ“ä½œå°±ä¸ä¼šå‘ç”Ÿäº†ï¼š
>
> ```python
> a = (1, 0, Item('foo'))
> b = (5, 1, Item('bar'))
> c = (1, 2, Item('grok'))
> a < b
> True
> a < c
> True
> ```
>
> å¦‚æœä½ æƒ³åœ¨å¤šä¸ªçº¿ç¨‹ä¸­ä½¿ç”¨åŒä¸€ä¸ªé˜Ÿåˆ—ï¼Œé‚£ä¹ˆä½ éœ€è¦å¢åŠ é€‚å½“çš„é”å’Œä¿¡å·é‡æœºåˆ¶ã€‚

### å­—å…¸çš„è¿ç®—

> æ€æ ·åœ¨æ•°æ®å­—å…¸ä¸­æ‰§è¡Œä¸€äº›è®¡ç®—æ“ä½œï¼ˆæ¯”å¦‚æ±‚æœ€å°å€¼ã€æœ€å¤§å€¼ã€æ’åºç­‰ç­‰ï¼‰ï¼Ÿ
>
> è€ƒè™‘ä¸‹é¢çš„è‚¡ç¥¨åå’Œä»·æ ¼æ˜ å°„å­—å…¸ï¼š
>
> ```python
> prices = {
>     'ACME': 45.23,
>     'AAPL': 612.78,
>     'IBM': 205.55,
>     'HPQ': 37.20,
>     'FB': 10.75}
> ```
>
> ä¸ºäº†å¯¹å­—å…¸å€¼æ‰§è¡Œè®¡ç®—æ“ä½œï¼Œé€šå¸¸éœ€è¦ä½¿ç”¨ zip() å‡½æ•°å…ˆå°†é”®å’Œå€¼åè½¬è¿‡æ¥ã€‚æ¯”å¦‚ï¼Œä¸‹é¢æ˜¯æŸ¥æ‰¾æœ€å°å’Œæœ€å¤§è‚¡ç¥¨ä»·æ ¼å’Œè‚¡ç¥¨å€¼çš„ä»£ç 
>
> ```python
> min_price = min(zip(prices.values(), prices.keys()))
> # min_price is (10.75, 'FB')
> max_price = max(zip(prices.values(), prices.keys()))
> # max_price is (612.78, 'AAPL')
> ```
>
> ç±»ä¼¼çš„ï¼Œå¯ä»¥ä½¿ç”¨ zip() å’Œ sorted() å‡½æ•°æ¥æ’åˆ—å­—å…¸æ•°æ®ï¼š
>
> ```python
> prices_sorted = sorted(zip(prices.values(), prices.keys()))
> # prices_sorted is [(10.75, 'FB'), (37.2, 'HPQ'),
> # (45.23, 'ACME'), (205.55, 'IBM'),
> # (612.78, 'AAPL')]
> ```
>
> å¦‚æœä½ åœ¨ä¸€ä¸ªå­—å…¸ä¸Šæ‰§è¡Œæ™®é€šçš„æ•°å­¦è¿ç®—ï¼Œä½ ä¼šå‘ç°å®ƒä»¬ä»…ä»…ä½œç”¨äºé”®ï¼Œè€Œä¸æ˜¯å€¼ã€‚
>
> éœ€è¦æ³¨æ„çš„æ˜¯åœ¨è®¡ç®—æ“ä½œä¸­ä½¿ç”¨åˆ°äº† (å€¼ï¼Œé”®) å¯¹ã€‚å½“å¤šä¸ªå®ä½“æ‹¥æœ‰ç›¸åŒçš„å€¼çš„æ—¶å€™ï¼Œé”®ä¼šå†³å®šè¿”å›ç»“æœã€‚æ¯”å¦‚ï¼Œåœ¨æ‰§è¡Œ min() å’Œ max() æ“ä½œçš„æ—¶å€™ï¼Œå¦‚æœæ°å·§æœ€å°æˆ–æœ€å¤§å€¼æœ‰é‡å¤çš„ï¼Œé‚£ä¹ˆæ‹¥æœ‰æœ€å°æˆ–æœ€å¤§é”®çš„å®ä½“ä¼šè¿”å›ï¼š
> ```python
> prices = { 'AAA' : 45.23, 'ZZZ': 45.23 }
> min(zip(prices.values(), prices.keys()))
> (45.23, 'AAA')
> max(zip(prices.values(), prices.keys()))
> (45.23, 'ZZZ')
> ```
>
> 

### æŸ¥æ‰¾ä¸¤å­—å…¸çš„ç›¸åŒç‚¹

> ä¸ºäº†å¯»æ‰¾ä¸¤ä¸ªå­—å…¸çš„ç›¸åŒç‚¹ï¼Œå¯ä»¥ç®€å•çš„åœ¨ä¸¤å­—å…¸çš„ keys() æˆ–è€… items() æ–¹æ³•è¿”å›ç»“æœä¸Šæ‰§è¡Œé›†åˆæ“ä½œã€‚
>
> ```python
> # Find keys in common
> a.keys() & b.keys() # { 'x', 'y' }
> # Find keys in a that are not in b
> a.keys() - b.keys() # { 'z' }
> # Find (key,value) pairs in common
> a.items() & b.items() # { ('y', 2) }
> ```
>
> è¿™äº›æ“ä½œä¹Ÿå¯ä»¥ç”¨äºä¿®æ”¹æˆ–è€…è¿‡æ»¤å­—å…¸å…ƒç´ ã€‚æ¯”å¦‚ï¼Œå‡å¦‚ä½ æƒ³ä»¥ç°æœ‰å­—å…¸æ„é€ ä¸€ä¸ªæ’é™¤å‡ ä¸ªæŒ‡å®šé”®çš„æ–°å­—å…¸ã€‚ä¸‹é¢åˆ©ç”¨å­—å…¸æ¨å¯¼æ¥å®ç°è¿™æ ·çš„éœ€æ±‚ï¼š
>
> ```python
> # Make a new dictionary with certain keys removed
> c = {key:a[key] for key in a.keys() - {'z', 'w'}}
> # c is {'x': 1, 'y': 2}
> ```
>
> **å°ç»“**ï¼š
>
> ä¸€ä¸ªå­—å…¸å°±æ˜¯ä¸€ä¸ªé”®é›†åˆä¸å€¼é›†åˆçš„æ˜ å°„å…³ç³»ã€‚å­—å…¸çš„ keys() æ–¹æ³•è¿”å›ä¸€ä¸ªå±•ç°é”®é›†åˆçš„é”®è§†å›¾å¯¹è±¡ã€‚é”®è§†å›¾çš„ä¸€ä¸ªå¾ˆå°‘è¢«äº†è§£çš„ç‰¹æ€§å°±æ˜¯å®ƒä»¬ä¹Ÿæ”¯æŒé›†åˆæ“ä½œï¼Œæ¯”å¦‚é›†åˆå¹¶ã€äº¤ã€å·®è¿ç®—ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ æƒ³å¯¹é›†åˆçš„é”®æ‰§è¡Œä¸€äº›æ™®é€šçš„é›†åˆæ“ä½œï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨é”®è§†å›¾å¯¹è±¡è€Œä¸ç”¨å…ˆå°†å®ƒä»¬è½¬æ¢æˆä¸€ä¸ª setã€‚
> å­—å…¸çš„ items() æ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…å« (é”®ï¼Œå€¼) å¯¹çš„å…ƒç´ è§†å›¾å¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡åŒæ ·ä¹Ÿæ”¯æŒé›†åˆæ“ä½œï¼Œå¹¶ä¸”å¯ä»¥è¢«ç”¨æ¥æŸ¥æ‰¾ä¸¤ä¸ªå­—å…¸æœ‰å“ªäº›ç›¸åŒçš„é”®å€¼å¯¹ã€‚
> å°½ç®¡å­—å…¸çš„ values() æ–¹æ³•ä¹Ÿæ˜¯ç±»ä¼¼ï¼Œä½†æ˜¯å®ƒå¹¶ä¸æ”¯æŒè¿™é‡Œä»‹ç»çš„é›†åˆæ“ä½œã€‚æŸç§ç¨‹åº¦ä¸Šæ˜¯å› ä¸ºå€¼è§†å›¾ä¸èƒ½ä¿è¯æ‰€æœ‰çš„å€¼äº’ä¸ç›¸åŒï¼Œè¿™æ ·ä¼šå¯¼è‡´æŸäº›é›†åˆæ“ä½œä¼šå‡ºç°é—®é¢˜ã€‚ä¸è¿‡ï¼Œå¦‚æœä½ ç¡¬è¦åœ¨å€¼ä¸Šé¢æ‰§è¡Œè¿™äº›é›†åˆæ“ä½œçš„è¯ï¼Œä½ å¯ä»¥å…ˆå°†å€¼é›†åˆè½¬æ¢æˆ setï¼Œç„¶åå†æ‰§è¡Œé›†åˆè¿ç®—å°±è¡Œäº†ã€‚

###  åˆ é™¤åºåˆ—ç›¸åŒå…ƒç´ å¹¶ä¿æŒé¡ºåº

> å¦‚æœä½ æƒ³æ¶ˆé™¤å…ƒç´ ä¸å¯å“ˆå¸Œï¼ˆæ¯”å¦‚ dict ç±»å‹ï¼‰çš„åºåˆ—ä¸­é‡å¤å…ƒç´ çš„è¯
>
> ```python
> def dedupe(items, key=None):
> seen = set()
> for item in items:
> val = item if key is None else key(item)
> if val not in seen:
> yield item
> seen.add(val)
> ```
>
> è¿™é‡Œçš„ key å‚æ•°æŒ‡å®šäº†ä¸€ä¸ªå‡½æ•°ï¼Œå°†åºåˆ—å…ƒç´ è½¬æ¢æˆ hashable ç±»å‹ã€‚
>
> ```python
> >>> a = [ {'x':1, 'y':2}, {'x':1, 'y':3}, {'x':1, 'y':2}, {'x':2, 'y':4}]
> >>> list(dedupe(a, key=lambda d: (d['x'],d['y'])))
> [{'x': 1, 'y': 2}, {'x': 1, 'y': 3}, {'x': 2, 'y': 4}]
> >>> list(dedupe(a, key=lambda d: d['x']))
> [{'x': 1, 'y': 2}, {'x': 2, 'y': 4}]
> >>>
> ```
>
> å¦‚æœä½ æƒ³åŸºäºå•ä¸ªå­—æ®µã€å±æ€§æˆ–è€…æŸä¸ªæ›´å¤§çš„æ•°æ®ç»“æ„æ¥æ¶ˆé™¤é‡å¤å…ƒç´ ï¼Œç¬¬äºŒç§æ–¹æ¡ˆåŒæ ·å¯ä»¥èƒœä»»ã€‚

### å‘½ååˆ‡ç‰‡

>å†…ç½®çš„ slice() å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªåˆ‡ç‰‡å¯¹è±¡ï¼Œå¯ä»¥è¢«ç”¨åœ¨ä»»ä½•åˆ‡ç‰‡å…è®¸ä½¿ç”¨çš„åœ°æ–¹ã€‚
>
>å¦‚æœä½ æœ‰ä¸€ä¸ªåˆ‡ç‰‡å¯¹è±¡ aï¼Œä½ å¯ä»¥åˆ†åˆ«è°ƒç”¨å®ƒçš„ a.start , a.stop , a.step å±æ€§æ¥è·å–æ›´å¤šçš„ä¿¡æ¯ã€‚
>
>è¿˜èƒ½é€šè¿‡è°ƒç”¨åˆ‡ç‰‡çš„ indices(size) æ–¹æ³•å°†å®ƒæ˜ å°„åˆ°ä¸€ä¸ªç¡®å®šå¤§å°çš„åºåˆ—ä¸Šï¼Œè¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªä¸‰å…ƒç»„ (start, stop, step) ï¼Œæ‰€æœ‰å€¼éƒ½ä¼šè¢«åˆé€‚çš„ç¼©å°ä»¥æ»¡è¶³è¾¹ç•Œé™åˆ¶ï¼Œä»è€Œä½¿ç”¨çš„æ—¶å€™é¿å…å‡ºç° IndexError å¼‚å¸¸ã€‚
>
>```python
>SHARES = slice(20, 23)
>PRICE = slice(31, 37)
>cost = int(record[SHARES]) * float(record[PRICE])
>```

## å­—ç¬¦ä¸²å’Œæ–‡æœ¬

### ä½¿ç”¨å¤šä¸ªç•Œå®šç¬¦åˆ†å‰²å­—ç¬¦ä¸²

> å‡½æ•° re.split() æ˜¯éå¸¸å®ç”¨çš„ï¼Œå› ä¸ºå®ƒå…è®¸ä½ ä¸ºåˆ†éš”ç¬¦æŒ‡å®šå¤šä¸ªæ­£åˆ™æ¨¡å¼ã€‚æ¯”å¦‚ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œåˆ†éš”ç¬¦å¯ä»¥æ˜¯é€—å·ï¼Œåˆ†å·æˆ–è€…æ˜¯ç©ºæ ¼ï¼Œå¹¶ä¸”åé¢ç´§è·Ÿç€ä»»æ„ä¸ªçš„ç©ºæ ¼ã€‚åªè¦è¿™ä¸ªæ¨¡å¼è¢«æ‰¾åˆ°ï¼Œé‚£ä¹ˆåŒ¹é…çš„åˆ†éš”ç¬¦ä¸¤è¾¹çš„å®ä½“éƒ½ä¼šè¢«å½“æˆæ˜¯ç»“æœä¸­çš„å…ƒç´ è¿”å›ã€‚è¿”å›ç»“æœä¸ºä¸€ä¸ªå­—æ®µåˆ—è¡¨ï¼Œè¿™ä¸ªè·Ÿ str.split() è¿”å›å€¼ç±»å‹æ˜¯ä¸€æ ·çš„ã€‚
>
> å½“ä½ ä½¿ç”¨ re.split() å‡½æ•°æ—¶å€™ï¼Œéœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯æ­£åˆ™è¡¨è¾¾å¼ä¸­æ˜¯å¦åŒ…å«ä¸€ä¸ªæ‹¬å·æ•è·åˆ†ç»„ã€‚å¦‚æœä½¿ç”¨äº†æ•è·åˆ†ç»„ï¼Œé‚£ä¹ˆè¢«åŒ¹é…çš„æ–‡æœ¬ä¹Ÿå°†å‡ºç°åœ¨ç»“æœåˆ—è¡¨ä¸­ã€‚
>
> ```python
> >>> fields = re.split(r'(;|,|\s)\s*', line)
> >>> fields
> ['asdf', ' ', 'fjdk', ';', 'afed', ',', 'fjek', ',', 'asdf', ',', 'foo']
> ```

### ç”¨ Shell é€šé…ç¬¦åŒ¹é…å­—ç¬¦ä¸²

> ä½¿ç”¨ Unix Shell ä¸­å¸¸ç”¨çš„é€šé…ç¬¦ (æ¯”å¦‚ *.py , Dat[0-9]*.csv ç­‰) å»åŒ¹é…æ–‡æœ¬å­—ç¬¦ä¸²
>
> fnmatch æ¨¡å—æä¾›äº†ä¸¤ä¸ªå‡½æ•°â€”â€”fnmatch() å’Œ fnmatchcase() ï¼Œå¯ä»¥ç”¨æ¥å®ç°è¿™æ ·çš„åŒ¹é…ã€‚
>
> ```python
> >>> from fnmatch import fnmatch, fnmatchcase
> >>> fnmatch('foo.txt', '*.txt')
> True
> >>> fnmatch('foo.txt', '?oo.txt')
> True
> >>> fnmatch('Dat45.csv', 'Dat[0-9]*')
> True
> >>> names = ['Dat1.csv', 'Dat2.csv', 'config.ini', 'foo.py']
> >>> [name for name in names if fnmatch(name, 'Dat*.csv')]
> ['Dat1.csv', 'Dat2.csv']
> ```
>
> fnmatch() å‡½æ•°ä½¿ç”¨åº•å±‚æ“ä½œç³»ç»Ÿçš„å¤§å°å†™æ•æ„Ÿè§„åˆ™ (ä¸åŒçš„ç³»ç»Ÿæ˜¯ä¸ä¸€æ ·çš„) æ¥åŒ¹é…æ¨¡å¼ã€‚
>
> ```python
> >>> # On OS X (Mac)
> >>> fnmatch('foo.txt', '*.TXT')
> False
> >>> # On Windows
> >>> fnmatch('foo.txt', '*.TXT')
> True
> ```
>
> å¦‚æœä½ å¯¹è¿™ä¸ªåŒºåˆ«å¾ˆåœ¨æ„ï¼Œå¯ä»¥ä½¿ç”¨ fnmatchcase() æ¥ä»£æ›¿ã€‚å®ƒå®Œå…¨ä½¿ç”¨ä½ çš„æ¨¡
> å¼å¤§å°å†™åŒ¹é…
>
> ```python
> >>> fnmatchcase('foo.txt', '*.TXT')
> False
> ```
>
> fnmatch() å‡½æ•°åŒ¹é…èƒ½åŠ›ä»‹äºç®€å•çš„å­—ç¬¦ä¸²æ–¹æ³•å’Œå¼ºå¤§çš„æ­£åˆ™è¡¨è¾¾å¼ä¹‹é—´ã€‚
>
> å¦‚æœåœ¨æ•°æ®å¤„ç†æ“ä½œä¸­åªéœ€è¦ç®€å•çš„é€šé…ç¬¦å°±èƒ½å®Œæˆçš„æ—¶å€™ï¼Œè¿™é€šå¸¸æ˜¯ä¸€ä¸ªæ¯”è¾ƒåˆç†çš„æ–¹æ¡ˆã€‚
>
> å¦‚æœä½ çš„ä»£ç éœ€è¦åšæ–‡ä»¶åçš„åŒ¹é…ï¼Œæœ€å¥½ä½¿ç”¨ glob æ¨¡å—ã€‚

### å­—ç¬¦ä¸²åŒ¹é…å’Œæœç´¢

> åŒ¹é…æˆ–è€…æœç´¢ç‰¹å®šæ¨¡å¼çš„æ–‡æœ¬
>
> å¦‚æœä½ æƒ³åŒ¹é…çš„æ˜¯å­—é¢å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆä½ é€šå¸¸åªéœ€è¦è°ƒç”¨åŸºæœ¬å­—ç¬¦ä¸²æ–¹æ³•å°±è¡Œï¼Œæ¯”å¦‚str.find() , str.endswith() , str.startswith() æˆ–è€…ç±»ä¼¼çš„æ–¹æ³•
>
> å¯¹äºå¤æ‚çš„åŒ¹é…éœ€è¦ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å’Œ re æ¨¡å—ã€‚ä¸ºäº†è§£é‡Šæ­£åˆ™è¡¨è¾¾å¼çš„åŸºæœ¬åŸç†ï¼Œå‡è®¾ä½ æƒ³åŒ¹é…æ•°å­—æ ¼å¼çš„æ—¥æœŸå­—ç¬¦ä¸²æ¯”å¦‚ 11/27/2012 ï¼Œä½ å¯ä»¥è¿™æ ·åš
>
> ```python
> >>> text1 = '11/27/2012'
> >>> text2 = 'Nov 27, 2012'
> >>>
> >>> import re
> >>> # Simple matching: \d+ means match one or more digits
> >>> if re.match(r'\d+/\d+/\d+', text1):
> ... print('yes')
> ... else:
> ... print('no')
> ...
> yes
> >>> if re.match(r'\d+/\d+/\d+', text2):
> ... print('yes')
> ... else:
> ... print('no')
> ...
> no
> ```
>
> å¦‚æœä½ æƒ³ä½¿ç”¨åŒä¸€ä¸ªæ¨¡å¼å»åšå¤šæ¬¡åŒ¹é…ï¼Œä½ åº”è¯¥å…ˆå°†æ¨¡å¼å­—ç¬¦ä¸²é¢„ç¼–è¯‘ä¸ºæ¨¡å¼å¯¹è±¡ã€‚
>
> match() æ€»æ˜¯ä»å­—ç¬¦ä¸²å¼€å§‹å»åŒ¹é…ï¼Œå¦‚æœä½ æƒ³æŸ¥æ‰¾å­—ç¬¦ä¸²ä»»æ„éƒ¨åˆ†çš„æ¨¡å¼å‡ºç°ä½ç½®ï¼Œä½¿ç”¨ findall() æ–¹æ³•å»ä»£æ›¿
>
> åœ¨å®šä¹‰æ­£åˆ™å¼çš„æ—¶å€™ï¼Œé€šå¸¸ä¼šåˆ©ç”¨æ‹¬å·å»æ•è·åˆ†ç»„ã€‚
>
> ```python
>  datepat = re.compile(r'(\d+)/(\d+)/(\d+)')
> ```
>
> æ•è·åˆ†ç»„å¯ä»¥ä½¿å¾—åé¢çš„å¤„ç†æ›´åŠ ç®€å•ï¼Œå› ä¸ºå¯ä»¥åˆ†åˆ«å°†æ¯ä¸ªç»„çš„å†…å®¹æå–å‡ºæ¥ã€‚
>
> ```python
> >>> m = datepat.match('11/27/2012')
> >>> m
> <_sre.SRE_Match object at 0x1005d2750>
> >>> # Extract the contents of each group
> >>> m.group(0)
> '11/27/2012'
> >>> m.group(1)
> '11'
> >>> m.group(2)
> '27'
> >>> m.group(3)
> '2012'
> >>> m.groups()
> ('11', '27', '2012')
> >>> month, day, year = m.groups()
> >>>
> >>> # Find all matches (notice splitting into tuples)
> >>> text
> 'Today is 11/27/2012. PyCon starts 3/13/2013.'
> >>> datepat.findall(text)
> [('11', '27', '2012'), ('3', '13', '2013')]
> >>> for month, day, year in datepat.findall(text):
> ... print('{}-{}-{}'.format(year, month, day))
> ...
> 2012-11-27
> 2013-3-13
> >>>
> ```
>
> findall() æ–¹æ³•ä¼šæœç´¢æ–‡æœ¬å¹¶ä»¥åˆ—è¡¨å½¢å¼è¿”å›æ‰€æœ‰çš„åŒ¹é…ã€‚å¦‚æœä½ æƒ³ä»¥è¿­ä»£æ–¹å¼è¿”å›åŒ¹é…ï¼Œå¯ä»¥ä½¿ç”¨ finditer() æ–¹æ³•æ¥ä»£æ›¿
>
> æ ¸å¿ƒæ­¥éª¤å°±æ˜¯å…ˆä½¿ç”¨ re.compile() ç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ä¸²ï¼Œç„¶åä½¿ç”¨ match() , findall() æˆ–è€… finditer() ç­‰æ–¹æ³•ã€‚

### å­—ç¬¦ä¸²æœç´¢å’Œæ›¿æ¢

> å¯¹äºç®€å•çš„å­—é¢æ¨¡å¼ï¼Œç›´æ¥ä½¿ç”¨ str.replace() æ–¹æ³•å³å¯
>
> å¯¹äºå¤æ‚çš„æ¨¡å¼ï¼Œè¯·ä½¿ç”¨ re æ¨¡å—ä¸­çš„ sub() å‡½æ•°ã€‚ä¸ºäº†è¯´æ˜è¿™ä¸ªï¼Œå‡è®¾ä½ æƒ³å°†å½¢å¼ä¸º 11/27/2012 çš„æ—¥æœŸå­—ç¬¦ä¸²æ”¹æˆ 2012-11-27 ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š
>
> ```python
> >>> text = 'Today is 11/27/2012. PyCon starts 3/13/2013.'
> >>> import re
> >>> re.sub(r'(\d+)/(\d+)/(\d+)', r'\3-\1-\2', text)
> 'Today is 2012-11-27. PyCon starts 2013-3-13.'
> ```
>
> sub() å‡½æ•°ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¢«åŒ¹é…çš„æ¨¡å¼ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ›¿æ¢æ¨¡å¼ã€‚åæ–œæ æ•°å­—æ¯”å¦‚ \3 æŒ‡å‘å‰é¢æ¨¡å¼çš„æ•è·ç»„å·ã€‚
>
> å¯¹äºæ›´åŠ å¤æ‚çš„æ›¿æ¢ï¼Œå¯ä»¥ä¼ é€’ä¸€ä¸ªæ›¿æ¢å›è°ƒå‡½æ•°æ¥ä»£æ›¿
>
> ```python
> >>> from calendar import month_abbr
> >>> def change_date(m):
> ... 	mon_name = month_abbr[int(m.group(1))]
> ... 	return '{} {} {}'.format(m.group(2), mon_name, m.group(3))
> ...
> >>> datepat.sub(change_date, text)
> 'Today is 27 Nov 2012. PyCon starts 13 Mar 2013.'
> >>>
> ```
>
> ä¸€ä¸ªæ›¿æ¢å›è°ƒå‡½æ•°çš„å‚æ•°æ˜¯ä¸€ä¸ª match å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ match() æˆ–è€… find() è¿”å›çš„å¯¹è±¡ã€‚ä½¿ç”¨ group() æ–¹æ³•æ¥æå–ç‰¹å®šçš„åŒ¹é…éƒ¨åˆ†ã€‚å›è°ƒå‡½æ•°æœ€åè¿”å›æ›¿æ¢å­—ç¬¦ä¸²ã€‚
> å¦‚æœé™¤äº†æ›¿æ¢åçš„ç»“æœå¤–ï¼Œä½ è¿˜æƒ³çŸ¥é“æœ‰å¤šå°‘æ›¿æ¢å‘ç”Ÿäº†ï¼Œå¯ä»¥ä½¿ç”¨ re.subn()æ¥ä»£æ›¿ã€‚

### å°† Unicode æ–‡æœ¬æ ‡å‡†åŒ–



###  åˆ é™¤å­—ç¬¦ä¸²ä¸­ä¸éœ€è¦çš„å­—ç¬¦

> å»æ‰æ–‡æœ¬å­—ç¬¦ä¸²å¼€å¤´ï¼Œç»“å°¾æˆ–è€…ä¸­é—´ä¸æƒ³è¦çš„å­—ç¬¦ï¼Œæ¯”å¦‚ç©ºç™½ã€‚
>
> strip() æ–¹æ³•èƒ½ç”¨äºåˆ é™¤å¼€å§‹æˆ–ç»“å°¾çš„å­—ç¬¦ã€‚lstrip() å’Œ rstrip() åˆ†åˆ«ä»å·¦å’Œä»å³æ‰§è¡Œåˆ é™¤æ“ä½œã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™äº›æ–¹æ³•ä¼šå»é™¤ç©ºç™½å­—ç¬¦ï¼Œä½†æ˜¯ä½ ä¹Ÿå¯ä»¥æŒ‡å®šå…¶ä»–å­—ç¬¦ã€‚
>
> ```python
> >>> # Whitespace stripping
> >>> s = ' hello world \n'
> >>> s.strip()
> 'hello world'
> >>> s.lstrip()
> 'hello world \n'
> >>> s.rstrip()
> ' hello world'
> >>>
> >>> # Character stripping
> >>> t = '-----hello====='
> >>> t.lstrip('-')
> 'hello====='
> >>> t.strip('-=')
> 'hello'
> >>>
> ```
>
> è¿™äº› strip() æ–¹æ³•åœ¨è¯»å–å’Œæ¸…ç†æ•°æ®ä»¥å¤‡åç»­å¤„ç†çš„æ—¶å€™æ˜¯ç»å¸¸ä¼šè¢«ç”¨åˆ°çš„ã€‚æ¯”å¦‚ï¼Œä½ å¯ä»¥ç”¨å®ƒä»¬æ¥å»æ‰ç©ºæ ¼ï¼Œå¼•å·å’Œå®Œæˆå…¶ä»–ä»»åŠ¡ã€‚
> ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯å»é™¤æ“ä½œä¸ä¼šå¯¹å­—ç¬¦ä¸²çš„ä¸­é—´çš„æ–‡æœ¬äº§ç”Ÿä»»ä½•å½±å“ã€‚
>
> å¦‚æœä½ æƒ³å¤„ç†ä¸­é—´çš„ç©ºæ ¼ï¼Œé‚£ä¹ˆä½ éœ€è¦æ±‚åŠ©å…¶ä»–æŠ€æœ¯ã€‚æ¯”å¦‚ä½¿ç”¨ replace() æ–¹æ³•æˆ–è€…æ˜¯ç”¨æ­£åˆ™è¡¨è¾¾å¼æ›¿æ¢ã€‚

### å®¡æŸ¥æ¸…ç†æ–‡æœ¬å­—ç¬¦ä¸²

> ä¸€äº›æ— èŠçš„å¹¼ç¨šé»‘å®¢åœ¨ä½ çš„ç½‘ç«™é¡µé¢è¡¨å•ä¸­è¾“å…¥æ–‡æœ¬â€pÃ½tÄ¥Ã¶Ã±â€ï¼Œç„¶åä½ æƒ³å°†è¿™äº›å­—ç¬¦æ¸…ç†æ‰ã€‚
>
> æ–‡æœ¬æ¸…ç†é—®é¢˜ä¼šæ¶‰åŠåˆ°åŒ…æ‹¬æ–‡æœ¬è§£æä¸æ•°æ®å¤„ç†ç­‰ä¸€ç³»åˆ—é—®é¢˜ã€‚åœ¨éå¸¸ç®€å•çš„æƒ…å½¢ä¸‹ï¼Œä½ å¯èƒ½ä¼šé€‰æ‹©ä½¿ç”¨å­—ç¬¦ä¸²å‡½æ•° (æ¯”å¦‚ str.upper() å’Œ str.lower() ) å°†æ–‡æœ¬è½¬ä¸ºæ ‡å‡†æ ¼å¼ã€‚ä½¿ç”¨ str.replace() æˆ–è€… re.sub() çš„ç®€å•æ›¿æ¢æ“ä½œèƒ½åˆ é™¤æˆ–è€…æ”¹å˜æŒ‡å®šçš„å­—ç¬¦åºåˆ—ã€‚ä½ åŒæ ·è¿˜å¯ä»¥ä½¿ç”¨ 2.9 å°èŠ‚çš„ unicodedata.normalize() å‡½æ•°å°† nicode
> æ–‡æœ¬æ ‡å‡†åŒ–ã€‚
>
> 

### å­—ç¬¦ä¸²å¯¹é½

>å¯¹äºåŸºæœ¬çš„å­—ç¬¦ä¸²å¯¹é½æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²çš„ ljust() , rjust() å’Œ center()æ–¹æ³•ã€‚
>
>```python
>>>> text = 'Hello World'
>>>> text.ljust(20)
>'Hello World '
>>>> text.rjust(20)
>' Hello World'
>>>> text.center(20)
>' Hello World '
>```
>
>æ‰€æœ‰è¿™äº›æ–¹æ³•éƒ½èƒ½æ¥å—ä¸€ä¸ªå¯é€‰çš„å¡«å……å­—ç¬¦ã€‚
>
>```python
>>>> text.rjust(20,'=')
>'=========Hello World'
>>>> text.center(20,'*')
>'****Hello World*****'
>```
>
>å‡½æ•° format() åŒæ ·å¯ä»¥ç”¨æ¥å¾ˆå®¹æ˜“çš„å¯¹é½å­—ç¬¦ä¸²ã€‚ä½ è¦åšçš„å°±æ˜¯ä½¿ç”¨ <,> æˆ–è€… ^å­—ç¬¦åé¢ç´§è·Ÿä¸€ä¸ªæŒ‡å®šçš„å®½åº¦ã€‚
>
>```python
>>>> format(text, '>20')
>' Hello World'
>>>> format(text, '<20')
>'Hello World '
>>>> format(text, '^20')
>' Hello World '
>>>>
>```
>
>å¦‚æœä½ æƒ³æŒ‡å®šä¸€ä¸ªéç©ºæ ¼çš„å¡«å……å­—ç¬¦ï¼Œå°†å®ƒå†™åˆ°å¯¹é½å­—ç¬¦çš„å‰é¢å³å¯
>
>````python
>>>> format(text, '=>20s')
>'=========Hello World'
>>>> format(text, '*^20s')
>'****Hello World*****'
>````
>
>å½“æ ¼å¼åŒ–å¤šä¸ªå€¼çš„æ—¶å€™ï¼Œè¿™äº›æ ¼å¼ä»£ç ä¹Ÿå¯ä»¥è¢«ç”¨åœ¨ format() æ–¹æ³•ä¸­ã€‚
>
>```python
>>>> '{:>10s} {:>10s}'.format('Hello', 'World')
>' Hello World'
>```
>
>format() å‡½æ•°çš„ä¸€ä¸ªå¥½å¤„æ˜¯å®ƒä¸ä»…é€‚ç”¨äºå­—ç¬¦ä¸²ã€‚å®ƒå¯ä»¥ç”¨æ¥æ ¼å¼åŒ–ä»»ä½•å€¼ï¼Œä½¿å¾—å®ƒéå¸¸çš„é€šç”¨ã€‚æ¯”å¦‚ï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥æ ¼å¼åŒ–æ•°å­—ï¼š
>
>````python
>>>> x = 1.2345
>>>> format(x, '>10')
>' 1.2345'
>>>> format(x, '^10.2f')
>' 1.23 '
>````
>
>åœ¨æ–°ç‰ˆæœ¬ä»£ç ä¸­ï¼Œä½ åº”è¯¥ä¼˜å…ˆé€‰æ‹© format() å‡½æ•°æˆ–è€…æ–¹æ³•ã€‚format() è¦æ¯”% æ“ä½œç¬¦çš„åŠŸèƒ½æ›´ä¸ºå¼ºå¤§ã€‚å¹¶ä¸” format() ä¹Ÿæ¯”ä½¿ç”¨ ljust() , rjust() æˆ– center() æ–¹æ³•æ›´é€šç”¨ï¼Œå› ä¸ºå®ƒå¯ä»¥ç”¨æ¥æ ¼å¼åŒ–ä»»æ„å¯¹è±¡ï¼Œè€Œä¸ä»…ä»…æ˜¯å­—ç¬¦ä¸²ã€‚

### ä»¥æŒ‡å®šåˆ—å®½æ ¼å¼åŒ–å­—ç¬¦ä¸²

> ä½¿ç”¨ textwrap æ¨¡å—æ¥æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„è¾“å‡ºã€‚æ¯”å¦‚ï¼Œå‡å¦‚ä½ æœ‰ä¸‹åˆ—çš„é•¿å­—ç¬¦ä¸²ï¼š
>
> ```python
> s = "Look into my eyes, look into my eyes, the eyes, the eyes, \
> the eyes, not around the eyes, don't look around the eyes, \
> look into my eyes, you're under."
> ```
>
> ä¸‹é¢æ¼”ç¤ºä½¿ç”¨ textwrap æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„å¤šç§æ–¹å¼ï¼š
>
> ```python
> >>> import textwrap
> >>> print(textwrap.fill(s, 70))
> Look into my eyes, look into my eyes, the eyes, the eyes, the eyes,
> not around the eyes, don't look around the eyes, look into my eyes,
> you're under.
> >>> print(textwrap.fill(s, 40))
> Look into my eyes, look into my eyes,
> the eyes, the eyes, the eyes, not around
> the eyes, don't look around the eyes,
> look into my eyes, you're under.
> >>> print(textwrap.fill(s, 40, initial_indent=' '))
> Look into my eyes, look into my
> eyes, the eyes, the eyes, the eyes, not
> around the eyes, don't look around the
> eyes, look into my eyes, you're under.
> >>> print(textwrap.fill(s, 40, subsequent_indent=' '))
> Look into my eyes, look into my eyes,
> the eyes, the eyes, the eyes, not
> around the eyes, don't look around
> the eyes, look into my eyes, you're
> under.
> ```
>
> textwrap æ¨¡å—å¯¹äºå­—ç¬¦ä¸²æ‰“å°æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œç‰¹åˆ«æ˜¯å½“ä½ å¸Œæœ›è¾“å‡ºè‡ªåŠ¨åŒ¹é…ç»ˆç«¯å¤§å°çš„æ—¶å€™ã€‚ä½ å¯ä»¥ä½¿ç”¨ os.get_terminal_size() æ–¹æ³•æ¥è·å–ç»ˆç«¯çš„å¤§å°å°ºå¯¸ã€‚
>
> ```python
> >>> import os
> >>> os.get_terminal_size().columns
> 80
> ```
>
> fill() æ–¹æ³•æ¥å—ä¸€äº›å…¶ä»–å¯é€‰å‚æ•°æ¥æ§åˆ¶ tabï¼Œè¯­å¥ç»“å°¾ç­‰ã€‚

### åœ¨å­—ç¬¦ä¸²ä¸­å¤„ç† html å’Œ xml



### å­—ç¬¦ä¸²ä»¤ç‰Œè§£æ



## è¿­ä»£å™¨ä¸ç”Ÿæˆå™¨

### é¡ºåºè¿­ä»£åˆå¹¶åçš„æ’åºè¿­ä»£å¯¹è±¡

> æœ‰ä¸€ç³»åˆ—æ’åºåºåˆ—ï¼Œæƒ³å°†å®ƒä»¬åˆå¹¶åå¾—åˆ°ä¸€ä¸ªæ’åºåºåˆ—å¹¶åœ¨ä¸Šé¢è¿­ä»£éå†
>
> heapq.merge() å‡½æ•°å¯ä»¥å¸®ä½ è§£å†³è¿™ä¸ªé—®é¢˜
>
> ```python
> >>> import heapq
> >>> a = [1, 4, 7, 10]
> >>> b = [2, 5, 6, 11]
> >>> for c in heapq.merge(a, b):
> ... print(c)
> ...
> 1
> 2
> 4
> 5
> 6
> 7
> 10
> 11
> ```
>
> heapq.merge å¯è¿­ä»£ç‰¹æ€§æ„å‘³ç€å®ƒä¸ä¼šç«‹é©¬è¯»å–æ‰€æœ‰åºåˆ—ã€‚è¿™å°±æ„å‘³ç€ä½ å¯ä»¥åœ¨éå¸¸é•¿çš„åºåˆ—ä¸­ä½¿ç”¨å®ƒï¼Œè€Œä¸ä¼šæœ‰å¤ªå¤§çš„å¼€é”€ã€‚
>
> è¦å¼ºè°ƒçš„æ˜¯ heapq.merge() éœ€è¦æ‰€æœ‰è¾“å…¥åºåˆ—å¿…é¡»æ˜¯æ’è¿‡åºçš„ã€‚ç‰¹åˆ«çš„ï¼Œå®ƒå¹¶ä¸ä¼šé¢„å…ˆè¯»å–æ‰€æœ‰æ•°æ®åˆ°å †æ ˆä¸­æˆ–è€…é¢„å…ˆæ’åºï¼Œä¹Ÿä¸ä¼šå¯¹è¾“å…¥åšä»»ä½•çš„æ’åºæ£€æµ‹ã€‚
>
> å®ƒä»…ä»…æ˜¯æ£€æŸ¥æ‰€æœ‰åºåˆ—çš„å¼€å§‹éƒ¨åˆ†å¹¶è¿”å›æœ€å°çš„é‚£ä¸ªï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸€ç›´ä¼šæŒç»­ç›´åˆ°æ‰€æœ‰è¾“å…¥åºåˆ—ä¸­çš„å…ƒç´ éƒ½è¢«éå†å®Œã€‚



## æ–‡ä»¶ä¸ IO





## æ•°æ®ç¼–ç å’Œå¤„ç†



## å‡½æ•°

### ç»™å‡½æ•°å‚æ•°å¢åŠ å…ƒä¿¡æ¯

> å†™å¥½äº†ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åæƒ³ä¸ºè¿™ä¸ªå‡½æ•°çš„å‚æ•°å¢åŠ ä¸€äº›é¢å¤–çš„ä¿¡æ¯ï¼Œè¿™æ ·çš„è¯å…¶ä»–ä½¿ç”¨è€…å°±èƒ½æ¸…æ¥šçš„çŸ¥é“è¿™ä¸ªå‡½æ•°åº”è¯¥æ€ä¹ˆä½¿ç”¨ã€‚
>
> ä½¿ç”¨å‡½æ•°å‚æ•°æ³¨è§£æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„åŠæ³•ï¼Œå®ƒèƒ½æç¤ºç¨‹åºå‘˜åº”è¯¥æ€æ ·æ­£ç¡®ä½¿ç”¨è¿™ä¸ªå‡½æ•°ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢æœ‰ä¸€ä¸ªè¢«æ³¨è§£äº†çš„å‡½æ•°ï¼š
>
> ```python
> def add(x:int, y:int) -> int:
> 	return x + y
> ```
>
> python è§£é‡Šå™¨ä¸ä¼šå¯¹è¿™äº›æ³¨è§£æ·»åŠ ä»»ä½•çš„è¯­ä¹‰ã€‚å®ƒä»¬ä¸ä¼šè¢«ç±»å‹æ£€æŸ¥ï¼Œè¿è¡Œæ—¶è·Ÿæ²¡æœ‰åŠ æ³¨è§£ä¹‹å‰çš„æ•ˆæœä¹Ÿæ²¡æœ‰ä»»ä½•å·®è·ã€‚
>
> å°½ç®¡ä½ å¯ä»¥ä½¿ç”¨ä»»æ„ç±»å‹çš„å¯¹è±¡ç»™å‡½æ•°æ·»åŠ æ³¨è§£ (ä¾‹å¦‚æ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œå¯¹è±¡å®ä¾‹ç­‰ç­‰)ï¼Œä¸è¿‡é€šå¸¸æ¥è®²ä½¿ç”¨ç±»æˆ–è€…å­—ç¬¦ä¸²ä¼šæ¯”è¾ƒå¥½ç‚¹ã€‚
>
> å‡½æ•°æ³¨è§£åªå­˜å‚¨åœ¨å‡½æ•°çš„ \_\_annotations\_\_ å±æ€§ä¸­
>
> ```python
> >>> add.__annotations__
> {'y': <class 'int'>, 'return': <class 'int'>, 'x': <class 'int'>}
> ```
>
> å°½ç®¡æ³¨è§£çš„ä½¿ç”¨æ–¹æ³•å¯èƒ½æœ‰å¾ˆå¤šç§ï¼Œä½†æ˜¯å®ƒä»¬çš„ä¸»è¦ç”¨é€”è¿˜æ˜¯æ–‡æ¡£ã€‚
>
> å› ä¸º pythonå¹¶æ²¡æœ‰ç±»å‹å£°æ˜ï¼Œé€šå¸¸æ¥è®²ä»…ä»…é€šè¿‡é˜…è¯»æºç å¾ˆéš¾çŸ¥é“åº”è¯¥ä¼ é€’ä»€ä¹ˆæ ·çš„å‚æ•°ç»™è¿™ä¸ªå‡½æ•°ã€‚
>
> è¿™æ—¶å€™ä½¿ç”¨æ³¨è§£å°±èƒ½ç»™ç¨‹åºå‘˜æ›´å¤šçš„æç¤ºï¼Œè®©ä»–ä»¬å¯ä»¥æ­£ç¡®çš„ä½¿ç”¨å‡½æ•°ã€‚
>
> **ps**ï¼šè¿™é‡Œå¯ä»¥ç»“åˆå…ƒç±»ï¼Œä¸ºå‚æ•°åšç±»å‹æ£€æµ‹ï¼ˆnarutohycä¸ªäººæƒ³æ³•ï¼Œè¿˜æœªå®ç°ï¼‰

### å°†å•æ–¹æ³•çš„ç±»è½¬æ¢ä¸ºå‡½æ•°

> ä½ æœ‰ä¸€ä¸ªé™¤ \_\_init\_\_() æ–¹æ³•å¤–åªå®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•çš„ç±»ã€‚ä¸ºäº†ç®€åŒ–ä»£ç ï¼Œä½ æƒ³å°†å®ƒè½¬æ¢æˆä¸€ä¸ªå‡½æ•°
>
> ```python
> def urltemplate(template):
>     def opener(**kwargs):
>     	return urlopen(template.format_map(kwargs))
>     return opener
> # Example use
> yahoo = urltemplate('http://finance.yahoo.com/d/quotes.csv?s={names}&f=,â†’ {fields}')
> ```
>
> å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œä½ æ‹¥æœ‰ä¸€ä¸ªå•æ–¹æ³•ç±»çš„åŸå› æ˜¯éœ€è¦å­˜å‚¨æŸäº›é¢å¤–çš„çŠ¶æ€æ¥ç»™æ–¹æ³•ä½¿ç”¨ã€‚
>
> 

### å¸¦é¢å¤–çŠ¶æ€ä¿¡æ¯çš„å›è°ƒå‡½æ•°

>ä½ çš„ä»£ç ä¸­éœ€è¦ä¾èµ–åˆ°å›è°ƒå‡½æ•°çš„ä½¿ç”¨ (æ¯”å¦‚äº‹ä»¶å¤„ç†å™¨ã€ç­‰å¾…åå°ä»»åŠ¡å®Œæˆåçš„å›è°ƒç­‰)ï¼Œå¹¶ä¸”ä½ è¿˜éœ€è¦è®©å›è°ƒå‡½æ•°æ‹¥æœ‰é¢å¤–çš„çŠ¶æ€å€¼ï¼Œä»¥ä¾¿åœ¨å®ƒçš„å†…éƒ¨ä½¿ç”¨åˆ°ã€‚
>
>

### å†…è”å›è°ƒå‡½æ•°

> å½“ä½ ç¼–å†™ä½¿ç”¨å›è°ƒå‡½æ•°çš„ä»£ç çš„æ—¶å€™ï¼Œæ‹…å¿ƒå¾ˆå¤šå°å‡½æ•°çš„æ‰©å¼ å¯èƒ½ä¼šå¼„ä¹±ç¨‹åºæ§åˆ¶æµã€‚ä½ å¸Œæœ›æ‰¾åˆ°æŸä¸ªæ–¹æ³•æ¥è®©ä»£ç çœ‹ä¸Šå»æ›´åƒæ˜¯ä¸€ä¸ªæ™®é€šçš„æ‰§è¡Œåºåˆ—ã€‚
>
> é€šè¿‡ä½¿ç”¨ç”Ÿæˆå™¨å’Œåç¨‹å¯ä»¥ä½¿å¾—å›è°ƒå‡½æ•°å†…è”åœ¨æŸä¸ªå‡½æ•°ä¸­ã€‚
>
> ä¸ºäº†æ¼”ç¤ºè¯´æ˜ï¼Œå‡è®¾ä½ æœ‰å¦‚ä¸‹æ‰€ç¤ºçš„ä¸€ä¸ªæ‰§è¡ŒæŸç§è®¡ç®—ä»»åŠ¡ç„¶åè°ƒç”¨ä¸€ä¸ªå›è°ƒå‡½æ•°çš„å‡½æ•°
>
> ```python
> def apply_async(func, args, *, callback):
>     # Compute the result
>     result = func(*args)
>     # Invoke the callback with the result
>     callback(result)
> ```
>
> æ¥ä¸‹æ¥è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ä¸‹é¢çš„ä»£ç ï¼Œå®ƒåŒ…å«äº†ä¸€ä¸ª Async ç±»å’Œä¸€ä¸ª inlined_asyncè£…é¥°å™¨ï¼š
>
> ```python
> from queue import Queue
> from functools import wraps
> 
> 
> class Async:
>     def __init__(self, func, args):
>         self.func = func
>         self.args = args
> 
> 
> def inlined_async(func):
>     @wraps(func)
>     def wrapper(*args):
>         f = func(*args)
>         result_queue = Queue()
>         result_queue.put(None)
>         while True:
>             result = result_queue.get()
>             try:
>                 a = f.send(result)
>                 apply_async(a.func, a.args, callback=result_queue.put)
>             except StopIteration:
>                 break
> 
>     return wrapper
> ```
>
> è¿™ä¸¤ä¸ªä»£ç ç‰‡æ®µå…è®¸ä½ ä½¿ç”¨ yield è¯­å¥å†…è”å›è°ƒæ­¥éª¤ã€‚æ¯”å¦‚ï¼š
>
> ```python
> def add(x, y):
>     return x + y
> @inlined_async
> def test():
>     r = yield Async(add, (2, 3))
>     print(r)
>     r = yield Async(add, ('hello', 'world'))
>     print(r)
>     for n in range(10):
>         r = yield Async(add, (n, n))
>         print(r)
>     print('Goodbye')
> ```
>
> å¦‚æœä½ è°ƒç”¨ test() ï¼Œä½ ä¼šå¾—åˆ°ç±»ä¼¼å¦‚ä¸‹çš„è¾“å‡ºï¼š
>
> ```python
> 5
> helloworld
> 0
> 2
> 4
> 6
> 8
> 10
> 12
> 14
> 16
> 18
> Goodbye
> ```
>
> ä½ ä¼šå‘ç°ï¼Œé™¤äº†é‚£ä¸ªç‰¹åˆ«çš„è£…é¥°å™¨å’Œ yield è¯­å¥å¤–ï¼Œå…¶ä»–åœ°æ–¹å¹¶æ²¡æœ‰å‡ºç°ä»»ä½•çš„å›è°ƒå‡½æ•° (å…¶å®æ˜¯åœ¨åå°å®šä¹‰çš„)ã€‚

> æœ¬å°èŠ‚ä¼šå®å®åœ¨åœ¨çš„æµ‹è¯•ä½ å…³äºå›è°ƒå‡½æ•°ã€ç”Ÿæˆå™¨å’Œæ§åˆ¶æµçš„çŸ¥è¯†ã€‚
> é¦–å…ˆï¼Œåœ¨éœ€è¦ä½¿ç”¨åˆ°å›è°ƒçš„ä»£ç ä¸­ï¼Œå…³é”®ç‚¹åœ¨äºå½“å‰è®¡ç®—å·¥ä½œä¼šæŒ‚èµ·å¹¶åœ¨å°†æ¥çš„æŸä¸ªæ—¶å€™é‡å¯ (æ¯”å¦‚å¼‚æ­¥æ‰§è¡Œ)ã€‚å½“è®¡ç®—é‡å¯æ—¶ï¼Œå›è°ƒå‡½æ•°è¢«è°ƒç”¨æ¥ç»§ç»­å¤„ç†ç»“æœã€‚apply_async() å‡½æ•°æ¼”ç¤ºäº†æ‰§è¡Œå›è°ƒçš„å®é™…é€»è¾‘ï¼Œå°½ç®¡å®é™…æƒ…å†µä¸­å®ƒå¯èƒ½ä¼šæ›´åŠ å¤æ‚(åŒ…æ‹¬çº¿ç¨‹ã€è¿›ç¨‹ã€äº‹ä»¶å¤„ç†å™¨ç­‰ç­‰)ã€‚
> è®¡ç®—çš„æš‚åœä¸é‡å¯æ€è·¯è·Ÿç”Ÿæˆå™¨å‡½æ•°çš„æ‰§è¡Œæ¨¡å‹ä¸è°‹è€Œåˆã€‚å…·ä½“æ¥è®²ï¼Œyield æ“ä½œä¼šä½¿ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°äº§ç”Ÿä¸€ä¸ªå€¼å¹¶æš‚åœã€‚æ¥ä¸‹æ¥è°ƒç”¨ç”Ÿæˆå™¨çš„ \_\_next\_\_() æˆ– send()æ–¹æ³•åˆä¼šè®©å®ƒä»æš‚åœå¤„ç»§ç»­æ‰§è¡Œã€‚
> æ ¹æ®è¿™ä¸ªæ€è·¯ï¼Œè¿™ä¸€å°èŠ‚çš„æ ¸å¿ƒå°±åœ¨ inline_async() è£…é¥°å™¨å‡½æ•°ä¸­äº†ã€‚å…³é”®ç‚¹å°±æ˜¯ï¼Œè£…é¥°å™¨ä¼šé€æ­¥éå†ç”Ÿæˆå™¨å‡½æ•°çš„æ‰€æœ‰ yield è¯­å¥ï¼Œæ¯ä¸€æ¬¡ä¸€ä¸ªã€‚ä¸ºäº†è¿™æ ·åšï¼Œåˆšå¼€å§‹çš„æ—¶å€™åˆ›å»ºäº†ä¸€ä¸ª result é˜Ÿåˆ—å¹¶å‘é‡Œé¢æ”¾å…¥ä¸€ä¸ª None å€¼ã€‚ç„¶åå¼€å§‹ä¸€ä¸ªå¾ªç¯æ“ä½œï¼Œä»é˜Ÿåˆ—ä¸­å–å‡ºç»“æœå€¼å¹¶å‘é€ç»™ç”Ÿæˆå™¨ï¼Œå®ƒä¼šæŒç»­åˆ°ä¸‹ä¸€ä¸ª yield è¯­å¥ï¼Œåœ¨è¿™é‡Œä¸€ä¸ª Async çš„å®ä¾‹è¢«æ¥å—åˆ°ã€‚ç„¶åå¾ªç¯å¼€å§‹æ£€æŸ¥å‡½æ•°å’Œå‚æ•°ï¼Œå¹¶å¼€å§‹è¿›è¡Œå¼‚æ­¥è®¡ç®—apply_async() ã€‚ç„¶è€Œï¼Œè¿™ä¸ªè®¡ç®—æœ‰ä¸ªæœ€è¯¡å¼‚éƒ¨åˆ†æ˜¯å®ƒå¹¶æ²¡æœ‰ä½¿ç”¨ä¸€ä¸ªæ™®é€šçš„å›è°ƒå‡½æ•°ï¼Œè€Œæ˜¯ç”¨é˜Ÿåˆ—çš„ put() æ–¹æ³•æ¥å›è°ƒã€‚
> è¿™æ—¶å€™ï¼Œæ˜¯æ—¶å€™è¯¦ç»†è§£é‡Šä¸‹åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆäº†ã€‚ä¸»å¾ªç¯ç«‹å³è¿”å›é¡¶éƒ¨å¹¶åœ¨é˜Ÿåˆ—ä¸Šæ‰§è¡Œ get() æ“ä½œã€‚å¦‚æœæ•°æ®å­˜åœ¨ï¼Œå®ƒä¸€å®šæ˜¯ put() å›è°ƒå­˜æ”¾çš„ç»“æœã€‚å¦‚æœæ²¡æœ‰æ•°æ®ï¼Œé‚£ä¹ˆå…ˆæš‚åœæ“ä½œå¹¶ç­‰å¾…ç»“æœçš„åˆ°æ¥ã€‚è¿™ä¸ªå…·ä½“æ€æ ·å®ç°æ˜¯ç”± apply_async() å‡½æ•°æ¥å†³å®šçš„ã€‚å¦‚æœä½ ä¸ç›¸ä¿¡ä¼šæœ‰è¿™ä¹ˆç¥å¥‡çš„äº‹æƒ…ï¼Œä½ å¯ä»¥ä½¿ç”¨ multiprocessing åº“æ¥è¯•ä¸€ä¸‹ï¼Œåœ¨å•ç‹¬çš„è¿›ç¨‹ä¸­æ‰§è¡Œå¼‚æ­¥è®¡ç®—æ“ä½œï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
>
> ```python
> if __name__ == '__main__':
>     import multiprocessing
>     pool = multiprocessing.Pool()
>     apply_async = pool.apply_async
>     # Run the test function
>     test()
> ```
>
> å®é™…ä¸Šä½ ä¼šå‘ç°è¿™ä¸ªçœŸçš„å°±æ˜¯è¿™æ ·çš„ï¼Œä½†æ˜¯è¦è§£é‡Šæ¸…æ¥šå…·ä½“çš„æ§åˆ¶æµå¾—éœ€è¦ç‚¹æ—¶é—´äº†ã€‚
> å°†å¤æ‚çš„æ§åˆ¶æµéšè—åˆ°ç”Ÿæˆå™¨å‡½æ•°èƒŒåçš„ä¾‹å­åœ¨æ ‡å‡†åº“å’Œç¬¬ä¸‰æ–¹åŒ…ä¸­éƒ½èƒ½çœ‹åˆ°ã€‚æ¯”å¦‚ï¼Œåœ¨ contextlib ä¸­çš„ @contextmanager è£…é¥°å™¨ä½¿ç”¨äº†ä¸€ä¸ªä»¤äººè´¹è§£çš„æŠ€å·§ï¼Œé€šè¿‡ä¸€ä¸ª yield è¯­å¥å°†è¿›å…¥å’Œç¦»å¼€ä¸Šä¸‹æ–‡ç®¡ç†å™¨ç²˜åˆåœ¨ä¸€èµ·ã€‚å¦å¤–éå¸¸æµè¡Œçš„ Twisted åŒ…ä¸­ä¹ŸåŒ…å«äº†éå¸¸ç±»ä¼¼çš„å†…è”å›è°ƒã€‚



### è®¿é—®é—­åŒ…ä¸­å®šä¹‰çš„å˜é‡



## ç±»ä¸å¯¹è±¡





## å…ƒç¼–ç¨‹



# pycharmåŸºç¡€è®¾ç½®

> å¦‚æœå·²ç»æœ‰setting.zipå¯ä»¥ç›´æ¥å¯¼å…¥å³å¯
>
> ./res/5. pythonåŸºç¡€çŸ¥è¯†/settings.zip

## pycharmæ¿€æ´»

> [idea PyCharm å…¨å®¶æ¡¶æ¿€æ´»ç  - lookdiv](http://lookdiv.com/)
>
> ç§˜é’¥: lookdiv.com

## gité…ç½®

> é…ç½®gitè·¯å¾„
>
> Setting->Version Control->git
>
> Path to Git executable: S:\Git\cmd\git.exe

## pythonæ¨¡æ¿è®¾ç½®

æ‰“å¼€Setting->Editor->File and Code Templates->Files->Python Script

é…ç½®å¦‚ä¸‹ä¿¡æ¯(ä¿®æ”¹ä½œè€…åï¼Œå…¶ä»–æ— éœ€ä¿®æ”¹)ï¼š

```python
#!/usr/bin/env Python
# -- coding: utf-8 --

"""
@version: v0.1
@author: narutohyc
@file: ${NAME}.py
@Description: 
@time: ${DATE} ${TIME}
"""


```

## å¿«æ·é”®è®¾ç½®

| æ“ä½œ                | å¿«æ·é”®              | è¡¥å……è¯´æ˜                                                |
| ------------------- | ------------------- | ------------------------------------------------------- |
| Reformat Code       | Ctrl+Alt+F          | æ ¼å¼åŒ–ä»£ç                                               |
| Close               | Ctrl+R              | å…³é—­å½“å‰pyæ–‡ä»¶çª—å£                                      |
| Split Vertically    | Ctrl+Shift+å‘å³ç®­å¤´ | å‚ç›´åˆ‡åˆ†çª—å£                                            |
| Split Horizontally  | Ctrl+Shift+å‘å·¦ç®­å¤´ | æ°´å¹³åˆ‡åˆ†çª—å£                                            |
| Git Pull            | Ctrl+Shift+L        | git pull                                                |
| Git commit File     | Ctrl+K              | git commit                                              |
| Git Commit and push | Ctrl+Shift+K        | git push                                                |
| Change font size    |                     | ctrl+N->Actions->Change font size with Ctrl+Mouse Wheel |
| Show in Explorer    | Crtl+Shift+S        |                                                         |
|                     |                     |                                                         |



# é¡¹ç›®ä¾èµ–

## å¯¼å‡ºä¾èµ–

> å®‰è£…pipreqs

```cmd
pip install pipreqs
```

> å¯¼å‡ºä¾èµ–, å¼ºåˆ¶è¦†ç›–åŸå…ˆçš„ä¾èµ–

```cmd
pipreqs ./  --encoding=utf8 --force
```

## å®‰è£…ä¾èµ–

> å®‰è£…ä¾èµ–åº“

```cmd
pip install -r requirements.txt
```

### ç¦»çº¿å®‰è£…

> å•ä¸ªä¸‹è½½

```cmd
pip download package_name -d "ä¸‹è½½çš„è·¯å¾„(windowsä¸‹åŒå¼•å·æ¥è¡¨ç¤ºæ–‡ä»¶å¤¹)"
```

> æ‰¹é‡ä¸‹è½½

```cmd
pip download -d /tmp/packages -r requirements.txt
```

> æ‰¹é‡å®‰è£…å·²ç»å¯¼å‡ºçš„åŒ…
>
> å…¶ä¸­ --no-index ä»£è¡¨å¿½è§†pip å¿½è§†é»˜è®¤çš„ä¾èµ–åŒ…ç´¢å¼•
>
> --find-links= ä»£è¡¨ä»ä½ æŒ‡å®šçš„ç›®å½•å¯»ä¸‹æ‰¾ç¦»çº¿åŒ… 

```cmd
pip install --no-index --find-links=/tmp/packages -r requirements.txt
```

# Nginx

> [Nginxå¿«é€Ÿå…¥é—¨](https://www.kuangstudy.com/bbs/1353634800149213186)

## ä»€ä¹ˆæ˜¯Nginxï¼Ÿ

Nginx (engine x) æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„HTTPå’Œåå‘ä»£ç†webæœåŠ¡å™¨ï¼ŒåŒæ—¶ä¹Ÿæä¾›äº†IMAP/POP3/SMTPæœåŠ¡ã€‚Nginxæ˜¯ç”±ä¼Šæˆˆå°”Â·èµ›ç´¢è€¶å¤«ä¸ºä¿„ç½—æ–¯è®¿é—®é‡ç¬¬äºŒçš„Rambler.ruç«™ç‚¹ï¼ˆä¿„æ–‡ï¼šĞ Ğ°Ğ¼Ğ±Ğ»ĞµÑ€ï¼‰å¼€å‘çš„ï¼Œç¬¬ä¸€ä¸ªå…¬å¼€ç‰ˆæœ¬0.1.0å‘å¸ƒäº2004å¹´10æœˆ4æ—¥ã€‚2011å¹´6æœˆ1æ—¥ï¼Œnginx 1.0.4å‘å¸ƒã€‚

å…¶ç‰¹ç‚¹æ˜¯å æœ‰å†…å­˜å°‘ï¼Œå¹¶å‘èƒ½åŠ›å¼ºï¼Œäº‹å®ä¸Šnginxçš„å¹¶å‘èƒ½åŠ›åœ¨åŒç±»å‹çš„ç½‘é¡µæœåŠ¡å™¨ä¸­è¡¨ç°è¾ƒå¥½ï¼Œä¸­å›½å¤§é™†ä½¿ç”¨nginxç½‘ç«™ç”¨æˆ·æœ‰ï¼šç™¾åº¦ã€äº¬ä¸œã€æ–°æµªã€ç½‘æ˜“ã€è…¾è®¯ã€æ·˜å®ç­‰ã€‚åœ¨å…¨çƒæ´»è·ƒçš„ç½‘ç«™ä¸­æœ‰12.18%çš„ä½¿ç”¨æ¯”ç‡ï¼Œå¤§çº¦ä¸º2220ä¸‡ä¸ªç½‘ç«™ã€‚

Nginx æ˜¯ä¸€ä¸ªå®‰è£…éå¸¸çš„ç®€å•ã€é…ç½®æ–‡ä»¶éå¸¸ç®€æ´ï¼ˆè¿˜èƒ½å¤Ÿæ”¯æŒperlè¯­æ³•ï¼‰ã€Bugéå¸¸å°‘çš„æœåŠ¡ã€‚Nginx å¯åŠ¨ç‰¹åˆ«å®¹æ˜“ï¼Œå¹¶ä¸”å‡ ä¹å¯ä»¥åšåˆ°7*24ä¸é—´æ–­è¿è¡Œï¼Œå³ä½¿è¿è¡Œæ•°ä¸ªæœˆä¹Ÿä¸éœ€è¦é‡æ–°å¯åŠ¨ã€‚ä½ è¿˜èƒ½å¤Ÿä¸é—´æ–­æœåŠ¡çš„æƒ…å†µä¸‹è¿›è¡Œè½¯ä»¶ç‰ˆæœ¬çš„å‡çº§ã€‚

Nginxä»£ç å®Œå…¨ç”¨Cè¯­è¨€ä»å¤´å†™æˆã€‚å®˜æ–¹æ•°æ®æµ‹è¯•è¡¨æ˜èƒ½å¤Ÿæ”¯æŒé«˜è¾¾ 50,000 ä¸ªå¹¶å‘è¿æ¥æ•°çš„å“åº”ã€‚

## Nginxä½œç”¨

### Httpä»£ç†

> Httpä»£ç†ï¼Œåå‘ä»£ç†ï¼šä½œä¸ºwebæœåŠ¡å™¨æœ€å¸¸ç”¨çš„åŠŸèƒ½ä¹‹ä¸€ï¼Œå°¤å…¶æ˜¯åå‘ä»£ç†ã€‚

æ­£å‘ä»£ç†

![img](https://pic.hycbook.com/i/hexo/bk_resources/python/14.pythonåŸºç¡€çŸ¥è¯†/kuangstudy46bdad36-d3e0-43b0-a223-43360b7e8fc7.webp)
åå‘ä»£ç†

![img](https://pic.hycbook.com/i/hexo/bk_resources/python/14.pythonåŸºç¡€çŸ¥è¯†/kuangstudy62a15097-6e2a-4dbe-bcf5-f0d7cab81089.webp)
### è´Ÿè½½å‡è¡¡

> Nginxæä¾›çš„è´Ÿè½½å‡è¡¡ç­–ç•¥æœ‰2ç§ï¼šå†…ç½®ç­–ç•¥å’Œæ‰©å±•ç­–ç•¥ã€‚å†…ç½®ç­–ç•¥ä¸ºè½®è¯¢ï¼ŒåŠ æƒè½®è¯¢ï¼ŒIp hashã€‚æ‰©å±•ç­–ç•¥ï¼Œå°±å¤©é©¬è¡Œç©ºï¼Œåªæœ‰ä½ æƒ³ä¸åˆ°çš„æ²¡æœ‰ä»–åšä¸åˆ°çš„ã€‚

#### è½®è¯¢

![img](https://pic.hycbook.com/i/hexo/bk_resources/python/14.pythonåŸºç¡€çŸ¥è¯†/kuangstudy62a15097-6e2a-4dbe-bcf5-f0d7cab81089.webp)
#### åŠ æƒè½®è¯¢

![img](https://pic.hycbook.com/i/hexo/bk_resources/python/14.pythonåŸºç¡€çŸ¥è¯†/kuangstudyb1e3e440-4159-4259-a174-528b56cb04b2.webp)
#### iphash

å¯¹å®¢æˆ·ç«¯è¯·æ±‚çš„ipè¿›è¡Œhashæ“ä½œï¼Œç„¶åæ ¹æ®hashç»“æœå°†åŒä¸€ä¸ªå®¢æˆ·ç«¯ipçš„è¯·æ±‚åˆ†å‘ç»™åŒä¸€å°æœåŠ¡å™¨è¿›è¡Œå¤„ç†ï¼Œå¯ä»¥è§£å†³sessionä¸å…±äº«çš„é—®é¢˜ã€‚

![img](https://pic.hycbook.com/i/hexo/bk_resources/python/14.pythonåŸºç¡€çŸ¥è¯†/kuangstudy64acb9a3-cd1a-4c0e-a1fa-9b220046a95a.webp)
#### fair

æŒ‰åç«¯æœåŠ¡å™¨çš„å“åº”æ—¶é—´æ¥åˆ†é…è¯·æ±‚ï¼Œå“åº”æ—¶é—´çŸ­çš„ä¼˜å…ˆåˆ†é…ã€‚

#### url_hash

æŒ‰è®¿é—®urlçš„hashç»“æœæ¥åˆ†é…è¯·æ±‚ï¼Œä½¿æ¯ä¸ªurlå®šå‘åˆ°åŒä¸€ä¸ªåç«¯æœåŠ¡å™¨ï¼Œåç«¯æœåŠ¡å™¨ä¸ºç¼“å­˜æ—¶æ¯”è¾ƒæœ‰æ•ˆã€‚

### åŠ¨é™åˆ†ç¦»

> åŠ¨é™åˆ†ç¦»ï¼Œåœ¨æˆ‘ä»¬çš„è½¯ä»¶å¼€å‘ä¸­ï¼Œæœ‰äº›è¯·æ±‚æ˜¯éœ€è¦åå°å¤„ç†çš„ï¼Œæœ‰äº›è¯·æ±‚æ˜¯ä¸éœ€è¦ç»è¿‡åå°å¤„ç†çš„ï¼ˆå¦‚ï¼šcssã€htmlã€jpgã€jsç­‰ç­‰æ–‡ä»¶ï¼‰ï¼Œè¿™äº›ä¸éœ€è¦ç»è¿‡åå°å¤„ç†çš„æ–‡ä»¶ç§°ä¸ºé™æ€æ–‡ä»¶ã€‚è®©åŠ¨æ€ç½‘ç«™é‡Œçš„åŠ¨æ€ç½‘é¡µæ ¹æ®ä¸€å®šè§„åˆ™æŠŠä¸å˜çš„èµ„æºå’Œç»å¸¸å˜çš„èµ„æºåŒºåˆ†å¼€æ¥ï¼ŒåŠ¨é™èµ„æºåšå¥½äº†æ‹†åˆ†ä»¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®é™æ€èµ„æºçš„ç‰¹ç‚¹å°†å…¶åšç¼“å­˜æ“ä½œã€‚æé«˜èµ„æºå“åº”çš„é€Ÿåº¦ã€‚

![img](https://pic.hycbook.com/i/hexo/bk_resources/python/14.pythonåŸºç¡€çŸ¥è¯†/kuangstudyedb1bbd6-e530-4aba-8fde-68658a10e73f.webp)
## åŸºæœ¬ä½¿ç”¨

### é…ç½®ç›‘å¬

nginxçš„é…ç½®æ–‡ä»¶æ˜¯confç›®å½•ä¸‹çš„nginx.confï¼Œé»˜è®¤é…ç½®çš„nginxç›‘å¬çš„ç«¯å£ä¸º80ï¼Œå¦‚æœ80ç«¯å£è¢«å ç”¨å¯ä»¥ä¿®æ”¹ä¸ºæœªè¢«å ç”¨çš„ç«¯å£å³å¯ã€‚

![img](https://pic.hycbook.com/i/hexo/bk_resources/python/14.pythonåŸºç¡€çŸ¥è¯†/kuangstudyf23105c4-b0b2-4e22-a1bf-b8098f40c144.webp)
å½“æˆ‘ä»¬ä¿®æ”¹äº†nginxçš„é…ç½®æ–‡ä»¶nginx.conf æ—¶ï¼Œä¸éœ€è¦å…³é—­nginxåé‡æ–°å¯åŠ¨nginxï¼Œåªéœ€è¦æ‰§è¡Œå‘½ä»¤ `nginx -s reload` å³å¯è®©æ”¹åŠ¨ç”Ÿæ•ˆ

### å…³é—­nginx

å¦‚æœä½¿ç”¨cmdå‘½ä»¤çª—å£å¯åŠ¨nginxï¼Œ å…³é—­cmdçª—å£æ˜¯ä¸èƒ½ç»“æŸnginxè¿›ç¨‹çš„ï¼Œå¯ä½¿ç”¨ä¸¤ç§æ–¹æ³•å…³é—­nginx

(1)è¾“å…¥nginxå‘½ä»¤ `nginx -s stop`(å¿«é€Ÿåœæ­¢nginx) æˆ– `nginx -s quit`(å®Œæ•´æœ‰åºçš„åœæ­¢nginx)

(2)ä½¿ç”¨taskkill `taskkill /f /t /im nginx.exe`

```cmd
taskkillæ˜¯ç”¨æ¥ç»ˆæ­¢è¿›ç¨‹çš„ï¼Œ
/fæ˜¯å¼ºåˆ¶ç»ˆæ­¢ .
/tç»ˆæ­¢æŒ‡å®šçš„è¿›ç¨‹å’Œä»»ä½•ç”±æ­¤å¯åŠ¨çš„å­è¿›ç¨‹ã€‚
/imç¤ºæŒ‡å®šçš„è¿›ç¨‹åç§° .
```

## Nginxå¸¸ç”¨å‘½ä»¤

### æŒ‡ä»¤

```cmd
cd /usr/local/nginx/sbin/
./nginx  å¯åŠ¨
./nginx -s stop  åœæ­¢
./nginx -s quit  å®‰å…¨é€€å‡º
./nginx -s reload  é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶
ps aux|grep nginx  æŸ¥çœ‹nginxè¿›ç¨‹
```

### é˜²ç«å¢™

```cmd
# å¼€å¯
service firewalld start
# é‡å¯
service firewalld restart
# å…³é—­
service firewalld stop
# æŸ¥çœ‹é˜²ç«å¢™è§„åˆ™
firewall-cmd --list-all
# æŸ¥è¯¢ç«¯å£æ˜¯å¦å¼€æ”¾
firewall-cmd --query-port=8080/tcp
# å¼€æ”¾80ç«¯å£
firewall-cmd --permanent --add-port=80/tcp
# ç§»é™¤ç«¯å£
firewall-cmd --permanent --remove-port=8080/tcp
#é‡å¯é˜²ç«å¢™(ä¿®æ”¹é…ç½®åè¦é‡å¯é˜²ç«å¢™)
firewall-cmd --reload
# å‚æ•°è§£é‡Š
1ã€firwall-cmdï¼šæ˜¯Linuxæä¾›çš„æ“ä½œfirewallçš„ä¸€ä¸ªå·¥å…·ï¼›
2ã€--permanentï¼šè¡¨ç¤ºè®¾ç½®ä¸ºæŒä¹…ï¼›
3ã€--add-portï¼šæ ‡è¯†æ·»åŠ çš„ç«¯å£ï¼›
```

### æ¼”ç¤º

```cmd
upstream lb{
    server 127.0.0.1:8080 weight=1;
    server 127.0.0.1:8081 weight=1;
}
location / {
    proxy_pass http://lb;
}
```









