---
title: dockeråŸºæœ¬ä½¿ç”¨
date: '2022/10/9 13:17:57'
top_img: 'https://pic.hycbook.com/i//hexo/post_imgs/è•¾å§†5.webp'
cover: 'https://pic.hycbook.com/i//hexo/post_cover/è•¾å§†5.webp'
categories:
  - common
tags:
  - docker
  - neo4j
  - å›¾æ•°æ®åº“
abbrlink: 50622
---

---



# docker

## dockerå®‰è£…

> [dockerå®‰è£…éƒ¨ç½²neo4j](https://www.cnblogs.com/caoyusang/p/13610408.html)

dockerå®‰è£…åˆ†ä¸ºå®‰è£…åŒ…å’Œå‘½ä»¤è¡Œä¸¤ç§

{% tabs å……åˆ†æ¡ä»¶ %}
<!-- tab å®‰è£…åŒ… -->

ä¸‹è½½[docker](https://neo4j.com/download-center)å®‰è£…åŒ…ï¼ŒæŒ‰ç…§æŒ‡ç¤ºå®‰è£…å³å¯

<!-- endtab -->

<!-- tab å‘½ä»¤è¡Œ -->

```sh
curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun
```

<!-- endtab -->

{% endtabs %}

> é…ç½®é•œåƒåŠ é€Ÿ

è¿›å…¥[é˜¿é‡Œäº‘](https://cr.console.aliyun.com/)ï¼Œç™»é™†åç‚¹å‡»å·¦ä¾§çš„é•œåƒåŠ é€Ÿï¼Œç”Ÿæˆè‡ªå·±çš„é•œåƒåŠ é€Ÿåœ°å€

æ‰§è¡Œé˜¿é‡Œäº‘æ¨èçš„ç»ˆç«¯å‘½ä»¤ï¼Œå³å¯æ›´æ–°dockerçš„é•œåƒæºä¸ºé˜¿é‡Œäº‘é•œåƒ

```sh
sudo mkdir -p /etc/docker
sudo tee /etc/docker/daemon.json <<-'EOF'
{
  "registry-mirrors": ["https://xk5lrhin.mirror.aliyuncs.com"]
}
EOF
sudo systemctl daemon-reload
sudo systemctl restart docker
```

> ä»£ç†é…ç½®

1. ä¸ºdockeræœåŠ¡åˆ›å»ºä¸€ä¸ªå†…åµŒçš„systemdç›®å½•

   ```sh
   mkdir -p /etc/systemd/system/docker.service.d
   ```

2. åˆ›å»º`/etc/systemd/system/docker.service.d/http-proxy.conf`æ–‡ä»¶ï¼Œå¹¶æ·»åŠ HTTP_PROXYç¯å¢ƒå˜é‡ï¼Œå…¶ä¸­[proxy-addr]å’Œ[proxy-port]åˆ†åˆ«æ”¹æˆå®é™…æƒ…å†µçš„ä»£ç†åœ°å€å’Œç«¯å£

   ```sh
   [Service]
   Environment="HTTP_PROXY=http://192.168.4.xx:xx" "HTTPS_PROXY=http://192.168.4.xx:xx"
   ```

3. å¦‚æœè¿˜æœ‰å†…éƒ¨çš„ä¸éœ€è¦ä½¿ç”¨ä»£ç†æ¥è®¿é—®çš„Docker registriesï¼Œé‚£ä¹ˆè¿˜éœ€è¦åˆ¶å®šNO_PROXYç¯å¢ƒå˜é‡

   ```sh
   [Service]
   Environment="HTTP_PROXY=http://192.168.4.xx:xx" "HTTPS_PROXY=http://192.168.4.xx:xx" "NO_PROXY=localhost,127.0.0.1,docker-registry.somecorporation.com"
   ```

4. æ›´æ–°é…ç½®å¹¶é‡å¯DockeræœåŠ¡

   ```sh
   systemctl daemon-reload
   systemctl restart docker
   ```

$$
dockerå®¹å™¨ = é•œåƒ + å¯è¯»å±‚
$$

## åŸºæœ¬ä½¿ç”¨

> åŸºæœ¬å‘½ä»¤

```sh
# æŸ¥çœ‹ç‰ˆæœ¬å·
docker version
# å¯åŠ¨docker
systemctl start docker
# å…³é—­docker
systemctl stop docker
# é‡å¯docker
systemctl restart docker
# dockerè®¾ç½®éšæœåŠ¡å¯åŠ¨è€Œè‡ªå¯åŠ¨
systemctl enable docker
# æŸ¥çœ‹docker è¿è¡ŒçŠ¶æ€
systemctl status docker
```



> é•œåƒ

```sh
# æŸ¥çœ‹æœ¬åœ°é•œåƒ
docker images
# æœç´¢é•œåƒ
docker search neo4j
# æ‹‰å–é•œåƒ
docker pull é•œåƒå:tag
# åˆ é™¤é•œåƒ ------å½“å‰é•œåƒæ²¡æœ‰è¢«ä»»ä½•å®¹å™¨ä½¿ç”¨æ‰å¯ä»¥åˆ é™¤
docker rmi -f é•œåƒå/é•œåƒID
# åˆ é™¤å¤šä¸ª å…¶é•œåƒIDæˆ–é•œåƒç”¨ç”¨ç©ºæ ¼éš”å¼€å³å¯
docker rmi -f é•œåƒå/é•œåƒID é•œåƒå/é•œåƒID
# ä¿å­˜é•œåƒï¼Œå°†æˆ‘ä»¬çš„é•œåƒä¿å­˜ä¸ºtarå‹ç¼©æ–‡ä»¶ï¼Œè¿™æ ·æ–¹ä¾¿é•œåƒè½¬ç§»å’Œä¿å­˜
# ç„¶åå¯ä»¥åœ¨ä»»ä½•ä¸€å°å®‰è£…äº†dockerçš„æœåŠ¡å™¨ä¸ŠåŠ è½½è¿™ä¸ªé•œåƒ
docker save é•œåƒå/é•œåƒID -o é•œåƒä¿å­˜åœ¨å“ªä¸ªä½ç½®ä¸åå­—
docker save -o my_ubuntu_v3.tar runoob/ubuntu:v3
# åŠ è½½é•œåƒ
docker load --input my_ubuntu_v3.tar
```



> å®¹å™¨

```sh
# åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„å®¹å™¨ï¼Œä¸ä¼šç«‹å³è¿è¡Œ
docker create  --name my_container nginx:latest
# åˆ›å»ºå’Œå¯åŠ¨çš„ç»„åˆï¼Œåˆ›å»ºäº†ä¸€ä¸ªæ–°å®¹å™¨å¹¶ç«‹å³å¯åŠ¨å®ƒï¼Œ-dè¡¨ç¤ºåå°
docker run --name my_container -d nginx:latest
# å¯åŠ¨å·²ç»ˆæ­¢å®¹å™¨
docker container start
# åœæ­¢å®¹å™¨
docker stop å®¹å™¨IDæˆ–è€…å®¹å™¨å
# é‡å¯å®¹å™¨
docker restart å®¹å™¨IDæˆ–è€…å®¹å™¨å

# åˆ—å‡ºæ‰€æœ‰åœ¨è¿è¡Œçš„å®¹å™¨ä¿¡æ¯
docker ps
# æŸ¥çœ‹æœ¬åœ°æ‰€æœ‰å®¹å™¨
docker ps -a
# åˆ é™¤æŒ‡å®šå®¹å™¨
docker rm -f <container_id0> <container_id1>
# åˆ é™¤æœªå¯åŠ¨æˆåŠŸçš„å®¹å™¨
docker rm $(docker ps -a|grep Created|awk '{print $1}')
# åˆ é™¤æ‰€æœ‰æœªè¿è¡Œçš„å®¹å™¨
docker rm $(docker ps -a|grep Created|awk '{print $1}')
```



é•œåƒæ‰“åŒ…å·¥å…·  Buildpacksã€Dockerfile

[Docker, Dockerfile, å’ŒDocker ComposeåŒºåˆ« | Baeldung](https://www.baeldung.com/ops/docker-dockerfile-docker-compose)

Docker Composeå…è®¸æˆ‘ä»¬å®šä¹‰å®¹å™¨å…±äº«çš„å…±åŒå¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€æ¬¡æ€§å®šä¹‰ä¸€ä¸ªå·ï¼Œç„¶åæŠŠå®ƒæŒ‚åœ¨æ¯ä¸ªå®¹å™¨é‡Œï¼Œè¿™æ ·å®ƒä»¬å°±å¯ä»¥å…±äº«ä¸€ä¸ªå…±åŒçš„æ–‡ä»¶ç³»ç»Ÿã€‚æˆ–è€…ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ç”¨æ¥é€šä¿¡çš„ç½‘ç»œã€‚

Docker Composeåªæ˜¯ä¸€ä¸ªåè°ƒå¤šä¸ªå®¹å™¨çš„å·¥å…·ã€‚å…¶ä»–é€‰æ‹©åŒ…æ‹¬Kubernetesã€Openshiftå’ŒApache Mesos



[Dockerå®¹å™¨è¿ç§»åˆ°å…¶ä»–æœåŠ¡å™¨çš„5ç§æ–¹æ³•è¯¦è§£_docker](https://www.anquanclub.cn/5985.html)



# neo4j

## å®‰è£…neo4j

> æ‹‰å–neo4jé•œåƒ

1. ä»[dockerå®˜æ–¹é•œåƒ](https://hub.docker.com/search?type=image)ä¸­æ‰¾åˆé€‚çš„é•œåƒ

   ```sh
   docker search neo4j
   ```

2. æ‹‰å–é•œåƒæº

   ```sh
   docker pull neo4j(:ç‰ˆæœ¬å·) # ç¼ºçœ ":ç‰ˆæœ¬å·" æ—¶é»˜è®¤å®‰è£…latestç‰ˆæœ¬çš„
   ```

3. æŸ¥çœ‹æœ¬åœ°é•œåƒï¼Œæ£€éªŒæ˜¯å¦æ‹‰å–æˆåŠŸ

   ```sh
   docker images
   ```

## å›¾ç®—æ³•æ’ä»¶

> neo4jæä¾›äº†ä¸€ç³»åˆ—å¸¸ç”¨çš„[å›¾ç®—æ³•](https://neo4j.com/download-center/#ngds)ï¼Œè¯¥ç®—æ³•åº“éœ€è¦å•ç‹¬å®‰è£…ï¼Œæ³¨æ„ç‰ˆæœ¬å¯¹åº”å…³ç³»

1. ç‚¹å‡»ä¸Šæ–¹å®˜ç½‘é“¾æ¥ï¼Œä¸‹è½½`Neo4j Graph Data Science`ä¸‹çš„æ–‡ä»¶ï¼Œæ”¾åˆ°`$NEO4J_HOME/plugins`ç›®å½•ä¸­

2. å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°æ‚¨çš„`$NEO4J_HOME/conf/neo4j.conf`æ–‡ä»¶ä¸­ï¼Œ[å‚è€ƒè¿™é‡Œ](https://www.likecs.com/show-204290898.html)

   ```yaml
   dbms.security.procedures.unrestricted=apoc.*,gds.*
   ```

   æ­¤é…ç½®æ¡ç›®æ˜¯å¿…éœ€çš„ï¼Œå› ä¸º GDS åº“è®¿é—® Neo4j çš„ä½çº§ç»„ä»¶ä»¥æœ€å¤§åŒ–æ€§èƒ½

3. é‡å¯ Neo4jï¼Œåœ¨dockerä¸‹å°±æ˜¯é‡å¯

> ä¸ºäº†éªŒè¯æ‚¨çš„å®‰è£…ï¼Œå¯ä»¥è¾“å…¥ä»¥ä¸‹å‘½ä»¤

```cmd
RETURN gds.version()
```

è¦åˆ—å‡ºæ‰€æœ‰å·²å®‰è£…çš„ç®—æ³•ï¼Œè¯·è¿è¡Œä»¥ä¸‹`gds.list()`è¿‡ç¨‹

```cmd
CALL gds.list()
```

ä¾‹å­: [neo4jå®ç°PageRankç®—æ³•](https://blog.csdn.net/weixin_51432117/article/details/109965487)

## å¯åŠ¨neo4j

æ‰¾ä¸€ä¸ªç›®å½•å­˜æ”¾dockerçš„å„é•œåƒè¿è¡Œç›®å½•ï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œé€‰çš„æ˜¯/home/huangyc/docker

ç„¶åå†åœ¨è¿™ä¸ªç›®å½•æ–°å»ºå…·ä½“çš„é•œåƒå¯¹åº”çš„æ–‡ä»¶å¤¹/home/huangyc/docker/neo4jï¼Œåœ¨ä¸‹é¢æ–°å»ºå››ä¸ªæ–‡ä»¶å¤¹(å®é™…ä¸Šå¥½åƒä¸éœ€è¦æ‰‹åŠ¨å»ºï¼Œæ‰§è¡Œå‘½ä»¤æ—¶è‡ªåŠ¨ä¼šæ–°å»º)

- **data**: æ•°æ®å­˜æ”¾çš„æ–‡ä»¶å¤¹
- **logs**: è¿è¡Œçš„æ—¥å¿—æ–‡ä»¶å¤¹
- **conf**: æ•°æ®åº“é…ç½®æ–‡ä»¶å¤¹(åœ¨é…ç½®æ–‡ä»¶**neo4j.conf**ä¸­é…ç½®åŒ…æ‹¬å¼€æ”¾è¿œç¨‹è¿æ¥ã€è®¾ç½®é»˜è®¤æ¿€æ´»çš„æ•°æ®åº“)
- **import**: ä¸ºäº†å¤§æ‰¹é‡å¯¼å…¥csvæ¥æ„å»ºæ•°æ®åº“ï¼Œéœ€è¦å¯¼å…¥çš„èŠ‚ç‚¹æ–‡ä»¶**nodes.csv**å’Œå…³ç³»æ–‡ä»¶**rel.csv**éœ€è¦æ”¾åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹
- **plugins**: å­˜æ”¾jaræ’ä»¶

> å¯åŠ¨å‘½ä»¤æ ¼å¼å¦‚ä¸‹

```sh
docker run -d --name container_name \  //-dè¡¨ç¤ºå®¹å™¨åå°è¿è¡Œ --nameæŒ‡å®šå®¹å™¨åå­—
	-p 7474:7474 -p 7687:7687 \  //æ˜ å°„å®¹å™¨çš„ç«¯å£å·åˆ°å®¿ä¸»æœºçš„ç«¯å£å·
	-v /home/huangyc/docker/neo4j/data:/data \  //æŠŠå®¹å™¨å†…çš„æ•°æ®ç›®å½•æŒ‚è½½åˆ°å®¿ä¸»æœºçš„å¯¹åº”ç›®å½•ä¸‹
	-v /home/huangyc/docker/neo4j/logs:/logs \  //æŒ‚è½½æ—¥å¿—ç›®å½•
	-v /home/huangyc/docker/neo4j/conf:/var/lib/neo4j/conf   //æŒ‚è½½é…ç½®ç›®å½•
	-v /home/huangyc/docker/neo4j/import:/var/lib/neo4j/import \  //æŒ‚è½½æ•°æ®å¯¼å…¥ç›®å½•
	-v /home/huangyc/docker/neo4j/plugins:/var/lib/neo4j/plugins \  //æŒ‚è½½æ•°æ®å¯¼å…¥ç›®å½•
	--env NEO4J_AUTH=neo4j/password \  //è®¾å®šæ•°æ®åº“çš„ç”¨æˆ·åå’Œå’Œå¯†ç 
	neo4j //æŒ‡å®šä½¿ç”¨çš„é•œåƒ
```

ä¹Ÿå¯ä»¥å†™æˆå•è¡Œå‘½ä»¤

```sh
docker run -d --name neo4j_hyc -p 7474:7474 -p 7687:7687 -v /home/huangyc/docker/neo4j/data:/data -v /home/huangyc/docker/neo4j/logs:/logs -v /home/huangyc/docker/neo4j/conf:/var/lib/neo4j/conf -v /home/huangyc/docker/neo4j/import:/var/lib/neo4j/import -v /home/huangyc/docker/neo4j/plugins:/var/lib/neo4j/plugins --env NEO4J_AUTH=neo4j/hyc neo4j
```



## pyåº“

ä½¿ç”¨Pythonè®¿é—®å›¾æ•°æ®åº“ï¼Œä¸»è¦ä½¿ç”¨çš„åº“æ—¶`py2neo`å’Œ`neo4j`ï¼Œ

* py2neoé€šè¿‡æ“ä½œpythonå˜é‡ï¼Œè¾¾åˆ°æ“ä½œneo4jçš„ç›®çš„ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒ`cypher`è¯­æ³•
* neo4jä¸»è¦æ—¶æ‰§è¡ŒCQL(cypher)è¯­å¥

{% note success modern %}[cypher è¯­æ³•](https://neo4j.com/docs/cypher-refcard/current/){% endnote %}

{% tabs å……åˆ†æ¡ä»¶ %}
<!-- tab py2neo -->

å®‰è£…

```sh
pip install py2neo
```

ä½¿ç”¨ä¾‹å­

```python
# coding:utf-8
from py2neo import Graph, Node, Relationship
 
# è¿æ¥neo4jæ•°æ®åº“ï¼Œè¾“å…¥åœ°å€ã€ç”¨æˆ·åã€å¯†ç 
graph = Graph("http://192.168.1.106:7474", name="neo4j")
graph.delete_all()
# åˆ›å»ºç»“ç‚¹
test_node_1 = Node('ru_yi_zhuan', name='çš‡å¸') # ä¿®æ”¹çš„éƒ¨åˆ†
test_node_2 = Node('ru_yi_zhuan', name='çš‡å') # ä¿®æ”¹çš„éƒ¨åˆ†
test_node_3 = Node('ru_yi_zhuan', name='å…¬ä¸»') # ä¿®æ”¹çš„éƒ¨åˆ†
 
graph.create(test_node_1)
graph.create(test_node_2)
graph.create(test_node_3)
 
# åˆ›å»ºå…³ç³»
# åˆ†åˆ«å»ºç«‹äº†test_node_1æŒ‡å‘test_node_2å’Œtest_node_2æŒ‡å‘test_node_1ä¸¤æ¡å…³ç³»ï¼Œå…³ç³»çš„ç±»å‹ä¸º"ä¸ˆå¤«ã€å¦»å­"ï¼Œä¸¤æ¡å…³ç³»éƒ½æœ‰å±æ€§countï¼Œä¸”å€¼ä¸º1ã€‚
node_1_zhangfu_node_1 = Relationship(test_node_1, 'ä¸ˆå¤«', test_node_2)
node_1_zhangfu_node_1['count'] = 1
node_2_qizi_node_1 = Relationship(test_node_2, 'å¦»å­', test_node_1)
node_2_munv_node_1 = Relationship(test_node_2, 'æ¯å¥³', test_node_3)
 
node_2_qizi_node_1['count'] = 1
 
graph.create(node_1_zhangfu_node_1)
graph.create(node_2_qizi_node_1)
graph.create(node_2_munv_node_1)
 
print(graph)
print(test_node_1)
print(test_node_2)
print(node_1_zhangfu_node_1)
print(node_2_qizi_node_1)
print(node_2_munv_node_1) 
```

<!-- endtab -->

<!-- tab neo4j -->

å®‰è£…

```sh
pip install neo4j
```

ä½¿ç”¨ä¾‹å­

```python
from neo4j import GraphDatabase

driver = GraphDatabase.driver("bolt://localhost:7687", auth=("neo4j", "password"))

def add_friend(tx, name, friend_name):
    tx.run("MERGE (a:Person {name: $name}) "
           "MERGE (a)-[:KNOWS]->(friend:Person {name: $friend_name})",
           name=name, friend_name=friend_name)

def print_friends(tx, name):
    for record in tx.run("MATCH (a:Person)-[:KNOWS]->(friend) WHERE a.name = $name "
                         "RETURN friend.name ORDER BY friend.name", name=name):
        print(record["friend.name"])

with driver.session() as session:
    session.write_transaction(add_friend, "Arthur", "Guinevere")
    session.write_transaction(add_friend, "Arthur", "Lancelot")
    session.write_transaction(add_friend, "Arthur", "Merlin")
    session.read_transaction(print_friends, "Arthur")
```

<!-- endtab -->

{% endtabs %}



# nebula

## åŸºæœ¬ä»‹ç»

NebulaGraph ç”±ä¸‰ç§æœåŠ¡æ„æˆï¼šGraph æœåŠ¡ã€Meta æœåŠ¡å’Œ Storage æœåŠ¡ï¼Œæ˜¯ä¸€ç§å­˜å‚¨ä¸è®¡ç®—åˆ†ç¦»çš„æ¶æ„

> Meta æœåŠ¡

Meta æœåŠ¡æ˜¯ç”± `nebula-metad è¿›ç¨‹`æä¾›çš„ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®åœºæ™¯é…ç½® nebula-metad è¿›ç¨‹æ•°é‡ï¼š

- æµ‹è¯•ç¯å¢ƒä¸­ï¼Œç”¨æˆ·å¯ä»¥åœ¨ NebulaGraph é›†ç¾¤ä¸­éƒ¨ç½² 1 ä¸ªæˆ– 3 ä¸ª nebula-metad è¿›ç¨‹ã€‚å¦‚æœè¦éƒ¨ç½² 3 ä¸ªï¼Œç”¨æˆ·å¯ä»¥å°†å®ƒä»¬éƒ¨ç½²åœ¨ 1 å°æœºå™¨ä¸Šï¼Œæˆ–è€…åˆ†åˆ«éƒ¨ç½²åœ¨ä¸åŒçš„æœºå™¨ä¸Šã€‚
- ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå»ºè®®åœ¨ NebulaGraph é›†ç¾¤ä¸­éƒ¨ç½² 3 ä¸ª nebula-metad è¿›ç¨‹ã€‚è¯·å°†è¿™äº›è¿›ç¨‹éƒ¨ç½²åœ¨ä¸åŒçš„æœºå™¨ä¸Šä»¥ä¿è¯é«˜å¯ç”¨ã€‚

æ‰€æœ‰ nebula-metad è¿›ç¨‹æ„æˆäº†åŸºäº Raft åè®®çš„é›†ç¾¤ï¼Œå…¶ä¸­ä¸€ä¸ªè¿›ç¨‹æ˜¯ leaderï¼Œå…¶ä»–è¿›ç¨‹éƒ½æ˜¯ followerã€‚

leader æ˜¯ç”±å¤šæ•°æ´¾é€‰ä¸¾å‡ºæ¥ï¼Œåªæœ‰ leader èƒ½å¤Ÿå¯¹å®¢æˆ·ç«¯æˆ–å…¶ä»–ç»„ä»¶æä¾›æœåŠ¡ï¼Œå…¶ä»– follower ä½œä¸ºå€™è¡¥ï¼Œå¦‚æœ leader å‡ºç°æ•…éšœï¼Œä¼šåœ¨æ‰€æœ‰ follower ä¸­é€‰ä¸¾å‡ºæ–°çš„ leaderã€‚

> Graph æœåŠ¡

Graph æœåŠ¡æ˜¯ç”±`nebula-graphd è¿›ç¨‹`æä¾›ï¼ŒæœåŠ¡ä¸»è¦è´Ÿè´£å¤„ç†æŸ¥è¯¢è¯·æ±‚ï¼ŒåŒ…æ‹¬è§£ææŸ¥è¯¢è¯­å¥ã€æ ¡éªŒè¯­å¥ã€ç”Ÿæˆæ‰§è¡Œè®¡åˆ’ä»¥åŠæŒ‰ç…§æ‰§è¡Œè®¡åˆ’æ‰§è¡Œå››ä¸ªå¤§æ­¥éª¤ï¼ŒæŸ¥è¯¢è¯·æ±‚å‘é€åˆ° Graph æœåŠ¡åï¼Œä¼šç”±å¦‚ä¸‹æ¨¡å—ä¾æ¬¡å¤„ç†ï¼š

1. **Parser**ï¼šè¯æ³•è¯­æ³•è§£ææ¨¡å—ã€‚
2. **Validator**ï¼šè¯­ä¹‰æ ¡éªŒæ¨¡å—ã€‚
3. **Planner**ï¼šæ‰§è¡Œè®¡åˆ’ä¸ä¼˜åŒ–å™¨æ¨¡å—ã€‚
4. **Executor**ï¼šæ‰§è¡Œå¼•æ“æ¨¡å—ã€‚

> Storage æœåŠ¡

NebulaGraph çš„å­˜å‚¨åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€ä¸ªæ˜¯ Meta ç›¸å…³çš„å­˜å‚¨ï¼Œç§°ä¸º Meta æœåŠ¡ï¼Œåœ¨å‰æ–‡å·²æœ‰ä»‹ç»ã€‚

å¦ä¸€ä¸ªæ˜¯å…·ä½“æ•°æ®ç›¸å…³çš„å­˜å‚¨ï¼Œç§°ä¸º Storage æœåŠ¡ã€‚å…¶è¿è¡Œåœ¨ `nebula-storaged è¿›ç¨‹`ä¸­

## ç¯å¢ƒæ­å»º

> ä»¥[nebula 3.2.1](https://docs.nebula-graph.com.cn/3.2.1/4.deployment-and-installation/2.compile-and-install-nebula-graph/deploy-nebula-graph-cluster/)ä¸ºä¾‹

ä¸‹è½½å¹¶å®‰è£…NebulaGraph

```sh
wget https://oss-cdn.nebula-graph.com.cn/package/3.2.1/nebula-graph-3.2.1.el7.x86_64.rpm
sudo rpm -ivh --prefix=/home/huangyc/nebula nebula-graph-3.2.1.el7.x86_64.rpm
```

`--prefix`ä¸ºå¯é€‰é¡¹ï¼Œç”¨äºæŒ‡å®šå®‰è£…è·¯å¾„

å¦‚ä¸è®¾ç½®ï¼Œç³»ç»Ÿä¼šå°† NebulaGraph å®‰è£…åˆ°é»˜è®¤è·¯å¾„`/usr/local/nebula/`

> é›†ç¾¤é…ç½®

{% note success modern %}é›†ç¾¤é…ç½®éœ€è¦ä¿è¯é›†ç¾¤æœºå™¨[é…ç½®sshå…å¯†](https://hycbook.com/article/d192a1af.html){% endnote %}

ä¿®æ”¹æ¯ä¸ªæœåŠ¡å™¨ä¸Šçš„ NebulaGraph é…ç½®æ–‡ä»¶

NebulaGraph çš„æ‰€æœ‰é…ç½®æ–‡ä»¶å‡ä½äºå®‰è£…ç›®å½•çš„`etc`ç›®å½•å†…ï¼ŒåŒ…æ‹¬`nebula-graphd.conf`ã€`nebula-metad.conf`å’Œ`nebula-storaged.conf`ï¼Œç”¨æˆ·å¯ä»¥åªä¿®æ”¹æ‰€éœ€æœåŠ¡çš„é…ç½®æ–‡ä»¶ã€‚å„ä¸ªæœºå™¨éœ€è¦ä¿®æ”¹çš„é…ç½®æ–‡ä»¶å¦‚ä¸‹ã€‚

| æœºå™¨åç§° | å¾…ä¿®æ”¹é…ç½®æ–‡ä»¶                                               |
| -------- | ------------------------------------------------------------ |
| A        | `nebula-graphd.conf`ã€`nebula-storaged.conf`ã€`nebula-metad.conf` |
| B        | `nebula-graphd.conf`ã€`nebula-storaged.conf`ã€`nebula-metad.conf` |
| C        | `nebula-graphd.conf`ã€`nebula-storaged.conf`ã€`nebula-metad.conf` |
| D        | `nebula-graphd.conf`ã€`nebula-storaged.conf`                 |
| E        | `nebula-graphd.conf`ã€`nebula-storaged.conf`                 |

* æœºå™¨ A é…ç½®

  nebula-graphd.conf

  ```sh
  ########## networking ##########
  # Comma separated Meta Server Addresses
  --meta_server_addrs=192.168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559
  # Local IP used to identify the nebula-graphd process.
  # Change it to an address other than loopback if the service is distributed or
  # will be accessed remotely.
  --local_ip=192.168.10.111
  # Network device to listen on
  --listen_netdev=any
  # Port to listen on
  --port=9669
  ```

  nebula-storaged.conf

  ```sh
  ########## networking ##########
  # Comma separated Meta server addresses
  --meta_server_addrs=192.168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559
  # Local IP used to identify the nebula-storaged process.
  # Change it to an address other than loopback if the service is distributed or
  # will be accessed remotely.
  --local_ip=192.168.10.111
  # Storage daemon listening port
  --port=9779
  ```

  nebula-metad.conf

  ```sh
  ########## networking ##########
  # Comma separated Meta Server addresses
  --meta_server_addrs=192.168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559
  # Local IP used to identify the nebula-metad process.
  # Change it to an address other than loopback if the service is distributed or
  # will be accessed remotely.
  --local_ip=192.168.10.111
  # Meta daemon listening port
  --port=9559
  ```

* æœºå™¨ D é…ç½®

  nebula-graphd.conf

  ```sh
  ########## networking ##########
  # Comma separated Meta Server Addresses
  --meta_server_addrs=192.168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559
  # Local IP used to identify the nebula-graphd process.
  # Change it to an address other than loopback if the service is distributed or
  # will be accessed remotely.
  --local_ip=192.168.10.114
  # Network device to listen on
  --listen_netdev=any
  # Port to listen on
  --port=9669
  ```

  nebula-storaged.conf

  ```sh
  ########## networking ##########
  # Comma separated Meta server addresses
  --meta_server_addrs=192.168.10.111:9559,192.168.10.112:9559,192.168.10.113:9559
  # Local IP used to identify the nebula-storaged process.
  # Change it to an address other than loopback if the service is distributed or
  # will be accessed remotely.
  --local_ip=192.168.10.114
  # Storage daemon listening port
  --port=9779
  ```

* ABCä¸‰å°é…ç½®é™¤äº†`local_ip`ï¼Œå…¶ä»–éƒ½ä¸€è‡´ï¼ŒDEä¸¤å°é…ç½®é™¤äº†`local_ip`ï¼Œå…¶ä»–éƒ½ä¸€è‡´

å¯åŠ¨æœåŠ¡

## å‘½ä»¤å­¦ä¹ 

ä½¿ç”¨è„šæœ¬`nebula.service`ç®¡ç†æœåŠ¡ï¼ŒåŒ…æ‹¬å¯åŠ¨ã€åœæ­¢ã€é‡å¯ã€ä¸­æ­¢å’ŒæŸ¥çœ‹

`nebula.service`çš„é»˜è®¤è·¯å¾„æ˜¯`/usr/local/nebula/scripts`ï¼Œå¦‚æœä¿®æ”¹è¿‡å®‰è£…è·¯å¾„ï¼Œè¯·ä½¿ç”¨å®é™…è·¯å¾„

> è¯­æ³•

```sh
sudo /usr/local/nebula/scripts/nebula.service
[-v] [-c <config_file_path>]
<start | stop | restart | kill | status>
<metad | graphd | storaged | all>
```

æ¯”å¦‚å¯¹äºéå®¹å™¨éƒ¨ç½²çš„ NebulaGraphï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å¯åŠ¨æœåŠ¡ï¼š

```sh
sudo /usr/local/nebula/scripts/nebula.service start all
[INFO] Starting nebula-metad...
[INFO] Done
[INFO] Starting nebula-graphd...
[INFO] Done
[INFO] Starting nebula-storaged...
[INFO] Done
```

æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹ NebulaGraph æœåŠ¡çŠ¶æ€

```sh
sudo /usr/local/nebula/scripts/nebula.service status all
```

å¦‚æœè¿”å›å¦‚ä¸‹ç»“æœï¼Œè¡¨ç¤º NebulaGraph æœåŠ¡æ­£å¸¸è¿è¡Œ

```
[INFO] nebula-metad(33fd35e): Running as 29020, Listening on 9559
[INFO] nebula-graphd(33fd35e): Running as 29095, Listening on 9669
[WARN] nebula-storaged after v3.0.0 will not start service until it is added to cluster.
[WARN] See Manage Storage hosts:ADD HOSTS in https://docs.nebula-graph.io/
[INFO] nebula-storaged(33fd35e): Running as 29147, Listening on 9779
```

æ­£å¸¸å¯åŠ¨ NebulaGraph åï¼Œ`nebula-storaged`è¿›ç¨‹çš„ç«¯å£æ˜¾ç¤ºçº¢è‰²ã€‚è¿™æ˜¯å› ä¸º`nebula-storaged`åœ¨å¯åŠ¨æµç¨‹ä¸­ä¼šç­‰å¾…`nebula-metad`æ·»åŠ å½“å‰ Storage æœåŠ¡ï¼Œå½“å‰ Storage æœåŠ¡æ”¶åˆ° Ready ä¿¡å·åæ‰ä¼šæ­£å¼å¯åŠ¨æœåŠ¡ã€‚ä» 3.0.0 ç‰ˆæœ¬å¼€å§‹ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ çš„ Storage èŠ‚ç‚¹æ— æ³•ç›´æ¥è¯»å†™ï¼Œé…ç½®æ–‡ä»¶çš„ä½œç”¨ä»…ä»…æ˜¯å°† Storage èŠ‚ç‚¹æ³¨å†Œè‡³ Meta æœåŠ¡ä¸­ã€‚å¿…é¡»ä½¿ç”¨`ADD HOSTS`å‘½ä»¤åï¼Œæ‰èƒ½æ­£å¸¸è¯»å†™ Storage èŠ‚ç‚¹ã€‚

> æ³¨å†Œ

å…·ä½“æ˜¯é€šè¿‡nebula-consoleå‘½ä»¤è¡Œæˆ–è€…studioé¡µé¢æ‰§è¡Œï¼Œç”¨ java client ä¹Ÿå¯ä»¥çš„, åº•å±‚é€»è¾‘éƒ½æ˜¯é€šè¿‡å®¢æˆ·ç«¯å‘é€ä¸€æ¡ `add hosts xxxxx` query

```sh
ADD HOSTS 192.168.40.39:9779, 192.168.40.40:9779, 192.168.40.41:9779;
```

æ¯”å¦‚ä½¿ç”¨pythonå®¢æˆ·ç«¯

```python
from nebula3.gclient.net import ConnectionPool
from nebula3.Config import Config

# define a config
config = Config()
config.max_connection_pool_size = 10
# init connection pool
connection_pool = ConnectionPool()
# if the given servers are ok, return true, else return false
ok = connection_pool.init([('192.168.123.xx', 9669)], config)

# option 1 control the connection release yourself
# get session from the pool
session = connection_pool.get_session('root', 'nebula')

session.execute("ADD HOSTS 192.168.123.24:9779")
```

ç­‰å¾…20såï¼Œé‡æ–°æŸ¥çœ‹æœåŠ¡çŠ¶æ€ï¼Œå‘ç°è­¦å‘Šæ²¡æœ‰å°±è¯´æ˜æˆåŠŸäº†

```sh
[root@localhost nebula]# sudo scripts/nebula.service status all
[WARN] The maximum files allowed to open might be too few: 1024
[INFO] nebula-metad(bb2e684): Running as 11660, Listening on 9559
[INFO] nebula-graphd(bb2e684): Running as 11727, Listening on 9669
[INFO] nebula-storaged(bb2e684): Running as 11764, Listening on 9779
```

> æ¸…ç©ºå›¾

- æ•°æ®æ¸…é™¤åï¼Œ**å¦‚æ— å¤‡ä»½ï¼Œæ— æ³•æ¢å¤**ã€‚ä½¿ç”¨è¯¥åŠŸèƒ½åŠ¡å¿…è°¨æ…

  `CLEAR SPACE`ä¸æ˜¯åŸå­æ€§æ“ä½œã€‚å¦‚æœæ‰§è¡Œå‡ºé”™ï¼Œè¯·é‡æ–°æ‰§è¡Œï¼Œé¿å…æ®‹ç•™æ•°æ®

- å›¾ç©ºé—´ä¸­çš„æ•°æ®é‡è¶Šå¤§ï¼Œ`CLEAR SPACE`æ¶ˆè€—çš„æ—¶é—´è¶Šé•¿

  å¦‚æœ`CLEAR SPACE`çš„æ‰§è¡Œå› å®¢æˆ·ç«¯è¿æ¥è¶…æ—¶è€Œå¤±è´¥ï¼Œå¯ä»¥å¢å¤§ [Graph æœåŠ¡é…ç½®](https://docs.nebula-graph.com.cn/3.2.1/5.configurations-and-logs/1.configurations/3.graph-config/)ä¸­`storage_client_timeout_ms`å‚æ•°çš„å€¼

- åœ¨`CLEAR SPACE`çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå‘è¯¥å›¾ç©ºé—´å†™å…¥æ•°æ®çš„è¡Œä¸ºä¸ä¼šè¢«è‡ªåŠ¨ç¦æ­¢

  è¿™æ ·çš„å†™å…¥è¡Œä¸ºå¯èƒ½å¯¼è‡´`CLEAR SPACE`æ¸…é™¤æ•°æ®ä¸å®Œå…¨ï¼Œæ®‹ç•™çš„æ•°æ®ä¹Ÿå¯èƒ½å—åˆ°æŸå

```sh
CLEAR SPACE [IF EXISTS] <space_name>;
```

ä¿ç•™çš„æ•°æ®[Â¶](https://docs.nebula-graph.com.cn/3.2.1/3.ngql-guide/9.space-statements/6.clear-space/#_4)

å›¾ç©ºé—´ä¸­ï¼Œ`CLEAR SPACE`ä¸ä¼šåˆ é™¤çš„æ•°æ®åŒ…æ‹¬ï¼š

- Tag ä¿¡æ¯
- Edge type ä¿¡æ¯
- åŸç”Ÿç´¢å¼•å’Œå…¨æ–‡ç´¢å¼•çš„å…ƒæ•°æ®

`DROP SPACE`è¯­å¥ç”¨äºåˆ é™¤æŒ‡å®šå›¾ç©ºé—´ä»¥åŠå…¶ä¸­çš„æ‰€æœ‰ä¿¡æ¯

```sh
DROP SPACE [IF EXISTS] <graph_space_name>;
```

## å®¢æˆ·ç«¯

NebulaGraph æ”¯æŒå¤šç§ç±»å‹çš„å®¢æˆ·ç«¯ï¼ŒåŒ…æ‹¬å‘½ä»¤è¡Œå®¢æˆ·ç«¯ã€å¯è§†åŒ–ç•Œé¢å®¢æˆ·ç«¯å’Œæµè¡Œç¼–ç¨‹è¯­è¨€å®¢æˆ·ç«¯

è¯¦æƒ…å‚è§[å®¢æˆ·ç«¯åˆ—è¡¨](https://docs.nebula-graph.com.cn/3.2.1/14.client/1.nebula-client/)

{% tabs å®¢æˆ·ç«¯ %}
<!-- tab åŸç”ŸCLIå®¢æˆ·ç«¯ -->

> å‰ææ¡ä»¶[Â¶](https://docs.nebula-graph.com.cn/3.2.1/4.deployment-and-installation/connect-to-nebula-graph/#_1)
>
> [å®˜æ–¹æ–‡æ¡£](https://docs.nebula-graph.com.cn/3.2.1/nebula-console/)

- NebulaGraph æœåŠ¡å·²[å¯åŠ¨](https://docs.nebula-graph.com.cn/3.2.1/4.deployment-and-installation/manage-service/)

- è¿è¡Œ NebulaGraph Console çš„æœºå™¨å’Œè¿è¡Œ NebulaGraph çš„æœåŠ¡å™¨ç½‘ç»œäº’é€š

- NebulaGraph Console çš„ç‰ˆæœ¬å…¼å®¹ NebulaGraph çš„ç‰ˆæœ¬

ä½¿ç”¨å‘½ä»¤`arch`ï¼ŒæŸ¥çœ‹ç³»ç»Ÿç»“æ„ï¼Œå»[å®˜ç½‘](https://github.com/vesoft-inc/nebula-console/releases)ä¸‹è½½å®‰è£…åŒ…ï¼Œé‡å‘½åæ–‡ä»¶ä¸º`nebula_console`

1. ä¸ºç”¨æˆ·æˆäºˆ nebula-console æ–‡ä»¶çš„æ‰§è¡Œæƒé™

   ```sh
   chmod 111 nebula-console
   ```

2. åœ¨å‘½ä»¤è¡Œç•Œé¢ä¸­ï¼Œåˆ‡æ¢å·¥ä½œç›®å½•è‡³ nebula-console æ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤è¿æ¥ NebulaGraph

   ```sh
   ./nebula-console -addr <ip> -port <port> -u <username> -p <password> [-t 120] [-e "nGQL_statement" | -f filename.nGQL]
   ```

   ä¾‹å¦‚ï¼Œè¦è¿æ¥åˆ°éƒ¨ç½²åœ¨ 192.168.10.8 ä¸Šçš„ Graph æœåŠ¡ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤

   ```sh
   ./nebula_console -addr 192.168.10.8 -port 9669 -u root -p nebula
   ```

<!-- endtab -->

<!-- tab pythonå®¢æˆ·ç«¯ -->

å·²å®‰è£… Pythonï¼Œç‰ˆæœ¬ä¸º 3.6 åŠä»¥ä¸Šï¼Œç‰ˆæœ¬å¯¹ç…§è¡¨[Â¶](https://docs.nebula-graph.com.cn/3.2.1/14.client/5.nebula-python-client/#_2)

| NebulaGraph ç‰ˆæœ¬ | NebulaGraph Python ç‰ˆæœ¬ |
| ---------------- | ----------------------- |
| 3.2.1            | 3.1.0                   |
| 2.6.x            | 2.6.0                   |

> pipå®‰è£…

```sh
$ pip install nebula3-python==<version>
```

<!-- endtab -->

{% endtabs %}



> åˆå§‹åŒ–ä¸€äº›[æ•°æ®](https://docs.nebula-graph.com.cn/3.2.1/2.quick-start/4.nebula-graph-crud/#_2)

1. æ‰§è¡Œå¦‚ä¸‹è¯­å¥åˆ›å»ºåä¸º`basketballplayer`çš„å›¾ç©ºé—´

   ```sh
   CREATE SPACE basketballplayer(partition_num=15, replica_factor=1, vid_type=fixed_string(32));
   ```

2. æ‰§è¡Œå‘½ä»¤`SHOW HOSTS`æ£€æŸ¥åˆ†ç‰‡çš„åˆ†å¸ƒæƒ…å†µï¼Œç¡®ä¿å¹³è¡¡åˆ†å¸ƒ

   ```sh
   nebula> SHOW HOSTS;
   +-------------+-----------+-----------+-----------+--------------+----------------------------------+------------------------+---------+
   | Host        | Port      | HTTP port | Status    | Leader count | Leader distribution              | Partition distribution | Version |
   +-------------+-----------+-----------+-----------+--------------+----------------------------------+------------------------+---------+
   | "storaged0" | 9779      | 19669     | "ONLINE"  | 5            | "basketballplayer:5"             | "basketballplayer:5"   | "3.1.0" |
   | "storaged1" | 9779      | 19669     | "ONLINE"  | 5            | "basketballplayer:5"             | "basketballplayer:5"   | "3.1.0" |
   | "storaged2" | 9779      | 19669     | "ONLINE"  | 5            | "basketballplayer:5"             | "basketballplayer:5"   | "3.1.0" |
   +-------------+-----------+-----------+-----------+--------------+----------------------------------+------------------------+---------+
   ```

3. é€‰æ‹©å›¾ç©ºé—´`basketballplayer`

   ```sh
   nebula[(none)]> USE basketballplayer;
   ```

   ç”¨æˆ·å¯ä»¥æ‰§è¡Œå‘½ä»¤`SHOW SPACES`æŸ¥çœ‹åˆ›å»ºçš„å›¾ç©ºé—´

   ```sh
   nebula> SHOW SPACES;
   +--------------------+
   | Name               |
   +--------------------+
   | "basketballplayer" |
   +--------------------+
   ```

4. åˆ›å»º Tag å’Œ Edge type

   è¯­æ³•:

   ```sh
   CREATE {TAG | EDGE} [IF NOT EXISTS] {<tag_name> | <edge_type_name>}
       (
         <prop_name> <data_type> [NULL | NOT NULL] [DEFAULT <default_value>] [COMMENT '<comment>']
         [{, <prop_name> <data_type> [NULL | NOT NULL] [DEFAULT <default_value>] [COMMENT '<comment>']} ...] 
       )
       [TTL_DURATION = <ttl_duration>]
       [TTL_COL = <prop_name>]
       [COMMENT = '<comment>'];
   ```

   åˆ›å»º Tag:`player`å’Œ`team`ï¼Œä»¥åŠ Edge type:`follow`å’Œ`serve`ã€‚è¯´æ˜å¦‚ä¸‹è¡¨ã€‚

   | åç§°   | ç±»å‹      | å±æ€§                             |
   | ------ | --------- | -------------------------------- |
   | player | Tag       | name (string), age (int)         |
   | team   | Tag       | name (string)                    |
   | follow | Edge type | degree (int)                     |
   | serve  | Edge type | start_year (int), end_year (int) |

   ```sh
   CREATE TAG player(name string, age int);
   CREATE TAG team(name string);
   CREATE EDGE follow(degree int);
   CREATE EDGE serve(start_year int, end_year int);
   ```

5. æ’å…¥ç‚¹å’Œè¾¹

   - æ’å…¥ç‚¹

     ```sh
     INSERT VERTEX [IF NOT EXISTS] [tag_props, [tag_props] ...]
     VALUES <vid>: ([prop_value_list])
     
     tag_props:
       tag_name ([prop_name_list])
     
     prop_name_list: [prop_name [, prop_name] ...]
     prop_value_list: [prop_value [, prop_value] ...]  
     ```

     `vid`æ˜¯ Vertex ID çš„ç¼©å†™ï¼Œ`vid`åœ¨ä¸€ä¸ªå›¾ç©ºé—´ä¸­æ˜¯å”¯ä¸€çš„ã€‚å‚æ•°è¯¦æƒ…è¯·å‚è§ [INSERT VERTEX](https://docs.nebula-graph.com.cn/3.2.1/3.ngql-guide/12.vertex-statements/1.insert-vertex/)

   - æ’å…¥è¾¹

     ```sh
     INSERT EDGE [IF NOT EXISTS] <edge_type> ( <prop_name_list> ) VALUES 
     <src_vid> -> <dst_vid>[@<rank>] : ( <prop_value_list> )
     [, <src_vid> -> <dst_vid>[@<rank>] : ( <prop_value_list> ), ...];
     
     <prop_name_list> ::= [ <prop_name> [, <prop_name> ] ...]
     <prop_value_list> ::= [ <prop_value> [, <prop_value> ] ...]
     ```

   å‚æ•°è¯¦æƒ…è¯·å‚è§ [INSERT EDGE](https://docs.nebula-graph.com.cn/3.2.1/3.ngql-guide/13.edge-statements/1.insert-edge/)

   - æ’å…¥ä»£è¡¨çƒå‘˜å’Œçƒé˜Ÿçš„ç‚¹

     ```sh
     nebula> INSERT VERTEX player(name, age) VALUES "player100":("Tim Duncan", 42);
     nebula> INSERT VERTEX player(name, age) VALUES "player101":("Tony Parker", 36);
     nebula> INSERT VERTEX player(name, age) VALUES "player102":("LaMarcus Aldridge", 33);
     nebula> INSERT VERTEX team(name) VALUES "team203":("Trail Blazers"), "team204":("Spurs");
     ```

   - æ’å…¥ä»£è¡¨çƒå‘˜å’Œçƒé˜Ÿä¹‹é—´å…³ç³»çš„è¾¹

     ```sh
     nebula> INSERT EDGE follow(degree) VALUES "player101" -> "player100":(95);
     nebula> INSERT EDGE follow(degree) VALUES "player101" -> "player102":(90);
     nebula> INSERT EDGE follow(degree) VALUES "player102" -> "player100":(75);
     nebula> INSERT EDGE serve(start_year, end_year) VALUES "player101" -> "team204":(1999, 2018),"player102" -> "team203":(2006,  2015);
     ```

6. æŸ¥è¯¢æ•°æ®[Â¶](https://docs.nebula-graph.com.cn/3.2.1/2.quick-start/4.nebula-graph-crud/#_7)

   - [GO](https://docs.nebula-graph.com.cn/3.2.1/3.ngql-guide/7.general-query-statements/3.go/) è¯­å¥å¯ä»¥æ ¹æ®æŒ‡å®šçš„æ¡ä»¶éå†æ•°æ®åº“ã€‚`GO`è¯­å¥ä»ä¸€ä¸ªæˆ–å¤šä¸ªç‚¹å¼€å§‹ï¼Œæ²¿ç€ä¸€æ¡æˆ–å¤šæ¡è¾¹éå†ï¼Œè¿”å›`YIELD`å­å¥ä¸­æŒ‡å®šçš„ä¿¡æ¯ã€‚

   - [FETCH](https://docs.nebula-graph.com.cn/3.2.1/3.ngql-guide/7.general-query-statements/4.fetch/) è¯­å¥å¯ä»¥è·å¾—ç‚¹æˆ–è¾¹çš„å±æ€§ã€‚

   - [LOOKUP](https://docs.nebula-graph.com.cn/3.2.1/3.ngql-guide/7.general-query-statements/5.lookup/) è¯­å¥æ˜¯åŸºäº[ç´¢å¼•](https://docs.nebula-graph.com.cn/3.2.1/2.quick-start/4.nebula-graph-crud/#_12)çš„ï¼Œå’Œ`WHERE`å­å¥ä¸€èµ·ä½¿ç”¨ï¼ŒæŸ¥æ‰¾ç¬¦åˆç‰¹å®šæ¡ä»¶çš„æ•°æ®ã€‚

   - [MATCH](https://docs.nebula-graph.com.cn/3.2.1/3.ngql-guide/7.general-query-statements/2.match/) è¯­å¥æ˜¯æŸ¥è¯¢å›¾æ•°æ®æœ€å¸¸ç”¨çš„ï¼Œå¯ä»¥çµæ´»çš„æè¿°å„ç§å›¾æ¨¡å¼ï¼Œä½†æ˜¯å®ƒä¾èµ–[ç´¢å¼•](https://docs.nebula-graph.com.cn/3.2.1/2.quick-start/4.nebula-graph-crud/#_12)å»åŒ¹é… NebulaGraph ä¸­çš„æ•°æ®æ¨¡å‹ï¼Œæ€§èƒ½ä¹Ÿè¿˜éœ€è¦è°ƒä¼˜ã€‚

7. 



> ğŸŒ¶**æ³¨æ„**

æ— å±æ€§ç´¢å¼•çš„æ—¶å€™ï¼Œåœ¨æ²¡æœ‰æŒ‡å®šæ¡ä»¶çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡æ•°æ®æ‰«æçš„sampleä¸‹æ¨å»æ‰«å¾— limit çš„æ•°æ®

è€Œå¸¦æœ‰`filter`æ¡ä»¶æ—¶ï¼Œéœ€è¦å…¨æ‰«æ‰è¡Œï¼Œè¿™ä¸ªæƒ…å†µåœ¨nebulaé‡Œæ˜¯è¢«ç¦æ­¢çš„ï¼Œéœ€è¦åˆ›å»ºè¿™ä¸ªtagä¸Šçš„ç´¢å¼•æ‰èƒ½æŸ¥è¯¢

```sql
# åœ¨ Tag player çš„ name å±æ€§å’Œ Edge type belong_to ä¸Šåˆ›å»ºç´¢å¼•
CREATE TAG INDEX IF NOT EXISTS name ON player(name(20));
CREATE EDGE INDEX IF NOT EXISTS belong_to_index on belong_to();
# é‡å»ºç´¢å¼•ä½¿å…¶ç”Ÿæ•ˆ
REBUILD EDGE INDEX name;
REBUILD EDGE INDEX belong_to_index;
# å¼€å§‹æŸ¥è¯¢
MATCH ()<-[e:belong_to]-() 
WHERE e.industry_name=='æ°´åŠ›å‘ç”µ'
RETURN e
LIMIT 3;
```



## å›¾æ¨¡å¼

æ¨¡å¼(pattern)å’Œå›¾æ¨¡å¼åŒ¹é…ï¼Œæ˜¯å›¾æŸ¥è¯¢è¯­è¨€çš„æ ¸å¿ƒåŠŸèƒ½

> å•ç‚¹æ¨¡å¼

```sql
(a)
```

ç¤ºä¾‹ä¸ºä¸€ä¸ªç®€å•çš„æ¨¡å¼ï¼Œæè¿°äº†å•ä¸ªç‚¹ï¼Œå¹¶ä½¿ç”¨å˜é‡`a`å‘½åè¯¥ç‚¹

> å¤šç‚¹å…³è”æ¨¡å¼

å¤šä¸ªç‚¹é€šè¿‡è¾¹ç›¸è¿æ˜¯å¸¸è§çš„ç»“æ„ï¼Œæ¨¡å¼ç”¨ç®­å¤´æ¥æè¿°ä¸¤ä¸ªç‚¹ä¹‹é—´çš„è¾¹ã€‚ä¾‹å¦‚ï¼š

```sql
(a)-[]->(b)
```

ç¤ºä¾‹ä¸ºä¸€ä¸ªç®€å•çš„æ•°æ®ç»“æ„ï¼šä¸¤ä¸ªç‚¹å’Œä¸€æ¡è¿æ¥ä¸¤ä¸ªç‚¹çš„è¾¹ï¼Œä¸¤ä¸ªç‚¹åˆ†åˆ«ä¸º`a`å’Œ`b`ï¼Œè¾¹æ˜¯æœ‰æ–¹å‘çš„ï¼Œä»`a`åˆ°`b`

è¿™ç§æè¿°ç‚¹å’Œè¾¹çš„æ–¹å¼å¯ä»¥æ‰©å±•åˆ°ä»»æ„æ•°é‡çš„ç‚¹å’Œè¾¹ï¼Œä¾‹å¦‚ï¼š

```sql
(a)-[]->(b)<-[]-(c)
```

è¿™æ ·çš„ä¸€ç³»åˆ—ç‚¹å’Œè¾¹ç§°ä¸º`è·¯å¾„`(path)

åªæœ‰åœ¨æ¶‰åŠæŸä¸ªç‚¹æ—¶ï¼Œæ‰éœ€è¦å‘½åè¿™ä¸ªç‚¹ã€‚å¦‚æœä¸æ¶‰åŠè¿™ä¸ªç‚¹ï¼Œåˆ™å¯ä»¥çœç•¥åç§°ï¼Œä¾‹å¦‚ï¼š

```sql
(a)-[]->()<-[]-(c)
```

> Tagæ¨¡å¼

nGQL ä¸­çš„`Tag`æ¦‚å¿µä¸ openCypher ä¸­çš„`Label`æœ‰ä¸€äº›ä¸åŒã€‚ä¾‹å¦‚ï¼Œå¿…é¡»åˆ›å»ºä¸€ä¸ª`Tag`ä¹‹åæ‰èƒ½ä½¿ç”¨å®ƒï¼Œè€Œä¸”`Tag`è¿˜å®šä¹‰äº†å±æ€§çš„ç±»å‹

æ¨¡å¼é™¤äº†ç®€å•åœ°æè¿°å›¾ä¸­çš„ç‚¹ä¹‹å¤–ï¼Œè¿˜å¯ä»¥æè¿°ç‚¹çš„ Tagã€‚ä¾‹å¦‚ï¼š

```sql
(a:User)-[]->(b)
```

æ¨¡å¼ä¹Ÿå¯ä»¥æè¿°æœ‰å¤šä¸ª Tag çš„ç‚¹ï¼Œä¾‹å¦‚ï¼š

```sql
(a:User:Admin)-[]->(b)
```

> å±æ€§æ¨¡å¼

ç‚¹å’Œè¾¹æ˜¯å›¾çš„åŸºæœ¬ç»“æ„ã€‚nGQL åœ¨è¿™ä¸¤ç§ç»“æ„ä¸Šéƒ½å¯ä»¥å¢åŠ å±æ€§ï¼Œæ–¹ä¾¿å®ç°æ›´ä¸°å¯Œçš„æ¨¡å‹ã€‚

åœ¨æ¨¡å¼ä¸­ï¼Œå±æ€§çš„è¡¨ç¤ºæ–¹å¼ä¸ºï¼šç”¨èŠ±æ‹¬å·æ‹¬èµ·ä¸€äº›é”®å€¼å¯¹ï¼Œç”¨è‹±æ–‡é€—å·åˆ†éš”ã€‚ä¾‹å¦‚ä¸€ä¸ªç‚¹æœ‰ä¸¤ä¸ªå±æ€§ï¼š

```sql
(a {name: 'Andres', sport: 'Brazilian Ju-Jitsu'})
```

åœ¨è¿™ä¸ªç‚¹ä¸Šå¯ä»¥æœ‰ä¸€æ¡è¾¹æ˜¯ï¼š

```sql
(a)-[{blocked: false}]->(b)
```

> è¾¹æ¨¡å¼

æè¿°ä¸€æ¡è¾¹æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨ç®­å¤´è¿æ¥ä¸¤ä¸ªç‚¹ã€‚

å¯ä»¥ç”¨ä»¥ä¸‹æ–¹å¼æè¿°è¾¹ä»¥åŠå®ƒçš„æ–¹å‘æ€§ã€‚å¦‚æœä¸å…³å¿ƒè¾¹çš„æ–¹å‘ï¼Œå¯ä»¥çœç•¥ç®­å¤´ï¼Œä¾‹å¦‚ï¼š

```sql
(a)-[]-(b)
```

å’Œç‚¹ä¸€æ ·ï¼Œè¾¹ä¹Ÿå¯ä»¥å‘½åã€‚ä¸€å¯¹æ–¹æ‹¬å·ç”¨äºåˆ†éš”ç®­å¤´ï¼Œå˜é‡æ”¾åœ¨ä¸¤è€…ä¹‹é—´ã€‚ä¾‹å¦‚ï¼š

```sql
(a)-[r]->(b)
```

å’Œç‚¹ä¸Šçš„ Tag ä¸€æ ·ï¼Œè¾¹ä¹Ÿå¯ä»¥æœ‰ç±»å‹ã€‚æè¿°è¾¹çš„ç±»å‹ï¼Œä¾‹å¦‚ï¼š

```sql
(a)-[r:REL_TYPE]->(b)
```

å’Œç‚¹ä¸Šçš„ Tag ä¸åŒï¼Œä¸€æ¡è¾¹åªèƒ½æœ‰ä¸€ç§ Edge typeã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬æƒ³æè¿°å¤šä¸ªå¯é€‰ Edge typeï¼Œå¯ä»¥ç”¨ç®¡é“ç¬¦å·ï¼ˆ|ï¼‰å°†å¯é€‰å€¼åˆ†å¼€ï¼Œä¾‹å¦‚ï¼š

```sql
(a)-[r:TYPE1|TYPE2]->(b)
```

å’Œç‚¹ä¸€æ ·ï¼Œè¾¹çš„åç§°å¯ä»¥çœç•¥ï¼Œä¾‹å¦‚ï¼š

```sql
(a)-[:REL_TYPE]->(b)
```

> å˜é•¿æ¨¡å¼

åœ¨å›¾ä¸­æŒ‡å®šè¾¹çš„é•¿åº¦æ¥æè¿°å¤šæ¡è¾¹ï¼ˆä»¥åŠä¸­é—´çš„ç‚¹ï¼‰ç»„æˆçš„ä¸€æ¡é•¿è·¯å¾„ï¼Œä¸éœ€è¦ä½¿ç”¨å¤šä¸ªç‚¹å’Œè¾¹æ¥æè¿°ã€‚ä¾‹å¦‚ï¼š

```sql
(a)-[*2]->(b)
```

è¯¥æ¨¡å¼æè¿°äº† 3 ç‚¹ 2 è¾¹ç»„æˆçš„å›¾ï¼Œå®ƒä»¬éƒ½åœ¨ä¸€æ¡è·¯å¾„ä¸Šï¼ˆé•¿åº¦ä¸º 2ï¼‰ï¼Œç­‰ä»·äºï¼š

```sql
(a)-[]->()-[]->(b)
```

ä¹Ÿå¯ä»¥æŒ‡å®šé•¿åº¦èŒƒå›´ï¼Œè¿™æ ·çš„è¾¹æ¨¡å¼ç§°ä¸º`variable-length edges`ï¼Œä¾‹å¦‚ï¼š

```sql
(a)-[*3..5]->(b)
```

`*3..5`è¡¨ç¤ºæœ€å°é•¿åº¦ä¸º 3ï¼Œæœ€å¤§é•¿åº¦ä¸º 5ã€‚

è¯¥æ¨¡å¼æè¿°äº† 4 ç‚¹ 3 è¾¹ã€5 ç‚¹ 4 è¾¹æˆ– 6 ç‚¹ 5 è¾¹ç»„æˆçš„å›¾ã€‚

ä¹Ÿå¯ä»¥å¿½ç•¥æœ€å°é•¿åº¦ï¼ŒåªæŒ‡å®šæœ€å¤§é•¿åº¦ï¼Œä¾‹å¦‚ï¼š

```sql
(a)-[*..5]->(b)
```

å¿…é¡»æŒ‡å®šæœ€å¤§é•¿åº¦ï¼Œ**ä¸æ”¯æŒ**ä»…æŒ‡å®šæœ€å°é•¿åº¦ï¼ˆ`(a)-[*3..]->(b)`ï¼‰æˆ–éƒ½ä¸æŒ‡å®šï¼ˆ`(a)-[*]->(b)`ï¼‰ã€‚

> è·¯å¾„å˜é‡

ä¸€ç³»åˆ—è¿æ¥çš„ç‚¹å’Œè¾¹ç§°ä¸º`è·¯å¾„`ã€‚nGQL å…è®¸ä½¿ç”¨å˜é‡æ¥å‘½åè·¯å¾„ï¼Œä¾‹å¦‚ï¼š

```sql
p = (a)-[*3..5]->(b)
```

å¯ä»¥åœ¨ MATCH è¯­å¥ä¸­ä½¿ç”¨è·¯å¾„å˜é‡

> æ³¨é‡Š

æ”¯æŒå››ç§æ³¨é‡Šæ–¹å¼ï¼š`#`ã€`//`ã€`/* */`

nGQL è¯­å¥ä¸­çš„åæ–œçº¿ï¼ˆ\ï¼‰ä»£è¡¨æ¢è¡Œ

> æ•°æ®ç±»å‹

å­—ç¬¦ä¸²çš„è¡¨ç¤ºæ–¹å¼ä¸ºç”¨åŒå¼•å·æˆ–å•å¼•å·åŒ…è£¹ï¼Œä¾‹å¦‚`"Hello, Cooper"`æˆ–`'Hello, Cooper'`

æ—¥æœŸå’Œæ—¶é—´çš„ç±»å‹ï¼ŒåŒ…æ‹¬`DATE`ã€`TIME`ã€`DATETIME`ã€`TIMESTAMP`å’Œ`DURATION`

````sql
nebula> RETURN DATE({year:-123, month:12, day:3});
+------------------------------------+
| date({year:-(123),month:12,day:3}) |
+------------------------------------+
| -123-12-03                         |
+------------------------------------+
nebula> RETURN DATE("23333");
+---------------+
| date("23333") |
+---------------+
| 23333-01-01   |
+---------------+

# ä¼ å…¥å½“å‰æ—¶é—´ã€‚
nebula> RETURN timestamp();
+-------------+
| timestamp() |
+-------------+
| 1625469277  |
+-------------+

# ä¼ å…¥æŒ‡å®šæ—¶é—´ã€‚
nebula> RETURN timestamp("2022-01-05T06:18:43");
+----------------------------------+
| timestamp("2022-01-05T06:18:43") |
+----------------------------------+
| 1641363523                       |
+----------------------------------+
````

`date()`æ”¯æŒçš„å±æ€§åç§°åŒ…æ‹¬`year`ã€`month`å’Œ`day`ã€‚`date()`æ”¯æŒè¾“å…¥`YYYY`ã€`YYYY-MM`æˆ–`YYYY-MM-DD`ï¼Œæœªè¾“å…¥çš„æœˆä»½æˆ–æ—¥æœŸé»˜è®¤ä¸º`01`

`time()`æ”¯æŒçš„å±æ€§åç§°åŒ…æ‹¬`hour`ã€`minute`å’Œ`second`

`datetime()`æ”¯æŒçš„å±æ€§åç§°åŒ…æ‹¬`year`ã€`month`ã€`day`ã€`hour`ã€`minute`å’Œ`second`

åˆ—è¡¨ï¼ˆListï¼‰æ˜¯å¤åˆæ•°æ®ç±»å‹ï¼Œä¸€ä¸ªåˆ—è¡¨æ˜¯ä¸€ç»„å…ƒç´ çš„åºåˆ—ï¼Œå¯ä»¥é€šè¿‡å…ƒç´ åœ¨åºåˆ—ä¸­çš„ä½ç½®è®¿é—®åˆ—è¡¨ä¸­çš„å…ƒç´ 

nGQL çš„ä¸‹æ ‡æ”¯æŒä»å‰å¾€åæŸ¥è¯¢ï¼Œä» 0 å¼€å§‹ï¼Œ0 è¡¨ç¤ºç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œ1 è¡¨ç¤ºç¬¬äºŒä¸ªå…ƒç´ ï¼Œä»¥æ­¤ç±»æ¨ï¼›ä¹Ÿæ”¯æŒä»åå¾€å‰æŸ¥è¯¢ï¼Œä»-1 å¼€å§‹ï¼Œ-1 è¡¨ç¤ºæœ€åä¸€ä¸ªå…ƒç´ ï¼Œ-2 è¡¨ç¤ºå€’æ•°ç¬¬äºŒä¸ªå…ƒç´ ï¼Œä»¥æ­¤ç±»æ¨ã€‚

- [M]ï¼šè¡¨ç¤ºä¸‹æ ‡ä¸º M çš„å…ƒç´ ã€‚
- [M..N]ï¼šè¡¨ç¤º`M â‰¤ ä¸‹æ ‡ ï¼œ N`çš„å…ƒç´ ã€‚`N`ä¸º 0 æ—¶ï¼Œè¿”å›ä¸ºç©ºã€‚
- [M..]ï¼šè¡¨ç¤º`M â‰¤ ä¸‹æ ‡`çš„å…ƒç´ ã€‚
- [..N]ï¼šè¡¨ç¤º`ä¸‹æ ‡ ï¼œ N`çš„å…ƒç´ ã€‚`N`ä¸º 0 æ—¶ï¼Œè¿”å›ä¸ºç©ºã€‚

## å¯è§†åŒ–

NebulaGraph Studioï¼ˆç®€ç§° Studioï¼‰æ˜¯ä¸€æ¬¾å¯ä»¥é€šè¿‡ Web è®¿é—®çš„å¼€æºå›¾æ•°æ®åº“å¯è§†åŒ–å·¥å…·ï¼Œæ­é… [NebulaGraph](https://docs.nebula-graph.com.cn/3.2.1/) å†…æ ¸ä½¿ç”¨ï¼Œæä¾›æ„å›¾ã€æ•°æ®å¯¼å…¥ã€ç¼–å†™ nGQL æŸ¥è¯¢ç­‰ä¸€ç«™å¼æœåŠ¡ã€‚

> å‰ææ¡ä»¶[Â¶](https://docs.nebula-graph.com.cn/3.2.1/nebula-studio/deploy-connect/st-ug-deploy/#_1)

åœ¨éƒ¨ç½² RPM ç‰ˆ Studio ä¹‹å‰ï¼Œç”¨æˆ·éœ€è¦ç¡®è®¤ä»¥ä¸‹ä¿¡æ¯ï¼š

- NebulaGraph æœåŠ¡å·²ç»éƒ¨ç½²å¹¶å¯åŠ¨ã€‚è¯¦ç»†ä¿¡æ¯ï¼Œå‚è€ƒ [NebulaGraph å®‰è£…éƒ¨ç½²](https://docs.nebula-graph.com.cn/3.2.1/4.deployment-and-installation/1.resource-preparations/)

- ä½¿ç”¨çš„ Linux å‘è¡Œç‰ˆä¸º CentOS ï¼Œå·²å®‰è£… lsof

- ç¡®ä¿ä»¥ä¸‹ç«¯å£æœªè¢«å ç”¨ï¼Œ`7001`æ˜¯Studio æä¾› web æœåŠ¡ä½¿ç”¨çš„



ä»å®˜ç½‘ä¸‹è½½[nebula-graph-studio-3.4.1.x86_64.rpm](https://oss-cdn.nebula-graph.com.cn/nebula-graph-studio/3.4.1/nebula-graph-studio-3.4.1.x86_64.rpm)ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…åˆ°æŒ‡å®šè·¯å¾„

```sh
sudo rpm -i nebula-graph-studio-3.4.1.x86_64.rpm --prefix=<path> 
```

å®‰è£…å®Œï¼Œè‡ªåŠ¨ä¼šå¯åŠ¨ï¼Œå½“å±å¹•è¿”å›ä»¥ä¸‹ä¿¡æ¯æ—¶ï¼Œè¡¨ç¤º PRM ç‰ˆ Studio å·²ç»æˆåŠŸå¯åŠ¨ã€‚

```sh
Start installing NebulaGraph Studio now...
NebulaGraph Studio has been installed.
NebulaGraph Studio started automatically.
```

å¯åŠ¨æˆåŠŸåï¼Œåœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥ `http://<ip address>:7001`

**æ³¨æ„**: hostå¤„å¡«å†™ä¸º `ip:port`æ ¼å¼

ç”¨æˆ·åå’Œå¯†ç ï¼šæ ¹æ® Nebula Graph çš„èº«ä»½éªŒè¯è®¾ç½®å¡«å†™ç™»å½•è´¦å·å’Œå¯†ç 

- å¦‚æœæœªå¯ç”¨èº«ä»½éªŒè¯ï¼Œå¯ä»¥å¡«å†™é»˜è®¤ç”¨æˆ·å `root` å’Œä»»æ„å¯†ç ã€‚
- å¦‚æœå·²å¯ç”¨èº«ä»½éªŒè¯ï¼Œä½†æ˜¯æœªåˆ›å»ºè´¦å·ä¿¡æ¯ï¼Œç”¨æˆ·åªèƒ½ä»¥ GOD è§’è‰²ç™»å½•ï¼Œå¿…é¡»å¡«å†™ `root` åŠå¯¹åº”çš„å¯†ç  `nebula`ã€‚
- å¦‚æœå·²å¯ç”¨èº«ä»½éªŒè¯ï¼ŒåŒæ—¶åˆåˆ›å»ºäº†ä¸åŒçš„ç”¨æˆ·å¹¶åˆ†é…äº†è§’è‰²ï¼Œä¸åŒè§’è‰²çš„ç”¨æˆ·ä½¿ç”¨è‡ªå·±çš„è´¦å·å’Œå¯†ç ç™»å½•ã€‚

å¦‚æœåœ¨æµè§ˆå™¨çª—å£ä¸­èƒ½çœ‹åˆ°ä»¥ä¸‹ç™»å½•ç•Œé¢ï¼Œè¡¨ç¤ºå·²ç»æˆåŠŸéƒ¨ç½²å¹¶å¯åŠ¨ Studio

> å¼‚å¸¸å¤„ç†[Â¶](https://docs.nebula-graph.com.cn/3.2.1/nebula-studio/deploy-connect/st-ug-deploy/#_4)

å¦‚æœåœ¨å®‰è£…è¿‡ç¨‹ä¸­è‡ªåŠ¨å¯åŠ¨å¤±è´¥æˆ–æ˜¯éœ€è¦æ‰‹åŠ¨å¯åŠ¨æˆ–åœæ­¢æœåŠ¡ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š

- æ‰‹åŠ¨å¯åŠ¨æœåŠ¡

  ```sh
  bash /usr/local/nebula-graph-studio/scripts/rpm/start.sh
  ```

- æ‰‹åŠ¨åœæ­¢æœåŠ¡

  ```sh
  bash /usr/local/nebula-graph-studio/scripts/rpm/stop.sh
  ```

å¦‚æœå¯åŠ¨æœåŠ¡æ—¶é‡åˆ°æŠ¥é”™æŠ¥é”™ `ERROR: bind EADDRINUSE 0.0.0.0:7001`ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ç«¯å£ 7001 æ˜¯å¦è¢«å ç”¨ã€‚

```sh
lsof -i:7001
```

å¦‚æœç«¯å£è¢«å ç”¨ï¼Œä¸”æ— æ³•ç»“æŸè¯¥ç«¯å£ä¸Šè¿›ç¨‹ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤ä¿®æ”¹ Studio æœåŠ¡å¯åŠ¨ç«¯å£ï¼Œå¹¶é‡æ–°å¯åŠ¨æœåŠ¡ã€‚

```sh
//ä¿®æ”¹ studio æœåŠ¡å¯åŠ¨ç«¯å£
vi etc/studio-api.yam
//ä¿®æ”¹
Port: 7001 // ä¿®æ”¹è¿™ä¸ªç«¯å£å·ï¼Œæ”¹æˆä»»æ„ä¸€ä¸ªå½“å‰å¯ç”¨çš„å³å¯
//é‡å¯æœåŠ¡
systemctl restart nebula-graph-studio.service
```



## é›†ç¾¤ç›‘æ§

[`NebulaGraph Dashboard`](https://docs.nebula-graph.com.cn/3.2.1/nebula-dashboard/1.what-is-dashboard/)(ç®€ç§°Dashboard)æ˜¯ä¸€æ¬¾ç”¨äºç›‘æ§NebulaGraphé›†ç¾¤ä¸­æœºå™¨å’ŒæœåŠ¡çŠ¶æ€çš„å¯è§†åŒ–å·¥å…·

## æ•°æ®å¯¼å…¥

> [Nebula Importer æ•°æ®å¯¼å…¥å®è·µ](https://baijiahao.baidu.com/s?id=1737412299821419025&wfr=spider&for=pc)

Nebula ç›®å‰ä½œä¸ºè¾ƒä¸ºæˆç†Ÿçš„äº§å“ï¼Œå·²ç»æœ‰ç€å¾ˆä¸°å¯Œçš„ç”Ÿæ€ã€‚æ•°æ®å¯¼å…¥çš„ç»´åº¦è€Œè¨€å°±å·²ç»æä¾›äº†å¤šç§é€‰æ‹©ã€‚æœ‰å¤§è€Œå…¨çš„Nebula Exchangeï¼Œå°è€Œç²¾ç®€çš„Nebula Importer, è¿˜æœ‰ä¸º Spark / Flink å¼•æ“æä¾›çš„Nebula Spark Connector å’Œ Nebula Flink Connectorã€‚

ä½¿ç”¨åœºæ™¯ä»‹ç»ï¼š

- Nebula Exchange

- - éœ€è¦å°†æ¥è‡ª Kafkaã€Pulsar å¹³å°çš„æµå¼æ•°æ®, å¯¼å…¥ Nebula Graph æ•°æ®åº“
  - éœ€è¦ä»å…³ç³»å‹æ•°æ®åº“ï¼ˆå¦‚ MySQLï¼‰æˆ–è€…åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼ˆå¦‚ HDFSï¼‰ä¸­è¯»å–æ‰¹å¼æ•°æ®
  - éœ€è¦å°†å¤§æ‰¹é‡æ•°æ®ç”Ÿæˆ Nebula Graph èƒ½è¯†åˆ«çš„ SST æ–‡ä»¶

- Nebula Importer

- - Importer é€‚ç”¨äºå°†æœ¬åœ° CSV æ–‡ä»¶çš„å†…å®¹å¯¼å…¥è‡³ Nebula Graph ä¸­

- Nebula Spark Connector:

- - åœ¨ä¸åŒçš„ Nebula Graph é›†ç¾¤ä¹‹é—´è¿ç§»æ•°æ®
  - åœ¨åŒä¸€ä¸ª Nebula Graph é›†ç¾¤å†…ä¸åŒå›¾ç©ºé—´ä¹‹é—´è¿ç§»æ•°æ®
  - Nebula Graph ä¸å…¶ä»–æ•°æ®æºä¹‹é—´è¿ç§»æ•°æ®
  - ç»“åˆ Nebula Algorithm è¿›è¡Œå›¾è®¡ç®—

- Nebula Flink Connector

- - åœ¨ä¸åŒçš„ Nebula Graph é›†ç¾¤ä¹‹é—´è¿ç§»æ•°æ®
  - åœ¨åŒä¸€ä¸ª Nebula Graph é›†ç¾¤å†…ä¸åŒå›¾ç©ºé—´ä¹‹é—´è¿ç§»æ•°æ®
  - Nebula Graph ä¸å…¶ä»–æ•°æ®æºä¹‹é—´è¿ç§»æ•°æ®

æ€»ä½“æ¥è¯´ï¼ŒExchange å¤§è€Œå…¨ï¼Œå¯ä»¥å’Œå¤§éƒ¨åˆ†çš„å­˜å‚¨å¼•æ“ç»“åˆï¼Œå¯¼å…¥åˆ° Nebula ä¸­ï¼Œä½†æ˜¯éœ€è¦éƒ¨ç½²Spark ç¯å¢ƒã€‚

Importer ä½¿ç”¨ç®€å•ï¼Œæ‰€éœ€ä¾èµ–è¾ƒå°‘ï¼Œä½†éœ€è¦è‡ªå·±æå‰ç”Ÿæˆæ•°æ®æ–‡ä»¶ï¼Œé…ç½®å¥½ schema ä¸€åŠ³æ°¸é€¸ï¼Œä½†æ˜¯ä¸æ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼Œé€‚åˆæ•°æ®é‡ä¸­ç­‰ã€‚

Spark / Flink Connector éœ€è¦å’Œæµæ•°æ®ç»“åˆã€‚

ä¸åŒçš„åœºæ™¯é€‰æ‹©ä¸åŒçš„å·¥å…·ï¼Œå¦‚æœä½œä¸ºæ–°äººä½¿ç”¨ Nebula åœ¨å¯¼å…¥æ•°æ®æ—¶ï¼Œå»ºè®®ä½¿ç”¨ Nebula Importer å·¥å…·ï¼Œç®€å•å¿«é€Ÿä¸Šæ‰‹ã€‚
